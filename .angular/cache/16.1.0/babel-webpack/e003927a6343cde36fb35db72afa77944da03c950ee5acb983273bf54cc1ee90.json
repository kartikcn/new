{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { MessageService } from 'primeng/api';\nimport { UtilConstant } from 'src/common/UtilConstant';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/ui/Helpdesk/equipment/services/equipment.services\";\nimport * as i2 from \"primeng/api\";\nimport * as i3 from \"src/app/ui/link-plan-to-location/services/link-plan-to-location.services\";\nimport * as i4 from \"src/app/services/auth.service\";\nimport * as i5 from \"primeng/table\";\nimport * as i6 from \"primeng/button\";\nimport * as i7 from \"primeng/toast\";\nimport * as i8 from \"primeng/confirmdialog\";\nfunction UnLinkAssetsScreenComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9)(2, \"h4\", 10);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 11)(5, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function UnLinkAssetsScreenComponent_ng_template_2_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.confirmDialog());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Linked Assets For \", ctx_r0.selectedPlan, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !(ctx_r0.selectedScreens.length > 0));\n  }\n}\nfunction UnLinkAssetsScreenComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 13);\n    i0.ɵɵelement(2, \"p-tableHeaderCheckbox\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\", 14)(4, \"div\", 15)(5, \"div\", 16)(6, \"p\", 17);\n    i0.ɵɵtext(7, \"Asset\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 18);\n    i0.ɵɵelement(9, \"p-sortIcon\", 19)(10, \"p-columnFilter\", 20);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"th\", 21)(12, \"div\", 15)(13, \"div\", 16)(14, \"p\", 17);\n    i0.ɵɵtext(15, \"Asset Standard \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 18);\n    i0.ɵɵelement(17, \"p-sortIcon\", 22)(18, \"p-columnFilter\", 23);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"th\", 24)(20, \"div\", 15)(21, \"div\", 16)(22, \"p\", 17);\n    i0.ɵɵtext(23, \"Building \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\", 18);\n    i0.ɵɵelement(25, \"p-sortIcon\", 25)(26, \"p-columnFilter\", 26);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(27, \"th\", 27)(28, \"div\", 15)(29, \"div\", 16)(30, \"p\", 17);\n    i0.ɵɵtext(31, \"Floor\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(32, \"div\", 18);\n    i0.ɵɵelement(33, \"p-sortIcon\", 28)(34, \"p-columnFilter\", 29);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(35, \"th\", 30)(36, \"div\", 15)(37, \"div\", 16)(38, \"p\", 17);\n    i0.ɵɵtext(39, \"Room\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(40, \"div\", 18);\n    i0.ɵɵelement(41, \"p-sortIcon\", 31)(42, \"p-columnFilter\", 32);\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction UnLinkAssetsScreenComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 33)(1, \"td\", 13);\n    i0.ɵɵelement(2, \"p-tableCheckbox\", 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const eq_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"pSelectableRow\", eq_r5);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", eq_r5);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(eq_r5.eqCode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(eq_r5.eqStd);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(eq_r5.blName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(eq_r5.floorName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(eq_r5.rmName);\n  }\n}\nconst _c0 = function () {\n  return [5, 10, 25];\n};\nexport class UnLinkAssetsScreenComponent {\n  constructor(eqService, messageService, confirmationService, linkPlanToLocationOrAssetService, authSrv) {\n    this.eqService = eqService;\n    this.messageService = messageService;\n    this.confirmationService = confirmationService;\n    this.linkPlanToLocationOrAssetService = linkPlanToLocationOrAssetService;\n    this.authSrv = authSrv;\n    this.eqData = [];\n    this.loading = false;\n    this.rowCount = UtilConstant.ROW_COUNT;\n    this.selectedPlan = '';\n    this.selectedScreens = [];\n    this.compId = 0;\n    this.planId = 0;\n    this.parentFun = new EventEmitter();\n  }\n  ngOnInit() {\n    //  this.loadRecords();\n    this.compId = this.authSrv.getLoggedInUserCompId();\n  }\n  loadRecords(planId) {\n    this.loading = true;\n    this.planId = planId;\n    this.eqData = [];\n    this.selectedScreens = [];\n    this.eqService.getLinkedEquipmentPlanId(planId).subscribe(res => {\n      if (res.status != 202) {\n        this.eqData = res;\n      } else {\n        this.eqData = [];\n      }\n      this.loading = false;\n    }, error => {\n      this.loading = false;\n    });\n  }\n  onRowSelect(event) {\n    this.parentFun.emit(event);\n  }\n  confirmDialog() {\n    this.confirmationService.confirm({\n      message: UtilConstant.UN_LINK_ASSETS_CONFIRMATION,\n      header: 'Confirmation',\n      icon: 'pi pi-exclamation-triangle',\n      accept: () => {\n        this.onUnLink();\n      },\n      key: \"unLinkGrid\"\n    });\n  }\n  onUnLink() {\n    let selectedPlansList = [];\n    this.selectedScreens.map(asset => {\n      const data = {\n        planLocEqId: 0,\n        planId: this.planId,\n        blId: asset.blId,\n        flId: asset.flId,\n        rmId: asset.rmId,\n        eqId: asset.eqId,\n        compId: this.compId\n      };\n      selectedPlansList.push(data);\n    });\n    this.linkPlanToLocationOrAssetService.delete(selectedPlansList).subscribe(res => {\n      this.messageService.clear();\n      if (res.length >= 0) {\n        this.messageService.add({\n          key: 'unLinkGrid',\n          severity: 'success',\n          summary: 'Asset(s) Un Linked successfully',\n          detail: 'Assets are successfully unlinked except for those that contain schedules.'\n        });\n        this.refreshPanel();\n        this.selectedScreens = [];\n      }\n    });\n  }\n  refreshPanel() {\n    this.parentFun.emit(true);\n  }\n  static #_ = this.ɵfac = function UnLinkAssetsScreenComponent_Factory(t) {\n    return new (t || UnLinkAssetsScreenComponent)(i0.ɵɵdirectiveInject(i1.EquipmentService), i0.ɵɵdirectiveInject(i2.MessageService), i0.ɵɵdirectiveInject(i2.ConfirmationService), i0.ɵɵdirectiveInject(i3.LinkPlanToLocationOrAssetService), i0.ɵɵdirectiveInject(i4.AuthService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UnLinkAssetsScreenComponent,\n    selectors: [[\"app-un-link-assets-screen\"]],\n    outputs: {\n      parentFun: \"parentFun\"\n    },\n    features: [i0.ɵɵProvidersFeature([MessageService])],\n    decls: 8,\n    vars: 8,\n    consts: [[1, \"card\"], [\"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", \"scrollDirection\", \"both\", \"styleClass\", \"p-datatable-responsive-demo p-datatable-gridlines\", \"dataKey\", \"eqId\", 3, \"value\", \"paginator\", \"rows\", \"showCurrentPageReport\", \"scrollable\", \"rowsPerPageOptions\", \"selection\", \"selectionChange\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"key\", \"unLinkGrid\", \"position\", \"top-right\"], [\"key\", \"delete\", \"position\", \"top-center\"], [\"key\", \"unLinkGrid\", \"header\", \"Confirmation\", \"icon\", \"pi pi-exclamation-triangle\"], [1, \"d-flex\", \"flex-row\"], [1, \"linked-assets-heading-div\"], [1, \"linked-assets-heading\"], [1, \"linked-assests-button-div\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Un Link\", 1, \"p-button-primary\", \"p-button-sm\", \"p-mr-2\", 3, \"disabled\", \"click\"], [2, \"width\", \"3rem\"], [\"pSortableColumn\", \"eqCode\"], [1, \"grid-header-column\"], [1, \"grid-header-label\"], [1, \"grid-label-paragraph\"], [1, \"grid-sort-icon\"], [\"field\", \"eqCode\"], [\"type\", \"text\", \"field\", \"eqCode\", \"display\", \"menu\"], [\"pSortableColumn\", \"eqStd\"], [\"field\", \"eqStd\"], [\"type\", \"text\", \"field\", \"eqStd\", \"display\", \"menu\"], [\"pSortableColumn\", \"blName\"], [\"field\", \"blName\"], [\"type\", \"text\", \"field\", \"blName\", \"display\", \"menu\"], [\"pSortableColumn\", \"floorName\"], [\"field\", \"floorName\"], [\"type\", \"text\", \"field\", \"floorName\", \"display\", \"menu\"], [\"pSortableColumn\", \"rmName\"], [\"field\", \"rmName\"], [\"type\", \"text\", \"field\", \"rmName\", \"display\", \"menu\"], [3, \"pSelectableRow\"], [3, \"value\"]],\n    template: function UnLinkAssetsScreenComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"p-table\", 1);\n        i0.ɵɵlistener(\"selectionChange\", function UnLinkAssetsScreenComponent_Template_p_table_selectionChange_1_listener($event) {\n          return ctx.selectedScreens = $event;\n        });\n        i0.ɵɵtemplate(2, UnLinkAssetsScreenComponent_ng_template_2_Template, 6, 2, \"ng-template\", 2);\n        i0.ɵɵtemplate(3, UnLinkAssetsScreenComponent_ng_template_3_Template, 43, 0, \"ng-template\", 3);\n        i0.ɵɵtemplate(4, UnLinkAssetsScreenComponent_ng_template_4_Template, 13, 7, \"ng-template\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(5, \"p-toast\", 5)(6, \"p-toast\", 6)(7, \"p-confirmDialog\", 7);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"value\", ctx.eqData)(\"paginator\", true)(\"rows\", 5)(\"showCurrentPageReport\", true)(\"scrollable\", true)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(7, _c0))(\"selection\", ctx.selectedScreens);\n      }\n    },\n    dependencies: [i2.PrimeTemplate, i5.Table, i5.SortableColumn, i5.SelectableRow, i5.SortIcon, i5.TableCheckbox, i5.TableHeaderCheckbox, i5.ColumnFilter, i6.ButtonDirective, i7.Toast, i8.ConfirmDialog],\n    styles: [\".linked-assets-heading-div[_ngcontent-%COMP%] {\\n  flex: auto;\\n  width: 90%;\\n}\\n\\n.linked-assests-button-div[_ngcontent-%COMP%] {\\n  width: 10%;\\n}\\n\\n@media screen and (min-width: 600px) and (max-width: 959px) {\\n  .linked-assets-heading[_ngcontent-%COMP%] {\\n    font-size: 13px;\\n  }\\n  .p-button[_ngcontent-%COMP%] {\\n    height: 40px !important;\\n  }\\n  .linked-assets-heading-div[_ngcontent-%COMP%] {\\n    width: 80%;\\n  }\\n  .linked-assests-button-div[_ngcontent-%COMP%] {\\n    width: 20%;\\n  }\\n}\\n@media screen and (min-width: 960px) and (max-width: 1439px) {\\n  .linked-assets-heading[_ngcontent-%COMP%] {\\n    font-size: 13px;\\n  }\\n  .p-button[_ngcontent-%COMP%] {\\n    height: 40px !important;\\n  }\\n  .linked-assets-heading-div[_ngcontent-%COMP%] {\\n    width: 80%;\\n  }\\n  .linked-assests-button-div[_ngcontent-%COMP%] {\\n    width: 20%;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdWkvbGluay1hc3NldHMtdG8tcGxhbi93aWRnZXRzL3VuLWxpbmstYXNzZXRzLXNjcmVlbi91bi1saW5rLWFzc2V0cy1zY3JlZW4uY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi8uLi8uLi8uLi8uLi9NYW5hdiUyMEd1cHRhL0Rvd25sb2Fkcy9mbXMvZm1zL2Zyb250ZW5kL2Ztc19mcm9udGVuZC9zcmMvYXBwL3VpL2xpbmstYXNzZXRzLXRvLXBsYW4vd2lkZ2V0cy91bi1saW5rLWFzc2V0cy1zY3JlZW4vdW4tbGluay1hc3NldHMtc2NyZWVuLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0ksVUFBQTtFQUNBLFVBQUE7QUNESjs7QURHQTtFQUNJLFVBQUE7QUNBSjs7QURFQTtFQUNJO0lBQ0ksZUFBQTtFQ0NOO0VEQ0U7SUFDSSx1QkFBQTtFQ0NOO0VEQ0U7SUFDSSxVQUFBO0VDQ047RURDRTtJQUNJLFVBQUE7RUNDTjtBQUNGO0FERUE7RUFDSTtJQUNJLGVBQUE7RUNBTjtFREVFO0lBQ0ksdUJBQUE7RUNBTjtFREVFO0lBQ0ksVUFBQTtFQ0FOO0VERUU7SUFDSSxVQUFBO0VDQU47QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgJy9zcmMvc2Nzcy92YXJpYWJsZXMnO1xuXG4ubGlua2VkLWFzc2V0cy1oZWFkaW5nLWRpdntcbiAgICBmbGV4OiBhdXRvOyBcbiAgICB3aWR0aDogOTAlO1xufVxuLmxpbmtlZC1hc3Nlc3RzLWJ1dHRvbi1kaXZ7XG4gICAgd2lkdGg6IDEwJTtcbn1cbkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6ICR0YWJsZXRQb3RyYWl0TWluV2lkdGgpIGFuZCAobWF4LXdpZHRoOiR0YWJsZXRQb3RyYWl0TWF4V2lkdGggKXtcbiAgICAubGlua2VkLWFzc2V0cy1oZWFkaW5ne1xuICAgICAgICBmb250LXNpemU6MTNweDtcbiAgICB9XG4gICAgLnAtYnV0dG9ue1xuICAgICAgICBoZWlnaHQ6NDBweCAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAubGlua2VkLWFzc2V0cy1oZWFkaW5nLWRpdntcbiAgICAgICAgd2lkdGg6ODAlXG4gICAgfVxuICAgIC5saW5rZWQtYXNzZXN0cy1idXR0b24tZGl2e1xuICAgICAgICB3aWR0aDogMjAlO1xuICAgIH1cbn1cblxuQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogJHRhYmxldExhbmRzY2FwZU1pbldpZHRoKSBhbmQgKG1heC13aWR0aDokdGFibGV0TGFuZHNwYWNlTWF4V2lkdGggKSB7XG4gICAgLmxpbmtlZC1hc3NldHMtaGVhZGluZ3tcbiAgICAgICAgZm9udC1zaXplOjEzcHg7XG4gICAgfVxuICAgIC5wLWJ1dHRvbntcbiAgICAgICAgaGVpZ2h0OjQwcHggIWltcG9ydGFudDtcbiAgICB9XG4gICAgLmxpbmtlZC1hc3NldHMtaGVhZGluZy1kaXZ7XG4gICAgICAgIHdpZHRoOjgwJVxuICAgIH1cbiAgICAubGlua2VkLWFzc2VzdHMtYnV0dG9uLWRpdntcbiAgICAgICAgd2lkdGg6IDIwJTtcbiAgICB9XG59IiwiLmxpbmtlZC1hc3NldHMtaGVhZGluZy1kaXYge1xuICBmbGV4OiBhdXRvO1xuICB3aWR0aDogOTAlO1xufVxuXG4ubGlua2VkLWFzc2VzdHMtYnV0dG9uLWRpdiB7XG4gIHdpZHRoOiAxMCU7XG59XG5cbkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDYwMHB4KSBhbmQgKG1heC13aWR0aDogOTU5cHgpIHtcbiAgLmxpbmtlZC1hc3NldHMtaGVhZGluZyB7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICB9XG4gIC5wLWJ1dHRvbiB7XG4gICAgaGVpZ2h0OiA0MHB4ICFpbXBvcnRhbnQ7XG4gIH1cbiAgLmxpbmtlZC1hc3NldHMtaGVhZGluZy1kaXYge1xuICAgIHdpZHRoOiA4MCU7XG4gIH1cbiAgLmxpbmtlZC1hc3Nlc3RzLWJ1dHRvbi1kaXYge1xuICAgIHdpZHRoOiAyMCU7XG4gIH1cbn1cbkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDk2MHB4KSBhbmQgKG1heC13aWR0aDogMTQzOXB4KSB7XG4gIC5saW5rZWQtYXNzZXRzLWhlYWRpbmcge1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgfVxuICAucC1idXR0b24ge1xuICAgIGhlaWdodDogNDBweCAhaW1wb3J0YW50O1xuICB9XG4gIC5saW5rZWQtYXNzZXRzLWhlYWRpbmctZGl2IHtcbiAgICB3aWR0aDogODAlO1xuICB9XG4gIC5saW5rZWQtYXNzZXN0cy1idXR0b24tZGl2IHtcbiAgICB3aWR0aDogMjAlO1xuICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["EventEmitter","MessageService","UtilConstant","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","UnLinkAssetsScreenComponent_ng_template_2_Template_button_click_5_listener","ɵɵrestoreView","_r4","ctx_r3","ɵɵnextContext","ɵɵresetView","confirmDialog","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","selectedPlan","ɵɵproperty","selectedScreens","length","ɵɵelement","eq_r5","ɵɵtextInterpolate","eqCode","eqStd","blName","floorName","rmName","UnLinkAssetsScreenComponent","constructor","eqService","messageService","confirmationService","linkPlanToLocationOrAssetService","authSrv","eqData","loading","rowCount","ROW_COUNT","compId","planId","parentFun","ngOnInit","getLoggedInUserCompId","loadRecords","getLinkedEquipmentPlanId","subscribe","res","status","error","onRowSelect","event","emit","confirm","message","UN_LINK_ASSETS_CONFIRMATION","header","icon","accept","onUnLink","key","selectedPlansList","map","asset","data","planLocEqId","blId","flId","rmId","eqId","push","delete","clear","add","severity","summary","detail","refreshPanel","_","ɵɵdirectiveInject","i1","EquipmentService","i2","ConfirmationService","i3","LinkPlanToLocationOrAssetService","i4","AuthService","_2","selectors","outputs","features","ɵɵProvidersFeature","decls","vars","consts","template","UnLinkAssetsScreenComponent_Template","rf","ctx","UnLinkAssetsScreenComponent_Template_p_table_selectionChange_1_listener","$event","ɵɵtemplate","UnLinkAssetsScreenComponent_ng_template_2_Template","UnLinkAssetsScreenComponent_ng_template_3_Template","UnLinkAssetsScreenComponent_ng_template_4_Template","ɵɵpureFunction0","_c0"],"sources":["C:\\Users\\Manav Gupta\\Downloads\\fms\\fms\\frontend\\fms_frontend\\src\\app\\ui\\link-assets-to-plan\\widgets\\un-link-assets-screen\\un-link-assets-screen.component.ts","C:\\Users\\Manav Gupta\\Downloads\\fms\\fms\\frontend\\fms_frontend\\src\\app\\ui\\link-assets-to-plan\\widgets\\un-link-assets-screen\\un-link-assets-screen.component.html"],"sourcesContent":["import { Component, EventEmitter, Output } from '@angular/core';\nimport { ConfirmationService, MessageService } from 'primeng/api';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { EquipmentService } from 'src/app/ui/Helpdesk/equipment/services/equipment.services';\nimport { LinkPlanToLocationOrAssetService } from 'src/app/ui/link-plan-to-location/services/link-plan-to-location.services';\nimport { UtilConstant } from 'src/common/UtilConstant';\n\n@Component({\n  selector: 'app-un-link-assets-screen',\n  templateUrl: './un-link-assets-screen.component.html',\n  styleUrls: ['./un-link-assets-screen.component.scss'],\n  providers: [MessageService]\n})\nexport class UnLinkAssetsScreenComponent {\n  eqData: any[] = [];\n  loading: boolean = false;\n  rowCount: number = UtilConstant.ROW_COUNT;\n  selectedPlan: string = '';\n  selectedScreens: any[] = [];\n  compId: number = 0;\n  planId: number = 0;\n  @Output() parentFun = new EventEmitter();\n\n  constructor(\n    private eqService: EquipmentService,\n    private messageService: MessageService,\n    private confirmationService: ConfirmationService,\n    private linkPlanToLocationOrAssetService: LinkPlanToLocationOrAssetService,\n    private authSrv: AuthService\n  ) { }\n\n  ngOnInit(): void {\n    //  this.loadRecords();\n    this.compId = this.authSrv.getLoggedInUserCompId();\n  }\n\n  loadRecords(planId: any) {\n    this.loading = true;\n    this.planId = planId;\n    this.eqData = [];\n    this.selectedScreens = [];\n    this.eqService.getLinkedEquipmentPlanId(planId).subscribe((res: any) => {\n      if (res.status != 202) {\n        this.eqData = res;\n      }\n      else {\n        this.eqData = [];\n      }\n      this.loading = false;\n    },\n      error => {\n        this.loading = false;\n      }\n    );\n  }\n\n  onRowSelect(event: any) {\n    this.parentFun.emit(event);\n  }\n\n  confirmDialog(): void {\n    this.confirmationService.confirm({\n      message: UtilConstant.UN_LINK_ASSETS_CONFIRMATION,\n      header: 'Confirmation',\n      icon: 'pi pi-exclamation-triangle',\n      accept: () => {\n        this.onUnLink();\n      },\n      key: \"unLinkGrid\"\n    });\n\n  }\n\n  onUnLink() {\n    let selectedPlansList: any[] = [];\n    this.selectedScreens.map(asset => {\n      const data = {\n        planLocEqId: 0,\n        planId: this.planId,\n        blId: asset.blId,\n        flId: asset.flId,\n        rmId: asset.rmId,\n        eqId: asset.eqId,\n        compId: this.compId,\n      }\n      selectedPlansList.push(data);\n    })\n    this.linkPlanToLocationOrAssetService.delete(selectedPlansList).subscribe((res: any) => {\n      this.messageService.clear();\n      if (res.length >= 0) {\n        this.messageService.add({ key: 'unLinkGrid', severity: 'success', summary: 'Asset(s) Un Linked successfully', detail: 'Assets are successfully unlinked except for those that contain schedules.' });\n        this.refreshPanel();\n        this.selectedScreens = [];\n      } \n    })\n  }\n\n  refreshPanel() {\n    this.parentFun.emit(true);\n  }\n\n}\n","<div class=\"card\">\n    <p-table [value]=\"eqData\" [paginator]=\"true\" [rows]=\"5\" [showCurrentPageReport]=\"true\"\n        currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} entries\" [scrollable]=\"true\"\n        scrollDirection=\"both\" [rowsPerPageOptions]=\"[5,10,25]\"\n        styleClass=\"p-datatable-responsive-demo p-datatable-gridlines\" [(selection)]=\"selectedScreens\" dataKey=\"eqId\">\n        <ng-template pTemplate=\"caption\">\n            <div class=\"d-flex flex-row\">\n                <div class=\"linked-assets-heading-div\">\n                    <h4 class=\"linked-assets-heading\">Linked Assets For {{selectedPlan}}</h4>\n                </div>\n                <div class=\"linked-assests-button-div\">\n                    <button pButton pRipple label=\"Un Link\" class=\"p-button-primary p-button-sm p-mr-2\"\n                        (click)=\"confirmDialog()\" [disabled]=\"!(selectedScreens.length>0)\"></button>\n                </div>\n            </div>\n        </ng-template>\n        <ng-template pTemplate=\"header\">\n            <tr>\n                <th style=\"width: 3rem\">\n                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\n                </th>\n                <th pSortableColumn=\"eqCode\">\n                    <div class=\"grid-header-column\">\n                        <div class=\"grid-header-label\">\n                            <p class=\"grid-label-paragraph\">Asset</p>\n                        </div>\n                        <div class=\"grid-sort-icon\">\n                            <p-sortIcon field=\"eqCode\"></p-sortIcon>\n                            <p-columnFilter type=\"text\" field=\"eqCode\" display=\"menu\"></p-columnFilter>\n                        </div>\n                    </div>\n                </th>\n                <th pSortableColumn=\"eqStd\">\n                    <div class=\"grid-header-column\">\n                        <div class=\"grid-header-label\">\n                            <p class=\"grid-label-paragraph\">Asset Standard </p>\n                        </div>\n                        <div class=\"grid-sort-icon\">\n                            <p-sortIcon field=\"eqStd\"></p-sortIcon>\n                            <p-columnFilter type=\"text\" field=\"eqStd\" display=\"menu\"></p-columnFilter>\n                        </div>\n                    </div>\n                </th>\n                <th pSortableColumn=\"blName\">\n                    <div class=\"grid-header-column\">\n                        <div class=\"grid-header-label\">\n                            <p class=\"grid-label-paragraph\">Building </p>\n                        </div>\n                        <div class=\"grid-sort-icon\">\n                            <p-sortIcon field=\"blName\"></p-sortIcon>\n                            <p-columnFilter type=\"text\" field=\"blName\" display=\"menu\"></p-columnFilter>\n                        </div>\n                    </div>\n                </th>\n                <th pSortableColumn=\"floorName\">\n                    <div class=\"grid-header-column\">\n                        <div class=\"grid-header-label\">\n                            <p class=\"grid-label-paragraph\">Floor</p>\n                        </div>\n                        <div class=\"grid-sort-icon\">\n                            <p-sortIcon field=\"floorName\"></p-sortIcon>\n                            <p-columnFilter type=\"text\" field=\"floorName\" display=\"menu\"></p-columnFilter>\n                        </div>\n                    </div>\n                </th>\n                <th pSortableColumn=\"rmName\">\n                    <div class=\"grid-header-column\">\n                        <div class=\"grid-header-label\">\n                            <p class=\"grid-label-paragraph\">Room</p>\n                        </div>\n                        <div class=\"grid-sort-icon\">\n                            <p-sortIcon field=\"rmName\"></p-sortIcon>\n                            <p-columnFilter type=\"text\" field=\"rmName\" display=\"menu\"></p-columnFilter>\n                        </div>\n                    </div>\n                </th>\n            </tr>\n        </ng-template>\n        <ng-template pTemplate=\"body\" let-eq>\n            <tr [pSelectableRow]=\"eq\">\n                <td style=\"width: 3rem\">\n                    <p-tableCheckbox [value]=\"eq\"></p-tableCheckbox>\n                </td>\n                <td>{{eq.eqCode}}</td>\n                <td>{{eq.eqStd}}</td>\n                <td>{{eq.blName}}</td>\n                <td>{{eq.floorName}}</td>\n                <td>{{eq.rmName}}</td>\n            </tr>\n        </ng-template>\n    </p-table>\n</div>\n\n<p-toast key=\"unLinkGrid\" position=\"top-right\"></p-toast>\n<p-toast key=\"delete\" position=\"top-center\"></p-toast>\n<p-confirmDialog key=\"unLinkGrid\" header=\"Confirmation\" icon=\"pi pi-exclamation-triangle\"></p-confirmDialog>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}