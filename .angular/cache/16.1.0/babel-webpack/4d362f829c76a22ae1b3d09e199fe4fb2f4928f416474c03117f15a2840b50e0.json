{"ast":null,"code":"import { MessageService } from 'primeng/api';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/rmcat.service\";\nimport * as i2 from \"primeng/api\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"primeng/button\";\nimport * as i5 from \"primeng/toast\";\nimport * as i6 from \"primeng/panel\";\nimport * as i7 from \"primeng/menu\";\nimport * as i8 from \"primeng/tree\";\nimport * as i9 from \"./widgets/add-rmcat-fortree/add-rmcat-fortree.component\";\nimport * as i10 from \"./widgets/add-rmtype-fortree/add-rmtype-fortree.component\";\nfunction RmcatRmtypeComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function RmcatRmtypeComponent_ng_template_3_Template_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const _r5 = i0.ɵɵreference(2);\n      return i0.ɵɵresetView(_r5.toggle($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(1, \"p-menu\", 11, 12);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"popup\", true)(\"model\", ctx_r0.reqitems);\n  }\n}\nfunction RmcatRmtypeComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const node_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"href\", node_r8.data, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(node_r8.label);\n  }\n}\nfunction RmcatRmtypeComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"b\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const node_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(node_r9.label);\n  }\n}\nfunction RmcatRmtypeComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-add-rmcat-fortree\", 14);\n    i0.ɵɵlistener(\"parentFun\", function RmcatRmtypeComponent_div_9_Template_app_add_rmcat_fortree_parentFun_1_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.refresh($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"isNew\", ctx_r3.isNew)(\"action\", ctx_r3.action)(\"formData\", ctx_r3.displayData);\n  }\n}\nfunction RmcatRmtypeComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-add-rmtype-fortree\", 14);\n    i0.ɵɵlistener(\"parentFun\", function RmcatRmtypeComponent_div_10_Template_app_add_rmtype_fortree_parentFun_1_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.refresh($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"isNew\", ctx_r4.isNew)(\"action\", ctx_r4.action)(\"formData\", ctx_r4.displayData);\n  }\n}\nexport class RmcatRmtypeComponent {\n  constructor(rmcatservice, messageService) {\n    this.rmcatservice = rmcatservice;\n    this.messageService = messageService;\n    this.loading = false;\n    this.isNew = true;\n    this.action = '';\n    this.expandedNodes = [];\n    this.treeState = {};\n    this.isrmcatview = false;\n    this.isrmtypeview = false;\n    this.reqitems = [];\n    this.reqitems = [{\n      'label': 'Room Category',\n      'icon': 'pi pi-plus',\n      command: event => {\n        this.addRoomCategory();\n      }\n    }, {\n      'label': 'Room Type',\n      'icon': 'pi pi-plus',\n      command: event => {\n        this.addRoomType();\n      }\n    }];\n  }\n  ngOnInit() {\n    this.loadRecords();\n  }\n  addRoomCategory() {\n    this.isNew = true;\n    this.isrmcatview = true;\n    this.isrmtypeview = false;\n    this.action = \"Add\";\n    let data = {\n      rmcatId: 0,\n      rmCat: '',\n      rmCatDesc: '',\n      highlightColor: '#a6a6a6'\n    };\n    this.displayData = data;\n  }\n  addRoomType() {\n    this.isNew = true;\n    this.isrmcatview = false;\n    this.isrmtypeview = true;\n    this.action = \"Add\";\n    let data = {\n      rmtypeId: 0,\n      rmcatId: null,\n      rmType: '',\n      rmTypeDesc: '',\n      highlightColor: '#a6a6a6'\n    };\n    this.displayData = data;\n  }\n  loadRecords() {\n    const expandedNodes = this.getExpandedNodes();\n    this.loading = true;\n    this.nodes = [];\n    this.rmcatservice.getAllRmCatTreeList().subscribe(res => {\n      this.nodes = res;\n      this.loading = false;\n      expandedNodes.length > 0 ? this.restoreExpandedNodes(expandedNodes) : '';\n    });\n  }\n  getExpandedNodes() {\n    const expandedNodes = [];\n    if (this.nodes) {\n      this.nodes.forEach(node => {\n        if (node.expanded) {\n          expandedNodes.push(node);\n        }\n      });\n      return expandedNodes;\n    } else {\n      return expandedNodes;\n    }\n  }\n  restoreExpandedNodes(expandedNodes) {\n    const visitNode = node => {\n      if (node.expanded) {\n        node.expanded = false;\n        const foundNode = this.findNodeById(this.nodes, node.key);\n        if (foundNode) {\n          foundNode.expanded = true;\n          if (node.children) {\n            node.children.forEach(childNode => {\n              visitNode(childNode);\n            });\n          }\n        }\n      }\n    };\n    expandedNodes.forEach(node => {\n      visitNode(node);\n    });\n  }\n  findNodeById(nodes, id) {\n    let foundNode;\n    nodes.forEach(node => {\n      if (node.key === id) {\n        foundNode = node;\n      } else if (node.children) {\n        const childNode = this.findNodeById(node.children, id);\n        if (childNode) {\n          foundNode = childNode;\n        }\n      }\n    });\n    return foundNode;\n  }\n  nodeSelect(event) {\n    this.treeState.selectedNode = event.node;\n    if (event.node.parent === undefined) {\n      this.isNew = false;\n      this.isrmcatview = true;\n      this.isrmtypeview = false;\n      this.action = \"Edit\";\n      this.displayData = event.node.data;\n    } else {\n      this.isNew = false;\n      this.isrmcatview = false;\n      this.isrmtypeview = true;\n      this.action = \"Edit\";\n      this.displayData = event.node.data;\n    }\n    this.selectedRecord = event.node.data;\n    this.selectedNode = event.node;\n  }\n  onNodeExpand(event) {\n    if (!this.treeState.expandedNodes) {\n      this.treeState.expandedNodes = [];\n    }\n    this.treeState.expandedNodes.push(event.node);\n  }\n  refresh(action) {\n    this.selectedFiles = [];\n    this.selectedRecord = null;\n    this.isrmcatview = false;\n    this.isrmtypeview = false;\n    this.displayData = null;\n    if (action == \"save\") {\n      this.messageService.clear();\n      this.messageService.add({\n        key: 'save',\n        severity: 'success',\n        summary: 'Record saved successfully',\n        detail: 'Record saved successfully'\n      });\n      this.loadRecords();\n    }\n  }\n  static #_ = this.ɵfac = function RmcatRmtypeComponent_Factory(t) {\n    return new (t || RmcatRmtypeComponent)(i0.ɵɵdirectiveInject(i1.RmcatService), i0.ɵɵdirectiveInject(i2.MessageService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RmcatRmtypeComponent,\n    selectors: [[\"app-rmcat-rmtype\"]],\n    features: [i0.ɵɵProvidersFeature([MessageService])],\n    decls: 12,\n    vars: 6,\n    consts: [[1, \"row\"], [1, \"col-sm-6\", \"col-md-6\", \"col-xm-4\", \"col-lg-6\", 2, \"height\", \"90vh\"], [\"header\", \"Room Category and Room Type List\"], [\"pTemplate\", \"icons\"], [\"selectionMode\", \"single\", \"scrollHeight\", \"72vh\", 3, \"loading\", \"value\", \"selection\", \"filter\", \"selectionChange\", \"onNodeSelect\", \"onNodeExpand\"], [\"pTemplate\", \"url\"], [\"pTemplate\", \"default\"], [1, \"col-sm-6\", \"col-md-6\", \"col-xm-4\", \"col-lg-6\"], [4, \"ngIf\"], [\"key\", \"save\", \"position\", \"top-right\"], [\"pButton\", \"\", \"label\", \"Add\", \"icon\", \"pi pi-plus\", 3, \"click\"], [3, \"popup\", \"model\"], [\"showMenu\", \"\"], [3, \"href\"], [3, \"isNew\", \"action\", \"formData\", \"parentFun\"]],\n    template: function RmcatRmtypeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"p-panel\", 2);\n        i0.ɵɵtemplate(3, RmcatRmtypeComponent_ng_template_3_Template, 3, 2, \"ng-template\", 3);\n        i0.ɵɵelementStart(4, \"div\")(5, \"p-tree\", 4);\n        i0.ɵɵlistener(\"selectionChange\", function RmcatRmtypeComponent_Template_p_tree_selectionChange_5_listener($event) {\n          return ctx.selectedFiles = $event;\n        })(\"onNodeSelect\", function RmcatRmtypeComponent_Template_p_tree_onNodeSelect_5_listener($event) {\n          return ctx.nodeSelect($event);\n        })(\"onNodeExpand\", function RmcatRmtypeComponent_Template_p_tree_onNodeExpand_5_listener($event) {\n          return ctx.onNodeExpand($event);\n        });\n        i0.ɵɵtemplate(6, RmcatRmtypeComponent_ng_template_6_Template, 2, 2, \"ng-template\", 5);\n        i0.ɵɵtemplate(7, RmcatRmtypeComponent_ng_template_7_Template, 2, 1, \"ng-template\", 6);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵtemplate(9, RmcatRmtypeComponent_div_9_Template, 2, 3, \"div\", 8);\n        i0.ɵɵtemplate(10, RmcatRmtypeComponent_div_10_Template, 2, 3, \"div\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(11, \"p-toast\", 9);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"loading\", ctx.loading)(\"value\", ctx.nodes)(\"selection\", ctx.selectedFiles)(\"filter\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.isrmcatview);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isrmtypeview);\n      }\n    },\n    dependencies: [i3.NgIf, i2.PrimeTemplate, i4.ButtonDirective, i5.Toast, i6.Panel, i7.Menu, i8.Tree, i9.AddRmcatFortreeComponent, i10.AddRmtypeFortreeComponent],\n    styles: [\"[_nghost-%COMP%]     b, strong[_ngcontent-%COMP%] {\\n  font-weight: 400;\\n}\\n\\n[_nghost-%COMP%]     chevrondownicon {\\n  font-size: 1.5rem;\\n  font-weight: bold;\\n  color: #0d89ec;\\n}\\n\\n[_nghost-%COMP%]     chevronrighticon {\\n  font-size: 1.5rem;\\n  font-weight: bold;\\n  color: #0d89ec;\\n}\\n\\n[_nghost-%COMP%]     chevronrighticon svg {\\n  width: 16px;\\n  height: 16px;\\n}\\n\\n[_nghost-%COMP%]     chevrondownicon svg {\\n  width: 16px;\\n  height: 16px;\\n}\\n\\n[_nghost-%COMP%]     chevronrighticon svg path {\\n  d: path(\\\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\\\");\\n}\\n\\n[_nghost-%COMP%]     chevrondownicon svg path {\\n  d: path(\\\"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z\\\");\\n}\\n\\n[_nghost-%COMP%]     ::-webkit-scrollbar {\\n  width: 6px !important;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdWkvcm1jYXQtcm10eXBlL3JtY2F0LXJtdHlwZS5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uLy4uLy4uLy4uLy4uL01hbmF2JTIwR3VwdGEvRG93bmxvYWRzL2Ztcy9mbXMvZnJvbnRlbmQvZm1zX2Zyb250ZW5kL3NyYy9hcHAvdWkvcm1jYXQtcm10eXBlL3JtY2F0LXJtdHlwZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFjQTtFQUNFLGdCQUFBO0FDYkY7O0FEZ0JBO0VBQ0UsaUJBQUE7RUFDQSxpQkFBQTtFQUNBLGNBQUE7QUNiRjs7QURnQkE7RUFDRSxpQkFBQTtFQUNBLGlCQUFBO0VBQ0EsY0FBQTtBQ2JGOztBRGdCQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0FDYkY7O0FEZ0JBO0VBQ0UsV0FBQTtFQUNBLFlBQUE7QUNiRjs7QURnQkE7RUFDRSxnSEFBQTtBQ2JGOztBRGdCQTtFQUNFLG9FQUFBO0FDYkY7O0FEZ0JBO0VBQ0UscUJBQUE7QUNiRiIsInNvdXJjZXNDb250ZW50IjpbIi8vIDpob3N0IDo6bmctZGVlcCAucGktY2hldnJvbi1kb3duOmJlZm9yZSB7XG4vLyAgIGNvbnRlbnQ6IFwiXFwyMjEyXCIgIWltcG9ydGFudDtcbi8vICAgZm9udC1zaXplOiAxLjVyZW07XG4vLyAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuLy8gICBjb2xvcjogIzBkODllYztcbi8vIH1cblxuLy8gOmhvc3QgOjpuZy1kZWVwIC5waS1jaGV2cm9uLXJpZ2h0OmJlZm9yZSB7XG4vLyAgIGNvbnRlbnQ6IFwiXFwwMDJCXCIgIWltcG9ydGFudDtcbi8vICAgZm9udC1zaXplOiAxLjVyZW07XG4vLyAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuLy8gICBjb2xvcjogIzBkODllYztcbi8vIH1cblxuOmhvc3QgOjpuZy1kZWVwIGIsIHN0cm9uZyB7XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG59XG5cbjpob3N0IDo6bmctZGVlcCAgY2hldnJvbmRvd25pY29uIHtcbiAgZm9udC1zaXplOiAxLjVyZW07XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogIzBkODllYztcbn1cblxuOmhvc3QgOjpuZy1kZWVwIGNoZXZyb25yaWdodGljb24ge1xuICBmb250LXNpemU6IDEuNXJlbTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGNvbG9yOiAjMGQ4OWVjO1xufVxuXG46aG9zdCA6Om5nLWRlZXAgY2hldnJvbnJpZ2h0aWNvbiBzdmd7XG4gIHdpZHRoOiAxNnB4OyBcbiAgaGVpZ2h0OiAxNnB4OyBcbn1cblxuOmhvc3QgOjpuZy1kZWVwIGNoZXZyb25kb3duaWNvbiBzdmd7XG4gIHdpZHRoOiAxNnB4OyBcbiAgaGVpZ2h0OiAxNnB4OyBcbn1cblxuOmhvc3QgOjpuZy1kZWVwIGNoZXZyb25yaWdodGljb24gc3ZnIHBhdGgge1xuICBkOiBwYXRoKCdNOCA0YS41LjUgMCAwIDEgLjUuNXYzaDNhLjUuNSAwIDAgMSAwIDFoLTN2M2EuNS41IDAgMCAxLTEgMHYtM2gtM2EuNS41IDAgMCAxIDAtMWgzdi0zQS41LjUgMCAwIDEgOCA0eicpO1xufVxuXG46aG9zdCA6Om5nLWRlZXAgY2hldnJvbmRvd25pY29uIHN2ZyBwYXRoIHtcbiAgZDogcGF0aCgnTTQgOGEuNS41IDAgMCAxIC41LS41aDdhLjUuNSAwIDAgMSAwIDFoLTdBLjUuNSAwIDAgMSA0IDh6Jyk7XG59XG5cbjpob3N0IDo6bmctZGVlcCA6Oi13ZWJraXQtc2Nyb2xsYmFye1xuICB3aWR0aDo2cHggIWltcG9ydGFudDtcbn0iLCI6aG9zdCA6Om5nLWRlZXAgYiwgc3Ryb25nIHtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIGNoZXZyb25kb3duaWNvbiB7XG4gIGZvbnQtc2l6ZTogMS41cmVtO1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgY29sb3I6ICMwZDg5ZWM7XG59XG5cbjpob3N0IDo6bmctZGVlcCBjaGV2cm9ucmlnaHRpY29uIHtcbiAgZm9udC1zaXplOiAxLjVyZW07XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogIzBkODllYztcbn1cblxuOmhvc3QgOjpuZy1kZWVwIGNoZXZyb25yaWdodGljb24gc3ZnIHtcbiAgd2lkdGg6IDE2cHg7XG4gIGhlaWdodDogMTZweDtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIGNoZXZyb25kb3duaWNvbiBzdmcge1xuICB3aWR0aDogMTZweDtcbiAgaGVpZ2h0OiAxNnB4O1xufVxuXG46aG9zdCA6Om5nLWRlZXAgY2hldnJvbnJpZ2h0aWNvbiBzdmcgcGF0aCB7XG4gIGQ6IHBhdGgoXCJNOCA0YS41LjUgMCAwIDEgLjUuNXYzaDNhLjUuNSAwIDAgMSAwIDFoLTN2M2EuNS41IDAgMCAxLTEgMHYtM2gtM2EuNS41IDAgMCAxIDAtMWgzdi0zQS41LjUgMCAwIDEgOCA0elwiKTtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIGNoZXZyb25kb3duaWNvbiBzdmcgcGF0aCB7XG4gIGQ6IHBhdGgoXCJNNCA4YS41LjUgMCAwIDEgLjUtLjVoN2EuNS41IDAgMCAxIDAgMWgtN0EuNS41IDAgMCAxIDQgOHpcIik7XG59XG5cbjpob3N0IDo6bmctZGVlcCA6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgd2lkdGg6IDZweCAhaW1wb3J0YW50O1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["MessageService","i0","ɵɵelementStart","ɵɵlistener","RmcatRmtypeComponent_ng_template_3_Template_button_click_0_listener","$event","ɵɵrestoreView","_r7","_r5","ɵɵreference","ɵɵresetView","toggle","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵproperty","ctx_r0","reqitems","ɵɵtext","node_r8","data","ɵɵsanitizeUrl","ɵɵtextInterpolate","label","node_r9","RmcatRmtypeComponent_div_9_Template_app_add_rmcat_fortree_parentFun_1_listener","_r11","ctx_r10","ɵɵnextContext","refresh","ctx_r3","isNew","action","displayData","RmcatRmtypeComponent_div_10_Template_app_add_rmtype_fortree_parentFun_1_listener","_r13","ctx_r12","ctx_r4","RmcatRmtypeComponent","constructor","rmcatservice","messageService","loading","expandedNodes","treeState","isrmcatview","isrmtypeview","command","event","addRoomCategory","addRoomType","ngOnInit","loadRecords","rmcatId","rmCat","rmCatDesc","highlightColor","rmtypeId","rmType","rmTypeDesc","getExpandedNodes","nodes","getAllRmCatTreeList","subscribe","res","length","restoreExpandedNodes","forEach","node","expanded","push","visitNode","foundNode","findNodeById","key","children","childNode","id","nodeSelect","selectedNode","parent","undefined","selectedRecord","onNodeExpand","selectedFiles","clear","add","severity","summary","detail","_","ɵɵdirectiveInject","i1","RmcatService","i2","_2","selectors","features","ɵɵProvidersFeature","decls","vars","consts","template","RmcatRmtypeComponent_Template","rf","ctx","ɵɵtemplate","RmcatRmtypeComponent_ng_template_3_Template","RmcatRmtypeComponent_Template_p_tree_selectionChange_5_listener","RmcatRmtypeComponent_Template_p_tree_onNodeSelect_5_listener","RmcatRmtypeComponent_Template_p_tree_onNodeExpand_5_listener","RmcatRmtypeComponent_ng_template_6_Template","RmcatRmtypeComponent_ng_template_7_Template","RmcatRmtypeComponent_div_9_Template","RmcatRmtypeComponent_div_10_Template"],"sources":["C:\\Users\\Manav Gupta\\Downloads\\fms\\fms\\frontend\\fms_frontend\\src\\app\\ui\\rmcat-rmtype\\rmcat-rmtype.component.ts","C:\\Users\\Manav Gupta\\Downloads\\fms\\fms\\frontend\\fms_frontend\\src\\app\\ui\\rmcat-rmtype\\rmcat-rmtype.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { TreeNode, MenuItem, MessageService } from 'primeng/api';\nimport { RmcatService } from 'src/app/services/rmcat.service';\n\n@Component({\n  selector: 'app-rmcat-rmtype',\n  templateUrl: './rmcat-rmtype.component.html',\n  styleUrls: ['./rmcat-rmtype.component.scss'],\n  providers: [MessageService]\n})\nexport class RmcatRmtypeComponent implements OnInit {\n  loading: boolean = false;\n  nodes!: TreeNode[];\n  selectedFiles!: TreeNode[];\n  isNew: boolean = true;\n  action : string ='';\n  selectedRecord!: any;\n  compId!: number;\n  selectedNode!: any;\n  expandedNodes: any[] = [];\n  treeState: any = {};\n  isrmcatview : boolean = false;\n  isrmtypeview : boolean = false;\n  displayData :any;\n  reqitems: MenuItem[] = [];\n  constructor(\n    private rmcatservice:RmcatService,\n    private messageService: MessageService,\n  ) { \n    this.reqitems = [\n      {\n        'label': 'Room Category',\n        'icon': 'pi pi-plus',\n        command: (event) => {\n          this.addRoomCategory();\n        }\n      },\n      {\n        'label': 'Room Type',\n        'icon': 'pi pi-plus',\n        command: (event) => {\n          this.addRoomType();\n        }\n      }\n    ];\n  }\n\n  ngOnInit(): void {\n    this.loadRecords();\n  }\n\n  addRoomCategory(){\n    this.isNew=true;\n    this.isrmcatview = true;\n    this.isrmtypeview = false;\n    this.action = \"Add\";\n    let data ={\n      rmcatId:0,\n      rmCat: '',\n      rmCatDesc: '',\n      highlightColor: '#a6a6a6',\n     \n    }\n    this.displayData = data;\n  }\n\n  addRoomType(){\n    this.isNew=true;\n    this.isrmcatview = false;\n    this.isrmtypeview = true;\n    this.action = \"Add\";\n    let data ={\n      rmtypeId:0,\n      rmcatId:null,\n      rmType: '',\n      rmTypeDesc: '',\n      highlightColor:'#a6a6a6',\n     \n    }\n    this.displayData = data;\n  }\n\n  loadRecords(){\n    const expandedNodes = this.getExpandedNodes();\n    this.loading = true;\n    this.nodes = [];\n    this.rmcatservice.getAllRmCatTreeList().subscribe((res: any) => {\n      this.nodes = res;\n      this.loading = false;\n      expandedNodes.length > 0 ? this.restoreExpandedNodes(expandedNodes) : '';\n    })\n    \n  }\n\n  getExpandedNodes(): TreeNode[] {\n    const expandedNodes: TreeNode[] = [];\n    if (this.nodes) {\n      this.nodes.forEach((node: TreeNode) => {\n        if (node.expanded) {\n          expandedNodes.push(node);\n        }\n      });\n      return expandedNodes;\n    } else {\n      return expandedNodes;\n    }\n\n  }\n\n  restoreExpandedNodes(expandedNodes: TreeNode[]): void {\n    const visitNode = (node: TreeNode) => {\n      if (node.expanded) {\n        node.expanded = false;\n        const foundNode = this.findNodeById(this.nodes, node.key);\n        if (foundNode) {\n          foundNode.expanded = true;\n          if (node.children) {\n            node.children.forEach((childNode: TreeNode) => {\n              visitNode(childNode);\n            });\n          }\n        }\n      }\n    };\n    expandedNodes.forEach((node: TreeNode) => {\n      visitNode(node);\n    });\n  }\n\n  findNodeById(nodes: TreeNode[], id: any): TreeNode {\n    let foundNode: TreeNode | undefined;\n    nodes.forEach((node: TreeNode) => {\n      if (node.key === id) {\n        foundNode = node;\n      } else if (node.children) {\n        const childNode = this.findNodeById(node.children, id);\n        if (childNode) {\n          foundNode = childNode;\n        }\n      }\n    });\n    return foundNode as TreeNode;\n  }\n\n  nodeSelect(event: any) {\n    this.treeState.selectedNode = event.node;\n    if(event.node.parent === undefined){\n      this.isNew=false;\n      this.isrmcatview = true;\n      this.isrmtypeview = false;\n      this.action = \"Edit\";\n      this.displayData = event.node.data;\n      \n    }else{\n      this.isNew=false;\n      this.isrmcatview = false;\n      this.isrmtypeview = true;\n      this.action = \"Edit\";\n      this.displayData = event.node.data;\n    }\n    this.selectedRecord = event.node.data;\n    this.selectedNode = event.node;\n  }\n\n  onNodeExpand(event: any){\n    if (!this.treeState.expandedNodes) {\n      this.treeState.expandedNodes = [];\n    }\n    this.treeState.expandedNodes.push(event.node);\n  }\n\n  refresh(action:any){\n    this.selectedFiles = [];\n    this.selectedRecord = null;\n    this.isrmcatview = false;\n    this.isrmtypeview = false;\n    this.displayData= null;\n    if(action==\"save\"){\n      this.messageService.clear();\n      this.messageService.add({ key: 'save', severity: 'success', summary: 'Record saved successfully', detail: 'Record saved successfully' });\n      this.loadRecords();\n    }\n  }\n\n\n}\n","<div class=\"row\">\n    <div class=\"col-sm-6 col-md-6 col-xm-4 col-lg-6\" style=\"height:90vh;\">\n        <p-panel header=\"Room Category and Room Type List\">\n            <ng-template pTemplate=\"icons\">\n                <button pButton (click)=\"showMenu.toggle($event)\" label=\"Add\" icon=\"pi pi-plus\"></button>\n                <p-menu #showMenu [popup]=\"true\" [model]=\"reqitems\"></p-menu>\n            </ng-template>\n            <div>\n                <p-tree [loading]=\"loading\" [value]=\"nodes\" selectionMode=\"single\" [(selection)]=\"selectedFiles\" [filter]=\"true\"\n                (onNodeSelect)=\"nodeSelect($event)\" (onNodeExpand)=\"onNodeExpand($event)\" scrollHeight=\"72vh\">\n                <ng-template let-node pTemplate=\"url\">\n                    <a [href]=\"node.data\">{{node.label}}</a>\n                </ng-template>\n                <ng-template let-node pTemplate=\"default\">\n                    <b>{{node.label}}</b>\n                </ng-template>\n            </p-tree>\n            </div>\n            \n        </p-panel>\n    </div>\n    <div class=\"col-sm-6 col-md-6 col-xm-4 col-lg-6\">\n        <div *ngIf=\"isrmcatview\">\n            <app-add-rmcat-fortree [isNew]=\"isNew\" [action]=\"action\" [formData]=\"displayData\" (parentFun)=\"refresh($event)\"></app-add-rmcat-fortree>\n        </div>\n        <div *ngIf=\"isrmtypeview\">\n            <app-add-rmtype-fortree [isNew]=\"isNew\" [action]=\"action\" [formData]=\"displayData\"  (parentFun)=\"refresh($event)\"></app-add-rmtype-fortree>\n        </div>\n    </div>\n  </div>\n  <p-toast key=\"save\" position=\"top-right\"></p-toast>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}