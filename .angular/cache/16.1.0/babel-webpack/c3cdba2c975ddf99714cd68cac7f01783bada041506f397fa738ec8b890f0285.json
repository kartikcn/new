{"ast":null,"code":"import { forkJoin, of } from 'rxjs';\nimport { MessageService } from 'primeng/api';\nimport { UtilConstant } from '../../../../../common/UtilConstant';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"../../services/employee.service\";\nimport * as i4 from \"primeng/api\";\nimport * as i5 from \"../../../user/widgets/add-employee/add-employee.component\";\nimport * as i6 from \"@angular/material/legacy-card\";\nimport * as i7 from \"primeng/button\";\nimport * as i8 from \"primeng/toast\";\nimport * as i9 from \"primeng/confirmdialog\";\nimport * as i10 from \"../employee-location/employee-location.component\";\nimport * as i11 from \"../employee-contact/employee-contact.component\";\nconst _c0 = function () {\n  return {\n    \"margin-left\": \".5em\"\n  };\n};\nexport class AddEditEmployeeComponent {\n  constructor(data, formBuilder, dialog, dialogRef, empSrv, confirmationService, messageService) {\n    this.data = data;\n    this.formBuilder = formBuilder;\n    this.dialog = dialog;\n    this.dialogRef = dialogRef;\n    this.empSrv = empSrv;\n    this.confirmationService = confirmationService;\n    this.messageService = messageService;\n    this.subscriptions = [];\n    this.isNew = true;\n    this.isEdit = true;\n    this.title = 'Add';\n    this.frmEmpDetail = this.formBuilder.group({\n      frmEmployeeDetails: [],\n      frmEmployeeContact: [],\n      frmEmployeeLocation: []\n    });\n  }\n  ngOnInit() {\n    this.isEdit = true;\n    this.isNew = true;\n    if (this.data != null) {\n      this.isEdit = this.data.isEdit != null ? this.data.isEdit : false;\n      this.loadData();\n      this.isNewRecord();\n    }\n  }\n  isNewRecord() {\n    if (this.data.newRecord != null) {\n      this.isNew = this.data.newRecord;\n      if (this.isEdit && this.isNew) {\n        this.title = 'Add';\n      } else if (this.isEdit && !this.isNew) {\n        this.title = 'Edit';\n      } else {\n        this.title = 'View';\n      }\n    }\n  }\n  loadData() {\n    const calls = [];\n    if (this.data.em_id != 0) {\n      calls.push(this.empSrv.getEmById(this.data.em_id));\n    } else {\n      calls.push(of(null));\n    }\n    forkJoin(...calls).subscribe(results => {\n      if (results[0] == null) {\n        var data = {\n          emId: 0,\n          initials: null,\n          firstName: null,\n          lastName: null,\n          maidenName: null,\n          aliasName: null,\n          email: null,\n          emStd: null,\n          emStatus: null,\n          idNumber: null,\n          birthDate: null,\n          gender: null,\n          dateJoin: null,\n          dateLeave: null,\n          costCentreId: null,\n          emCode: null,\n          em: {\n            blId: null,\n            flId: null,\n            rmId: null,\n            workType: null,\n            divId: null,\n            depId: null,\n            subDepId: null\n          }\n        };\n        var empLocation = {\n          blId: null,\n          flId: null,\n          rmId: null,\n          workType: null,\n          divId: null,\n          depId: null,\n          subDepId: null\n        };\n        var empContact = {\n          // phoneHome: null,\n          phoneWork: null,\n          phonePersonal: null,\n          faxNum: null,\n          altContactName: null,\n          altContactPhone: null\n        };\n        setTimeout(() => {\n          this.frmEmpDetail.patchValue({\n            frmEmployeeDetails: data,\n            frmEmployeeContact: empContact,\n            frmEmployeeLocation: data\n          });\n        }, 0);\n      } else {\n        setTimeout(() => {\n          this.frmEmpDetail.patchValue({\n            frmEmployeeDetails: results[0].employeeDetails,\n            frmEmployeeContact: results[0].employeeContact,\n            frmEmployeeLocation: results[0]\n          });\n        }, 0);\n      }\n    });\n  }\n  saveRecords() {\n    this.messageService.clear();\n    if (this.frmEmpDetail.valid) {\n      const empData = {\n        \"employeeContact\": this.frmEmpDetail.controls.frmEmployeeContact.value,\n        \"employeeDetails\": this.frmEmpDetail.controls.frmEmployeeDetails.value,\n        \"employeeLocation\": this.frmEmpDetail.controls.frmEmployeeLocation.value\n      };\n      this.empSrv.saveEmployee(empData).subscribe(res => {\n        if (res.code == 200) {\n          // this.toastr.success(\"Record saved Successfully.\");\n          this.messageService.add({\n            key: 'save',\n            severity: 'success',\n            summary: 'success',\n            detail: res.text\n          });\n          this.dialogRef.close(true);\n        } else {\n          this.messageService.add({\n            key: 'save',\n            severity: 'error',\n            summary: 'error',\n            detail: res.text\n          });\n        }\n      });\n    }\n  }\n  confirmDialog() {\n    this.confirmationService.confirm({\n      message: UtilConstant.CANCEL_Msg,\n      header: 'Confirmation',\n      icon: 'pi pi-exclamation-triangle',\n      accept: () => {\n        this.dialogRef.close(false);\n      }\n    });\n  }\n  clearForm() {\n    this.frmEmpDetail.controls.frmEmployeeDetails.reset();\n  }\n  getFormAction() {\n    if (this.frmEmpDetail.valid) {\n      return false;\n    } else return true;\n  }\n  static #_ = this.ɵfac = function AddEditEmployeeComponent_Factory(t) {\n    return new (t || AddEditEmployeeComponent)(i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.UntypedFormBuilder), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i2.MatDialogRef), i0.ɵɵdirectiveInject(i3.EmployeeService), i0.ɵɵdirectiveInject(i4.ConfirmationService), i0.ɵɵdirectiveInject(i4.MessageService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddEditEmployeeComponent,\n    selectors: [[\"app-add-edit-employee\"]],\n    features: [i0.ɵɵProvidersFeature([MessageService])],\n    decls: 27,\n    vars: 12,\n    consts: [[\"mat-dialog-title\", \"\", 1, \"mat-dialog-title-ext\"], [1, \"mat-typography\", \"mat-dialog-content-ext\"], [3, \"formGroup\"], [1, \"mat-dialog-title-ext\"], [\"id\", \"emPanel\"], [\"formControlName\", \"frmEmployeeDetails\", 3, \"isNew\", \"isEdit\"], [\"id\", \"emLocationPanel\"], [\"formControlName\", \"frmEmployeeLocation\", 3, \"isNew\", \"isEdit\"], [\"formControlName\", \"frmEmployeeContact\", 3, \"isNew\", \"isEdit\"], [\"align\", \"end\", 1, \"mat-dialog-actions-ext\"], [\"pButton\", \"\", \"label\", \"Save\", \"icon\", \"pi pi-check\", 3, \"disabled\", \"click\"], [\"label\", \"Cancel\", \"icon\", \"pi pi-times\", \"styleClass\", \"p-button-secondary\", 3, \"click\"], [\"header\", \"Confirmation\", \"icon\", \"pi pi-exclamation-triangle\"], [\"key\", \"save\", \"position\", \"top-right\"]],\n    template: function AddEditEmployeeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\", 0);\n        i0.ɵɵtext(1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"mat-dialog-content\", 1)(3, \"form\", 2)(4, \"mat-card\")(5, \"mat-card-header\", 3)(6, \"mat-card-title\");\n        i0.ɵɵtext(7, \" Basic Information \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"mat-card-content\", 4);\n        i0.ɵɵelement(9, \"app-add-employee\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"mat-card\")(11, \"mat-card-header\", 3)(12, \"mat-card-title\");\n        i0.ɵɵtext(13, \" Location \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"mat-card-content\", 6);\n        i0.ɵɵelement(15, \"app-employee-location\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"mat-card\")(17, \"mat-card-header\", 3)(18, \"mat-card-title\");\n        i0.ɵɵtext(19, \" Contact Information \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"mat-card-content\");\n        i0.ɵɵelement(21, \"app-employee-contact\", 8);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(22, \"mat-dialog-actions\", 9)(23, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function AddEditEmployeeComponent_Template_button_click_23_listener() {\n          return ctx.saveRecords();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"p-button\", 11);\n        i0.ɵɵlistener(\"click\", function AddEditEmployeeComponent_Template_p_button_click_24_listener() {\n          return ctx.confirmDialog();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(25, \"p-confirmDialog\", 12)(26, \"p-toast\", 13);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.title, \" Employee Details\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.frmEmpDetail);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"isNew\", ctx.isNew)(\"isEdit\", ctx.isEdit);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"isNew\", ctx.isNew)(\"isEdit\", ctx.isEdit);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"isNew\", ctx.isNew)(\"isEdit\", ctx.isEdit);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", ctx.getFormAction());\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(11, _c0));\n      }\n    },\n    dependencies: [i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i5.AddEmployeeComponent, i2.MatDialogTitle, i2.MatDialogContent, i2.MatDialogActions, i6.MatLegacyCard, i6.MatLegacyCardHeader, i6.MatLegacyCardContent, i6.MatLegacyCardTitle, i7.ButtonDirective, i7.Button, i8.Toast, i9.ConfirmDialog, i10.EmployeeLocationComponent, i11.EmployeeContactComponent],\n    styles: [\"\\n\\n.mat-dialog-title-ext[_ngcontent-%COMP%] {\\n  background-color: #879cc9;\\n  padding-left: 10px;\\n  font-weight: normal;\\n  margin-bottom: 0px;\\n}\\n\\n.mat-dialog-content-ext[_ngcontent-%COMP%] {\\n  \\n\\n  margin: 0;\\n  padding: 10px;\\n  background-color: white !important;\\n}\\n\\n.mat-dialog-actions-ext[_ngcontent-%COMP%] {\\n  border-top: none;\\n  padding: 3px;\\n  min-height: 36px !important;\\n  margin-bottom: 5px;\\n  \\n\\n  background-color: white !important;\\n}\\n\\n.action-buttons[_ngcontent-%COMP%] {\\n  height: 30px;\\n  width: 70px;\\n}\\n\\n.margin-left-20[_ngcontent-%COMP%] {\\n  margin-left: 20px;\\n}\\n\\n.margin-5[_ngcontent-%COMP%] {\\n  margin: 5px !important;\\n}\\n\\n.mat-card[_ngcontent-%COMP%] {\\n  border-radius: 0px;\\n}\\n\\n.mat-expansion-panel[_ngcontent-%COMP%] {\\n  background-color: #879cc9;\\n}\\n\\n.mat-expansion-panel-header-title[_ngcontent-%COMP%] {\\n  color: white;\\n  letter-spacing: 1px;\\n}\\n\\n\\n\\n\\n\\n\\n.mat-card-title[_ngcontent-%COMP%] {\\n  color: white;\\n  letter-spacing: 1px;\\n  font-size: 13px;\\n  margin: 0px !important;\\n}\\n\\n.mat-card-header-text[_ngcontent-%COMP%] {\\n  margin: 0px !important;\\n}\\n\\n.mat-card-header[_ngcontent-%COMP%] {\\n  padding: 5px !important;\\n  margin-left: -15px;\\n}\\n\\n.mat-card-content[_ngcontent-%COMP%] {\\n  background-color: white !important;\\n  \\n\\n}\\n\\n.mat-expansion-panel-content[_ngcontent-%COMP%] {\\n  background-color: white !important;\\n}\\n\\n.mat-button[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%] {\\n  line-height: inherit !important;\\n}\\n\\n.btn-filter[_ngcontent-%COMP%] {\\n  margin-left: 4px;\\n  margin-right: 5px;\\n  width: 50px;\\n  margin-top: 17px;\\n}\\n\\n.btn-ggb-orange[_ngcontent-%COMP%] {\\n  width: 90px !important;\\n}\\n\\n.btn-ggb-default-custom[_ngcontent-%COMP%] {\\n  margin: 16px !important;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdWkvZW1wbG95ZWUvd2lkZ2V0cy9hZGQtZWRpdC1lbXBsb3llZS9hZGQtZWRpdC1lbXBsb3llZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxpQ0FBQTtBQUVBO0VBQ0UseUJBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7QUFBRjs7QUFHQTtFQUNFLCtCQUFBO0VBQ0EsU0FBQTtFQUNBLGFBQUE7RUFDQSxrQ0FBQTtBQUFGOztBQUdBO0VBQ0UsZ0JBQUE7RUFDQSxZQUFBO0VBQ0EsMkJBQUE7RUFDQSxrQkFBQTtFQUNBLHdCQUFBO0VBQ0Esa0NBQUE7QUFBRjs7QUFHQTtFQUNFLFlBQUE7RUFDQSxXQUFBO0FBQUY7O0FBR0E7RUFDRSxpQkFBQTtBQUFGOztBQUdBO0VBQ0Usc0JBQUE7QUFBRjs7QUFHQTtFQUNFLGtCQUFBO0FBQUY7O0FBR0E7RUFDRSx5QkFBQTtBQUFGOztBQUdBO0VBQ0UsWUFBQTtFQUNBLG1CQUFBO0FBQUY7O0FBR0E7OztHQUFBO0FBS0E7RUFDRSxZQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0VBQ0Esc0JBQUE7QUFERjs7QUFJQTtFQUNFLHNCQUFBO0FBREY7O0FBSUE7RUFDRSx1QkFBQTtFQUNBLGtCQUFBO0FBREY7O0FBSUE7RUFDRSxrQ0FBQTtFQUNBLGtCQUFBO0FBREY7O0FBSUE7RUFDRSxrQ0FBQTtBQURGOztBQUlBO0VBQ0UsK0JBQUE7QUFERjs7QUFJQTtFQUNFLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7QUFERjs7QUFJQTtFQUNFLHNCQUFBO0FBREY7O0FBS0E7RUFDRSx1QkFBQTtBQUZGIiwic291cmNlc0NvbnRlbnQiOlsiLypAaW1wb3J0ICcvc3JjL3Njc3MvdmFyaWFibGVzJzsqL1xuXG4ubWF0LWRpYWxvZy10aXRsZS1leHQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjODc5Y2M5O1xuICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gIG1hcmdpbi1ib3R0b206IDBweDtcbn1cblxuLm1hdC1kaWFsb2ctY29udGVudC1leHQge1xuICAvKmJvcmRlcjogdGhpbiBkb3VibGUgIzg3OWNjOTsqL1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtZGlhbG9nLWFjdGlvbnMtZXh0IHtcbiAgYm9yZGVyLXRvcDogbm9uZTtcbiAgcGFkZGluZzogM3B4O1xuICBtaW4taGVpZ2h0OiAzNnB4ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi1ib3R0b206IDVweDtcbiAgLyogbWFyZ2luLXJpZ2h0OiAxNXB4OyAqL1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xufVxuXG4uYWN0aW9uLWJ1dHRvbnMge1xuICBoZWlnaHQ6IDMwcHg7XG4gIHdpZHRoOiA3MHB4O1xufVxuXG4ubWFyZ2luLWxlZnQtMjAge1xuICBtYXJnaW4tbGVmdDogMjBweDtcbn1cblxuLm1hcmdpbi01IHtcbiAgbWFyZ2luOiA1cHggIWltcG9ydGFudDtcbn1cblxuLm1hdC1jYXJkIHtcbiAgYm9yZGVyLXJhZGl1czogMHB4O1xufVxuXG4ubWF0LWV4cGFuc2lvbi1wYW5lbCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM4NzljYzk7XG59XG5cbi5tYXQtZXhwYW5zaW9uLXBhbmVsLWhlYWRlci10aXRsZSB7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgbGV0dGVyLXNwYWNpbmc6IDFweDtcbn1cblxuLyogLm1hdC1jYXJkIHtcbiAgcGFkZGluZzogMHB4O1xuICBib3JkZXI6IHRoaW4gZG91YmxlIHJnYigxODEsIDE1NSwgOTApO1xufSAqL1xuXG4ubWF0LWNhcmQtdGl0bGUge1xuICBjb2xvcjogd2hpdGU7XG4gIGxldHRlci1zcGFjaW5nOiAxcHg7XG4gIGZvbnQtc2l6ZTogMTNweDtcbiAgbWFyZ2luOiAwcHggIWltcG9ydGFudDtcbn1cblxuLm1hdC1jYXJkLWhlYWRlci10ZXh0IHtcbiAgbWFyZ2luOiAwcHggIWltcG9ydGFudDtcbn1cblxuLm1hdC1jYXJkLWhlYWRlciB7XG4gIHBhZGRpbmc6IDVweCAhaW1wb3J0YW50O1xuICBtYXJnaW4tbGVmdDogLTE1cHg7XG59XG5cbi5tYXQtY2FyZC1jb250ZW50IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgLyogcGFkZGluZzogNXB4OyAqL1xufVxuXG4ubWF0LWV4cGFuc2lvbi1wYW5lbC1jb250ZW50IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbn1cblxuLm1hdC1idXR0b24sIC5tYXQtZmxhdC1idXR0b24sIC5tYXQtaWNvbi1idXR0b24sIC5tYXQtc3Ryb2tlZC1idXR0b24ge1xuICBsaW5lLWhlaWdodDogaW5oZXJpdCAhaW1wb3J0YW50O1xufVxuXG4uYnRuLWZpbHRlciB7XG4gIG1hcmdpbi1sZWZ0OiA0cHg7XG4gIG1hcmdpbi1yaWdodDogNXB4O1xuICB3aWR0aDogNTBweDtcbiAgbWFyZ2luLXRvcDogMTdweDtcbn1cblxuLmJ0bi1nZ2Itb3JhbmdlIHtcbiAgd2lkdGg6IDkwcHggIWltcG9ydGFudDtcbn1cblxuXG4uYnRuLWdnYi1kZWZhdWx0LWN1c3RvbSB7XG4gIG1hcmdpbjogMTZweCAhaW1wb3J0YW50XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["forkJoin","of","MessageService","UtilConstant","MAT_DIALOG_DATA","AddEditEmployeeComponent","constructor","data","formBuilder","dialog","dialogRef","empSrv","confirmationService","messageService","subscriptions","isNew","isEdit","title","frmEmpDetail","group","frmEmployeeDetails","frmEmployeeContact","frmEmployeeLocation","ngOnInit","loadData","isNewRecord","newRecord","calls","em_id","push","getEmById","subscribe","results","emId","initials","firstName","lastName","maidenName","aliasName","email","emStd","emStatus","idNumber","birthDate","gender","dateJoin","dateLeave","costCentreId","emCode","em","blId","flId","rmId","workType","divId","depId","subDepId","empLocation","empContact","phoneWork","phonePersonal","faxNum","altContactName","altContactPhone","setTimeout","patchValue","employeeDetails","employeeContact","saveRecords","clear","valid","empData","controls","value","saveEmployee","res","code","add","key","severity","summary","detail","text","close","confirmDialog","confirm","message","CANCEL_Msg","header","icon","accept","clearForm","reset","getFormAction","_","i0","ɵɵdirectiveInject","i1","UntypedFormBuilder","i2","MatDialog","MatDialogRef","i3","EmployeeService","i4","ConfirmationService","_2","selectors","features","ɵɵProvidersFeature","decls","vars","consts","template","AddEditEmployeeComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","AddEditEmployeeComponent_Template_button_click_23_listener","AddEditEmployeeComponent_Template_p_button_click_24_listener","ɵɵadvance","ɵɵtextInterpolate1","ɵɵproperty","ɵɵstyleMap","ɵɵpureFunction0","_c0"],"sources":["/home/admin7/Documents/fms_frontend/src/app/ui/employee/widgets/add-edit-employee/add-edit-employee.component.ts","/home/admin7/Documents/fms_frontend/src/app/ui/employee/widgets/add-edit-employee/add-edit-employee.component.html"],"sourcesContent":["import { Component, OnInit, Inject } from '@angular/core';\nimport { UntypedFormGroup, UntypedFormBuilder } from '@angular/forms';\nimport { forkJoin, of, Subscription } from 'rxjs';\nimport { ConfirmationService, MessageService } from 'primeng/api';\nimport { EmployeeService } from '../../services/employee.service';\nimport { EmployeeOutput } from '../../../user/model/employeOutput.model';\nimport { EmployeeLocation } from '../../model/employee-location.model';\nimport { EmployeeContact } from '../../model/employee-contact.model';\nimport { UtilConstant } from '../../../../../common/UtilConstant';\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\n\ndeclare var $: any;\n@Component({\n  selector: 'app-add-edit-employee',\n  templateUrl: './add-edit-employee.component.html',\n  styleUrls: ['./add-edit-employee.component.scss'],\n  providers:[MessageService]\n})\nexport class AddEditEmployeeComponent implements OnInit {\n\n  frmEmpDetail: UntypedFormGroup;\n  value: any;\n  subscriptions: Subscription[] = [];\n  isNew: boolean = true;\n  confirmationResult: any;\n  isEdit: boolean = true;\n  title: string = 'Add';\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data: any,\n    private formBuilder: UntypedFormBuilder,\n    public dialog: MatDialog,\n    public dialogRef: MatDialogRef<AddEditEmployeeComponent>,\n    private empSrv: EmployeeService,\n    private confirmationService: ConfirmationService,\n    private messageService: MessageService\n  ) {\n    this.frmEmpDetail = this.formBuilder.group({\n      frmEmployeeDetails: [],\n      frmEmployeeContact: [],\n      frmEmployeeLocation: []\n    });\n  }\n\n  ngOnInit(): void {\n    this.isEdit = true;\n    this.isNew = true;\n    if (this.data != null) {\n      this.isEdit = this.data.isEdit != null ? this.data.isEdit : false;\n      this.loadData();\n      this.isNewRecord();\n    }\n  }\n\n  isNewRecord() {\n    if (this.data.newRecord != null) {\n      this.isNew = this.data.newRecord;\n      if(this.isEdit && this.isNew){\n        this.title = 'Add';\n      }else if (this.isEdit && !this.isNew){\n        this.title = 'Edit';\n      }else {\n        this.title = 'View';\n      }\n        \n    }\n  }\n  loadData() {\n    const calls = [];\n    if (this.data.em_id != 0) {\n      calls.push(this.empSrv.getEmById(this.data.em_id));\n    }\n    else {\n      calls.push(of(null));\n    }\n\n    forkJoin(...calls).subscribe(results => {\n      if (results[0] == null) {\n        var data = {\n          emId: 0,\n          initials: null,\n          firstName: null,\n          lastName: null,\n          maidenName: null,\n          aliasName: null,\n          email: null,\n          emStd: null,\n          emStatus: null,\n          idNumber: null,\n          birthDate: null,\n          gender: null,\n          dateJoin: null,\n          dateLeave: null,\n          costCentreId:null,\n          emCode:null,\n          em :{\n            blId: null,\n            flId: null,\n            rmId: null,\n            workType:null,\n            divId:null,\n            depId:null,\n            subDepId:null\n          }\n        }\n        var empLocation : EmployeeLocation={\n          blId: null,\n          flId: null,\n          rmId: null,\n          workType:null,\n          divId:null,\n          depId:null,\n          subDepId:null\n        }\n        var empContact:EmployeeContact={\n          // phoneHome: null,\n          phoneWork: null,\n          phonePersonal: null,\n          faxNum: null,\n          altContactName: null,\n          altContactPhone: null,\n        }\n        setTimeout(() => {\n          this.frmEmpDetail.patchValue({\n            frmEmployeeDetails: data,\n            frmEmployeeContact: empContact,\n            frmEmployeeLocation: data\n          });\n        }, 0);\n      } else {\n        setTimeout(() => {\n          this.frmEmpDetail.patchValue({\n            frmEmployeeDetails: results[0].employeeDetails,\n            frmEmployeeContact: results[0].employeeContact,\n            frmEmployeeLocation: results[0]\n\n          });\n        }, 0);\n      }\n    });\n  }\n  saveRecords() {\n    this.messageService.clear();\n    if (this.frmEmpDetail.valid) {\n      const empData: EmployeeOutput = {\n        \"employeeContact\": this.frmEmpDetail.controls.frmEmployeeContact.value,\n        \"employeeDetails\": this.frmEmpDetail.controls.frmEmployeeDetails.value,\n        \"employeeLocation\": this.frmEmpDetail.controls.frmEmployeeLocation.value\n      }\n      this.empSrv.saveEmployee(empData).subscribe((res: any) => {\n        if (res.code == 200) {\n          // this.toastr.success(\"Record saved Successfully.\");\n          this.messageService.add({ key: 'save', severity: 'success', summary: 'success', detail: res.text });\n          this.dialogRef.close(true);\n        }else{\n          this.messageService.add({ key: 'save', severity: 'error', summary: 'error', detail: res.text });\n        }\n      },\n      );\n    }\n\n  }\n\n  confirmDialog(): void {\n    this.confirmationService.confirm({\n      message: UtilConstant.CANCEL_Msg,\n      header: 'Confirmation',\n      icon: 'pi pi-exclamation-triangle',\n      accept: () => {\n        this.dialogRef.close(false);\n      }\n    });\n  }\n\n  clearForm() {\n    this.frmEmpDetail.controls.frmEmployeeDetails.reset();\n  }\n  getFormAction(){\n    if(this.frmEmpDetail.valid){\n      return false;\n    }\n    else\n    return true;\n  }\n\n}\n","<h2 mat-dialog-title class=\"mat-dialog-title-ext\"> {{title}} Employee Details</h2>\n<mat-dialog-content class=\"mat-typography mat-dialog-content-ext\">\n  <form [formGroup]=\"frmEmpDetail\">\n    <mat-card>\n      <mat-card-header class=\"mat-dialog-title-ext\">\n        <mat-card-title>\n          Basic Information\n        </mat-card-title>\n      </mat-card-header>\n      <mat-card-content id=\"emPanel\">\n        <app-add-employee [isNew]=\"isNew\" [isEdit]=\"isEdit\" formControlName=\"frmEmployeeDetails\"></app-add-employee>\n      </mat-card-content>\n    </mat-card>\n    <mat-card>\n      <mat-card-header class=\"mat-dialog-title-ext\">\n        <mat-card-title>\n         Location\n        </mat-card-title>\n      </mat-card-header>\n      <mat-card-content id=\"emLocationPanel\">\n        <app-employee-location [isNew]=\"isNew\" [isEdit]=\"isEdit\" formControlName=\"frmEmployeeLocation\"></app-employee-location>\n      </mat-card-content>\n    </mat-card>\n\n    <mat-card>\n      <mat-card-header class=\"mat-dialog-title-ext\">\n        <mat-card-title>\n         Contact Information\n        </mat-card-title>\n      </mat-card-header>\n      <mat-card-content>\n        <app-employee-contact [isNew]=\"isNew\" [isEdit]=\"isEdit\" formControlName=\"frmEmployeeContact\"></app-employee-contact>\n      </mat-card-content>\n    </mat-card>\n\n    \n\n  </form>\n\n</mat-dialog-content>\n<mat-dialog-actions align=\"end\" class=\"mat-dialog-actions-ext\">\n  <button pButton label=\"Save\" (click)=\"saveRecords()\"  [disabled]=\"getFormAction()\" icon=\"pi pi-check\"></button>\n  <p-button label=\"Cancel\" icon=\"pi pi-times\" (click)=\"confirmDialog()\" styleClass=\"p-button-secondary\"\n            [style]=\"{'margin-left': '.5em'}\"></p-button>\n</mat-dialog-actions>\n<p-confirmDialog header=\"Confirmation\" icon=\"pi pi-exclamation-triangle\"></p-confirmDialog>\n<p-toast key =\"save\" position=\"top-right\"></p-toast>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}