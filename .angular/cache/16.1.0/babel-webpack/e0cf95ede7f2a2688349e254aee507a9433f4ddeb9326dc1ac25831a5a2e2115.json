{"ast":null,"code":"import { Home } from './model/Home.model';\nimport { SupervisorDashboardComponent } from 'src/app/ui/facilities-helpdesk-dashboards/supervisor-dashboard/modal/supervisor-dashboard.component';\nimport { UtilConstant } from 'src/common/UtilConstant';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/shared.service\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"./services/welcome.service\";\nimport * as i4 from \"ngx-spinner\";\nimport * as i5 from \"src/app/ui/app-params/services/app-params.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"primeng/api\";\nimport * as i8 from \"primeng/tabview\";\nimport * as i9 from \"../../ui/facilities-helpdesk-dashboards/supervisor-dashboard/modal/supervisor-dashboard.component\";\nimport * as i10 from \"ng-zorro-antd/icon\";\nimport * as i11 from \"../../ui/space-dashboard/space-dashboard.component\";\nfunction WelcomeComponent_p_tabView_0_p_tabPanel_1_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 7);\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2, \"Facilities Helpdesk\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction WelcomeComponent_p_tabView_0_p_tabPanel_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"app-supervisor-dashboard\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction WelcomeComponent_p_tabView_0_p_tabPanel_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\");\n    i0.ɵɵtemplate(1, WelcomeComponent_p_tabView_0_p_tabPanel_1_ng_template_1_Template, 3, 0, \"ng-template\", 5);\n    i0.ɵɵtemplate(2, WelcomeComponent_p_tabView_0_p_tabPanel_1_div_2_Template, 2, 0, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isFacilitiesDeskTabActive);\n  }\n}\nfunction WelcomeComponent_p_tabView_0_p_tabPanel_2_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 9);\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2, \"Space\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction WelcomeComponent_p_tabView_0_p_tabPanel_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-space-dashboard\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction WelcomeComponent_p_tabView_0_p_tabPanel_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\");\n    i0.ɵɵtemplate(1, WelcomeComponent_p_tabView_0_p_tabPanel_2_ng_template_1_Template, 3, 0, \"ng-template\", 5);\n    i0.ɵɵtemplate(2, WelcomeComponent_p_tabView_0_p_tabPanel_2_div_2_Template, 2, 0, \"div\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isSpaceTabActive);\n  }\n}\nfunction WelcomeComponent_p_tabView_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-tabView\", 3);\n    i0.ɵɵlistener(\"onChange\", function WelcomeComponent_p_tabView_0_Template_p_tabView_onChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.onTabChange($event));\n    });\n    i0.ɵɵtemplate(1, WelcomeComponent_p_tabView_0_p_tabPanel_1_Template, 3, 1, \"p-tabPanel\", 4);\n    i0.ɵɵtemplate(2, WelcomeComponent_p_tabView_0_p_tabPanel_2_Template, 3, 1, \"p-tabPanel\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.homeDashboard.facilitiesDesk == 1 || ctx_r0.homeDashboard.preventiveMaintenance == 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.homeDashboard.space == 1);\n  }\n}\nexport let WelcomeComponent = /*#__PURE__*/(() => {\n  class WelcomeComponent {\n    constructor(ss, authService, welcomeSrv, spinner, appParamsServ) {\n      this.ss = ss;\n      this.authService = authService;\n      this.welcomeSrv = welcomeSrv;\n      this.spinner = spinner;\n      this.appParamsServ = appParamsServ;\n      this.title = \"Welcome\";\n      this.autoRefreshTime = 60;\n      this.homeDashboard = new Home();\n      this.showEmptyPage = true;\n      this.isFacilitiesDeskTabActive = true;\n      this.isSpaceTabActive = false;\n      this.isHelpdeskTabActive = false;\n      this.isOrderTabActive = false;\n      this.isAccountTabActive = false;\n    }\n    ngOnInit() {\n      setTimeout(() => {\n        this.ss.change(this.authService.isLoggedIn());\n      });\n      this.spinner.show();\n      const filter = {\n        \"userName\": this.authService.getLoggedInUserId(),\n        \"userRole\": this.authService.getLoggedInUserRole()\n      };\n      this.welcomeSrv.getUserDashboard(filter).subscribe(res => {\n        this.homeDashboard = res;\n        const isAnyKeyGreaterThanOne = Object.values(this.homeDashboard).some(value => value > 0);\n        isAnyKeyGreaterThanOne ? this.showEmptyPage = false : this.showEmptyPage = true;\n        this.spinner.hide();\n      }, error => {\n        this.homeDashboard = new Home();\n        this.spinner.hide();\n      });\n      this.getDashBoardAutoRefreshTimeInterval();\n    }\n    getDashBoardAutoRefreshTimeInterval() {\n      const paramId = UtilConstant.DASHBOARD_AUTO_REFRESH_TIME_INTERVAL;\n      this.appParamsServ.getAppParamByCode(paramId).subscribe(res => {\n        this.autoRefreshTime = res.paramValue;\n        // clearInterval(this.intervalId);\n        this.intervalId = setInterval(() => {\n          // Call a function to perform the rendering logic here\n          this.supervisorDashboardComponent.loadWrRecords();\n        }, this.autoRefreshTime * 60 * 1000);\n      });\n    }\n    onTabChange(event) {\n      // Activate the selected tab\n      switch (event.index) {\n        case 0:\n          this.isFacilitiesDeskTabActive = true;\n          break;\n        case 1:\n          this.isSpaceTabActive = true;\n          break;\n        case 2:\n          this.isHelpdeskTabActive = true;\n          break;\n        case 3:\n          this.isOrderTabActive = true;\n          break;\n        case 4:\n          this.isAccountTabActive = true;\n          break;\n        // Add cases for other tabs\n        default:\n          break;\n      }\n    }\n    ngOnDestroy() {\n      // Clear the interval when the component is destroyed\n      if (this.intervalId) {\n        clearInterval(this.intervalId);\n      }\n    }\n    static #_ = this.ɵfac = function WelcomeComponent_Factory(t) {\n      return new (t || WelcomeComponent)(i0.ɵɵdirectiveInject(i1.SharedService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.WelcomeService), i0.ɵɵdirectiveInject(i4.NgxSpinnerService), i0.ɵɵdirectiveInject(i5.AppParamsService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: WelcomeComponent,\n      selectors: [[\"app-welcome\"]],\n      viewQuery: function WelcomeComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(SupervisorDashboardComponent, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.supervisorDashboardComponent = _t.first);\n        }\n      },\n      decls: 4,\n      vars: 2,\n      consts: [[\"styleClass\", \"tabview-custom\", 3, \"onChange\", 4, \"ngIf\"], [\"bdColor\", \"rgba(0, 0, 0, 0.8)\", \"size\", \"medium\", \"color\", \"#879cc9\", \"type\", \"ball-atom\", 1, \"spinner-color\", 3, \"fullScreen\"], [2, \"color\", \"white\"], [\"styleClass\", \"tabview-custom\", 3, \"onChange\"], [4, \"ngIf\"], [\"pTemplate\", \"header\"], [\"style\", \"overflow-x: scroll;\", 4, \"ngIf\"], [\"nz-icon\", \"\", \"nzType\", \"audit\", \"nzTheme\", \"outline\", 2, \"margin-right\", \"0.5rem\"], [2, \"overflow-x\", \"scroll\"], [\"nz-icon\", \"\", \"nzType\", \"apartment\", \"nzTheme\", \"outline\", 2, \"margin-right\", \"0.5rem\"]],\n      template: function WelcomeComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, WelcomeComponent_p_tabView_0_Template, 3, 2, \"p-tabView\", 0);\n          i0.ɵɵelementStart(1, \"ngx-spinner\", 1)(2, \"p\", 2);\n          i0.ɵɵtext(3, \" Loading... \");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", !ctx.showEmptyPage);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"fullScreen\", true);\n        }\n      },\n      dependencies: [i6.NgIf, i7.PrimeTemplate, i8.TabView, i8.TabPanel, i4.NgxSpinnerComponent, i9.SupervisorDashboardComponent, i10.NzIconDirective, i11.SpaceDashboardComponent],\n      styles: [\".p-tabview .p-tabview-panels{padding-left:0;padding-right:0;padding-bottom:0}\"]\n    });\n  }\n  return WelcomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}