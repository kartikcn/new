{"ast":null,"code":"import { MessageService } from 'primeng/api';\nimport { LinkPlanToLocationScreenComponent } from '../widgets/link-plan-to-location-screen/modal/link-plan-to-location-screen.component';\nimport { UnLinkPlanToLocationScreenComponent } from '../widgets/un-link-plan-to-location-screen/modal/un-link-plan-to-location-screen.component';\nimport { LocationPlanListComponent } from '../widgets/location-plan-list/modal/location-plan-list.component';\nimport { PpmPlansListComponent } from '../widgets/ppm-plans-list/ppm-plans-list.component';\nimport { BreakpointService } from 'src/app/services/breakpoint.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"primeng/api\";\nimport * as i3 from \"src/app/services/breakpoint.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"primeng/panel\";\nimport * as i6 from \"../widgets/ppm-plans-list/ppm-plans-list.component\";\nimport * as i7 from \"../widgets/location-plan-list/modal/location-plan-list.component\";\nconst _c0 = function (a0) {\n  return {\n    \"readonly-panel\": a0\n  };\n};\nfunction LinkPlanToLocationComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"div\", 5)(3, \"app-ppm-plans-list\", 6);\n    i0.ɵɵlistener(\"parentFun\", function LinkPlanToLocationComponent_div_1_Template_app_ppm_plans_list_parentFun_3_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.getLocationsPlans($event));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 7);\n    i0.ɵɵelement(6, \"app-location-plan-list\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c0, ctx_r0.showChild ? false : true));\n  }\n}\nfunction LinkPlanToLocationComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9)(2, \"div\", 10)(3, \"app-ppm-plans-list\", 6);\n    i0.ɵɵlistener(\"parentFun\", function LinkPlanToLocationComponent_div_2_Template_app_ppm_plans_list_parentFun_3_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.getLocationsPlans($event));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(4, \"div\", 9)(5, \"div\", 11);\n    i0.ɵɵelement(6, \"app-location-plan-list\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c0, ctx_r1.showChild ? false : true));\n  }\n}\nexport let LinkPlanToLocationComponent = /*#__PURE__*/(() => {\n  class LinkPlanToLocationComponent {\n    constructor(authSrv, messageService, bps, cdr) {\n      this.authSrv = authSrv;\n      this.messageService = messageService;\n      this.bps = bps;\n      this.cdr = cdr;\n      this.showChild = false;\n      this.useTabletProtrait = false;\n    }\n    ngOnInit() {\n      this.bps.register(this);\n      this.loadRecords();\n    }\n    ngAfterViewInit() {\n      this.loadRecords();\n    }\n    loadRecords() {\n      this.ppmPlansListComponent.loadRecords(\"Location\");\n    }\n    notify() {\n      this.useTabletProtrait = BreakpointService.useTabletProtrait;\n      this.cdr.detectChanges();\n      this.ngAfterViewInit();\n    }\n    getUnAssignedResources(event) {\n      this.myEvent = event;\n      let data = {\n        blId: event.data.blId,\n        flId: event.data.flId,\n        rmId: event.data.rmId,\n        eqId: event.data.eqId ? event.data.eqId : null,\n        planType: \"Location\"\n      };\n      this.linkPlanToLocationScreenComponent.selectedRoom = \" \" + event.data.rmName;\n      this.unLinkPlanToLocationScreenComponent.selectedRoom = \" \" + event.data.rmName;\n      this.linkPlanToLocationScreenComponent.loadRecords(data);\n      this.unLinkPlanToLocationScreenComponent.loadRecords(data);\n    }\n    getLocationsPlans(event) {\n      this.showChild = true;\n      this.locationPlanListComponent.header = \"Linked Locations for - \" + event.planName;\n      this.locationPlanListComponent.loadLocationPlans(event.planId);\n    }\n    refreshPanels(event) {\n      if (event) {\n        this.getUnAssignedResources(this.myEvent);\n      }\n    }\n    ngOnDestroy() {\n      this.bps.unregister(this);\n    }\n    static #_ = this.ɵfac = function LinkPlanToLocationComponent_Factory(t) {\n      return new (t || LinkPlanToLocationComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.MessageService), i0.ɵɵdirectiveInject(i3.BreakpointService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LinkPlanToLocationComponent,\n      selectors: [[\"app-link-plan-to-location\"]],\n      viewQuery: function LinkPlanToLocationComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(LinkPlanToLocationScreenComponent, 5);\n          i0.ɵɵviewQuery(UnLinkPlanToLocationScreenComponent, 5);\n          i0.ɵɵviewQuery(LocationPlanListComponent, 5);\n          i0.ɵɵviewQuery(PpmPlansListComponent, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.linkPlanToLocationScreenComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.unLinkPlanToLocationScreenComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.locationPlanListComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.ppmPlansListComponent = _t.first);\n        }\n      },\n      features: [i0.ɵɵProvidersFeature([MessageService])],\n      decls: 3,\n      vars: 2,\n      consts: [[\"header\", \"Plan List\"], [\"class\", \"row\", 4, \"ngIf\"], [\"style\", \"height:85vh;\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-sm-6\", \"col-md-6\", \"col-xm-6\", \"col-lg-6\"], [1, \"page-content\", 2, \"height\", \"calc(100vh - 150px)\"], [\"planTypeData\", \"Location\", 3, \"parentFun\"], [1, \"page-content\", 2, \"height\", \"calc(100vh - 150px)\", 3, \"ngClass\"], [2, \"height\", \"85vh\"], [2, \"height\", \"50%\"], [1, \"page-content\"], [1, \"page-content\", 3, \"ngClass\"]],\n      template: function LinkPlanToLocationComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"p-panel\", 0);\n          i0.ɵɵtemplate(1, LinkPlanToLocationComponent_div_1_Template, 7, 3, \"div\", 1);\n          i0.ɵɵtemplate(2, LinkPlanToLocationComponent_div_2_Template, 7, 3, \"div\", 2);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.useTabletProtrait);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.useTabletProtrait);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgIf, i5.Panel, i6.PpmPlansListComponent, i7.LocationPlanListComponent],\n      styles: [\".readonly-panel[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}\"]\n    });\n  }\n  return LinkPlanToLocationComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}