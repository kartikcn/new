{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { MessageService } from 'primeng/api';\nimport { UtilConstant } from 'src/common/UtilConstant';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/enum.service\";\nimport * as i2 from \"src/app/ui/ppm-plan/services/ppm-plan-services\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/auth.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"primeng/api\";\nimport * as i7 from \"primeng/table\";\nimport * as i8 from \"primeng/button\";\nimport * as i9 from \"primeng/dropdown\";\nimport * as i10 from \"primeng/tabview\";\nimport * as i11 from \"@angular/forms\";\nimport * as i12 from \"@angular/material/tooltip\";\nimport * as i13 from \"../../../../plan-details/plan-details.component\";\nimport * as i14 from \"../../../../ppm-schedule/widgets/ppm-schedule-type-list/ppm-schedule-type-list.component\";\nfunction ForecastPlanDetailsComponent_ng_template_4_ng_template_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-dropdown\", 39);\n    i0.ɵɵlistener(\"onChange\", function ForecastPlanDetailsComponent_ng_template_4_ng_template_19_Template_p_dropdown_onChange_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const filter_r8 = restoredCtx.filterCallback;\n      return i0.ɵɵresetView(filter_r8($event.value));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const value_r7 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngModel\", value_r7)(\"options\", ctx_r6.enumPlanData)(\"showClear\", true);\n  }\n}\nfunction ForecastPlanDetailsComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelement(1, \"th\", 12)(2, \"th\", 12);\n    i0.ɵɵelementStart(3, \"th\", 13)(4, \"div\", 14)(5, \"div\", 15)(6, \"p\", 16);\n    i0.ɵɵtext(7, \"Plan Name\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 17);\n    i0.ɵɵelement(9, \"p-sortIcon\", 18)(10, \"p-columnFilter\", 19);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"th\", 20)(12, \"div\", 14)(13, \"div\", 15)(14, \"p\", 16);\n    i0.ɵɵtext(15, \"Plan Type\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 17);\n    i0.ɵɵelement(17, \"p-sortIcon\", 21);\n    i0.ɵɵelementStart(18, \"p-columnFilter\", 22);\n    i0.ɵɵtemplate(19, ForecastPlanDetailsComponent_ng_template_4_ng_template_19_Template, 1, 3, \"ng-template\", 23);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(20, \"th\", 24)(21, \"div\", 14)(22, \"div\", 15)(23, \"p\", 16);\n    i0.ɵɵtext(24, \"Plan Description\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"div\", 17);\n    i0.ɵɵelement(26, \"p-sortIcon\", 25)(27, \"p-columnFilter\", 26);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(28, \"th\", 27)(29, \"div\", 14)(30, \"div\", 15)(31, \"p\", 16);\n    i0.ɵɵtext(32, \"Building Code \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"div\", 17);\n    i0.ɵɵelement(34, \"p-sortIcon\", 28)(35, \"p-columnFilter\", 29);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(36, \"th\", 30)(37, \"div\", 14)(38, \"div\", 15)(39, \"p\", 16);\n    i0.ɵɵtext(40, \"Floor Code\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(41, \"div\", 17);\n    i0.ɵɵelement(42, \"p-sortIcon\", 31)(43, \"p-columnFilter\", 32);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(44, \"th\", 33)(45, \"div\", 14)(46, \"div\", 15)(47, \"p\", 16);\n    i0.ɵɵtext(48, \"Room Code\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(49, \"div\", 17);\n    i0.ɵɵelement(50, \"p-sortIcon\", 34)(51, \"p-columnFilter\", 35);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(52, \"th\", 36)(53, \"div\", 14)(54, \"div\", 15)(55, \"p\", 16);\n    i0.ɵɵtext(56, \"Asset Code \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(57, \"div\", 17);\n    i0.ɵɵelement(58, \"p-sortIcon\", 37)(59, \"p-columnFilter\", 38);\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction ForecastPlanDetailsComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 40)(1, \"td\", 41)(2, \"button\", 42);\n    i0.ɵɵlistener(\"click\", function ForecastPlanDetailsComponent_ng_template_5_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const plan_r11 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.openEditItem(plan_r11));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"td\", 41)(4, \"button\", 43);\n    i0.ɵɵlistener(\"click\", function ForecastPlanDetailsComponent_ng_template_5_Template_button_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const plan_r11 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.viewSchedules(plan_r11));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"td\", 44);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 44);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const plan_r11 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"pSelectableRow\", plan_r11);\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"matTooltip\", plan_r11.planName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", plan_r11.plan.planName, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.getEnumByById(plan_r11.plan.planType));\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"matTooltip\", plan_r11.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", plan_r11.plan.description, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(plan_r11.blId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(plan_r11.flId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(plan_r11.rmId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(plan_r11.eqId);\n  }\n}\nfunction ForecastPlanDetailsComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \" No records found \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"colspan\", 4);\n  }\n}\nfunction ForecastPlanDetailsComponent_app_plan_details_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-plan-details\", 45);\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"planData\", ctx_r4.selectedPlan)(\"hideBackButton\", ctx_r4.hideBackButton);\n  }\n}\nfunction ForecastPlanDetailsComponent_app_ppm_schedule_type_list_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-ppm-schedule-type-list\", 46);\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"planLocEqId\", ctx_r5.planLocEqId)(\"hideBackButton\", ctx_r5.hideBackButton);\n  }\n}\nconst _c0 = function () {\n  return [5, 10, 25];\n};\nexport let ForecastPlanDetailsComponent = /*#__PURE__*/(() => {\n  class ForecastPlanDetailsComponent {\n    constructor(enumsrv, ppmPlanService, router, authSrv) {\n      this.enumsrv = enumsrv;\n      this.ppmPlanService = ppmPlanService;\n      this.router = router;\n      this.authSrv = authSrv;\n      this.enumList = [];\n      this.enumPlanData = [];\n      //planData: any[] = [];\n      this.isHide = true;\n      this.loading = false;\n      this.rowCount = UtilConstant.ROW_COUNT;\n      this.locTypeId = 0;\n      this.planLocEqId = 0;\n      this.planId = 0;\n      this.activeIndex = 0;\n      this.hideBackButton = true;\n      this.parentFun = new EventEmitter();\n      this.planData = [];\n    }\n    ngOnInit() {\n      this.loadEnums();\n    }\n    loadEnums() {\n      this.enumList = [];\n      this.enumsrv.getEnums().subscribe(res => {\n        this.enumList = res;\n        this.enumPlanData = this.enumList.map(x => Object.assign({}, x)).filter(t => t.tableName.toLocaleUpperCase() === 'plans'.toLocaleUpperCase() && t.fieldName.toLowerCase() === 'plan_type'.toLowerCase());\n        this.enumPlanData.forEach(t => t.enumValue.toLocaleLowerCase() === \"Location\".toLocaleLowerCase() ? this.locTypeId = t.id : '');\n        // this.enumPlanData.unshift(new Enums(null, \"\", \"\", 'Make a selection'));\n      }, error => {});\n    }\n    getEnumByById(id) {\n      return id ? this.enumPlanData.find(t => t.id == id) != null ? this.enumPlanData.find(t => t.id == id)?.enumValue : '' : '';\n    }\n    setPlanData(planData) {\n      this.planData = planData;\n    }\n    onRowSelect(event) {\n      this.parentFun.emit(event.data);\n    }\n    openEditItem(plan) {\n      // const url = this.router.serializeUrl(\n      //   this.router.createUrlTree([\"/plan-details\"], { queryParams: { planId: planId, } })\n      // );\n      // window.open(url, '_blank');\n      this.planId = 0;\n      this.selectedPlan = null;\n      this.selectedPlan = plan.plan;\n      this.planId = plan.planId;\n      this.activeIndex = 1;\n    }\n    viewSchedules(event) {\n      // let gridTitle = `Plan Schedule Details For ( ${event.blId} | ${event.flId} | ${event.rmId} `;\n      // gridTitle =   event.eqId ? `${gridTitle} | ${event.eqId} )` : `${gridTitle} )`;\n      // const url = this.router.serializeUrl(\n      //   this.router.createUrlTree(['/schedule-details'], { queryParams: {\n      //     planLocEqId: event.planLocEqId, gridTitle: gridTitle,planId:event.plan.planId\n      //   } })\n      // );\n      // window.open(url, '_blank');\n      this.planLocEqId = 0;\n      this.planLocEqId = event.planLocEqId;\n      this.activeIndex = 2;\n    }\n    handleChange(event) {\n      console.log(event);\n      if (event.index == 0) {\n        this.planId = 0;\n        this.planLocEqId = 0;\n        this.selectedPlan = null;\n      }\n    }\n    static #_ = this.ɵfac = function ForecastPlanDetailsComponent_Factory(t) {\n      return new (t || ForecastPlanDetailsComponent)(i0.ɵɵdirectiveInject(i1.EnumService), i0.ɵɵdirectiveInject(i2.PpmPlanService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.AuthService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ForecastPlanDetailsComponent,\n      selectors: [[\"app-forecast-plan-details\"]],\n      inputs: {\n        planData: \"planData\"\n      },\n      outputs: {\n        parentFun: \"parentFun\"\n      },\n      features: [i0.ɵɵProvidersFeature([MessageService])],\n      decls: 13,\n      vars: 13,\n      consts: [[3, \"activeIndex\", \"activeIndexChange\", \"onChange\"], [\"header\", \"Plans\"], [\"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", \"styleClass\", \"p-datatable-responsive-demo p-datatable-gridlines\", \"scrollDirection\", \"both\", \"scrollHeight\", \"600\", 3, \"value\", \"paginator\", \"rows\", \"showCurrentPageReport\", \"rowsPerPageOptions\", \"rowHover\", \"scrollable\"], [\"dt1\", \"\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [\"header\", \"Edit Plan\", 3, \"disabled\"], [1, \"container\", 2, \"max-height\", \"450px\", \"overflow-y\", \"scroll\"], [3, \"planData\", \"hideBackButton\", 4, \"ngIf\"], [\"header\", \"Schedules\", 3, \"disabled\"], [3, \"planLocEqId\", \"hideBackButton\", 4, \"ngIf\"], [2, \"width\", \"6rem\"], [\"pSortableColumn\", \"planName\"], [1, \"grid-header-column\"], [1, \"grid-header-label\"], [1, \"grid-label-paragraph\"], [1, \"grid-sort-icon\"], [\"field\", \"planName\"], [\"type\", \"text\", \"field\", \"planName\", \"display\", \"menu\"], [\"pSortableColumn\", \"planType\"], [\"field\", \"planType\"], [\"field\", \"planType\", \"matchMode\", \"equals\", \"display\", \"menu\"], [\"pTemplate\", \"filter\"], [\"pSortableColumn\", \"description\"], [\"field\", \"description\"], [\"type\", \"text\", \"field\", \"description\", \"display\", \"menu\"], [\"pSortableColumn\", \"blId\"], [\"field\", \"blId\"], [\"type\", \"text\", \"field\", \"blId\", \"display\", \"menu\"], [\"pSortableColumn\", \"flId\"], [\"field\", \"flId\"], [\"type\", \"text\", \"field\", \"flId\", \"display\", \"menu\"], [\"pSortableColumn\", \"rmId\"], [\"field\", \"rmId\"], [\"type\", \"text\", \"field\", \"rmId\", \"display\", \"menu\"], [\"pSortableColumn\", \"eqId\"], [\"field\", \"eqId\"], [\"type\", \"text\", \"field\", \"eqId\", \"display\", \"menu\"], [\"optionLabel\", \"enumValue\", \"optionValue\", \"id\", \"placeholder\", \"Select a Status\", 3, \"ngModel\", \"options\", \"showClear\", \"onChange\"], [3, \"pSelectableRow\"], [2, \"width\", \"7rem\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Edit Plan\", 1, \"p-button-primary\", \"p-button-sm\", 2, \"width\", \"70px\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Schedules\", 1, \"p-button-primary\", \"p-button-sm\", 3, \"click\"], [\"matTooltipPosition\", \"below\", 1, \"ellipsis\", 3, \"matTooltip\"], [3, \"planData\", \"hideBackButton\"], [3, \"planLocEqId\", \"hideBackButton\"]],\n      template: function ForecastPlanDetailsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"p-tabView\", 0);\n          i0.ɵɵlistener(\"activeIndexChange\", function ForecastPlanDetailsComponent_Template_p_tabView_activeIndexChange_0_listener($event) {\n            return ctx.activeIndex = $event;\n          })(\"onChange\", function ForecastPlanDetailsComponent_Template_p_tabView_onChange_0_listener($event) {\n            return ctx.handleChange($event);\n          });\n          i0.ɵɵelementStart(1, \"p-tabPanel\", 1)(2, \"p-table\", 2, 3);\n          i0.ɵɵtemplate(4, ForecastPlanDetailsComponent_ng_template_4_Template, 60, 0, \"ng-template\", 4);\n          i0.ɵɵtemplate(5, ForecastPlanDetailsComponent_ng_template_5_Template, 19, 10, \"ng-template\", 5);\n          i0.ɵɵtemplate(6, ForecastPlanDetailsComponent_ng_template_6_Template, 3, 1, \"ng-template\", 6);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"p-tabPanel\", 7)(8, \"div\", 8);\n          i0.ɵɵtemplate(9, ForecastPlanDetailsComponent_app_plan_details_9_Template, 1, 2, \"app-plan-details\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"p-tabPanel\", 10)(11, \"div\", 8);\n          i0.ɵɵtemplate(12, ForecastPlanDetailsComponent_app_ppm_schedule_type_list_12_Template, 1, 2, \"app-ppm-schedule-type-list\", 11);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"activeIndex\", ctx.activeIndex);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"value\", ctx.planData)(\"paginator\", true)(\"rows\", ctx.rowCount)(\"showCurrentPageReport\", true)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(12, _c0))(\"rowHover\", false)(\"scrollable\", true);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"disabled\", ctx.planId == 0);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.planId != 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"disabled\", ctx.planLocEqId == 0);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.planLocEqId != 0);\n        }\n      },\n      dependencies: [i5.NgIf, i6.PrimeTemplate, i7.Table, i7.SortableColumn, i7.SelectableRow, i7.SortIcon, i7.ColumnFilter, i8.ButtonDirective, i9.Dropdown, i10.TabView, i10.TabPanel, i11.NgControlStatus, i11.NgModel, i12.MatTooltip, i13.PlanDetailsComponent, i14.PpmScheduleTypeListComponent],\n      styles: [\".ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}  .cdk-overlay-container{position:fixed;z-index:1500!important}  .ng-dropdown-panel{z-index:1600!important}\"]\n    });\n  }\n  return ForecastPlanDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}