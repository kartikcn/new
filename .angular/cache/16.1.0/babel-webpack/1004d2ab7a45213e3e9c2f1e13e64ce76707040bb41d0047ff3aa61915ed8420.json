{"ast":null,"code":"import { MessageService } from 'primeng/api';\nimport { AddProblemTypeComponent } from '../widgets/add-problem-type/add-problem-type.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/problem-type..service\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"primeng/api\";\nimport * as i4 from \"primeng/button\";\nimport * as i5 from \"primeng/toast\";\nimport * as i6 from \"primeng/panel\";\nimport * as i7 from \"primeng/tree\";\nimport * as i8 from \"../widgets/add-problem-type/add-problem-type.component\";\nfunction ProblemTypeComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ProblemTypeComponent_ng_template_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onAdd());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProblemTypeComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const node_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"href\", node_r5.data, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(node_r5.label);\n  }\n}\nfunction ProblemTypeComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"b\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const node_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(node_r6.label);\n  }\n}\nexport class ProblemTypeComponent {\n  constructor(problemTypeSrv, authSrv, messageService) {\n    this.problemTypeSrv = problemTypeSrv;\n    this.authSrv = authSrv;\n    this.messageService = messageService;\n    this.isNew = true;\n    this.hideForm = true;\n    this.loading = false;\n    this.parentProblemType = '';\n    this.expandedNodes = [];\n    this.treeState = {};\n  }\n  ngOnInit() {\n    this.loadRecords();\n  }\n  loadRecords() {\n    const expandedNodes = this.getExpandedNodes();\n    this.loading = true;\n    this.nodes = [];\n    this.problemTypeSrv.getAll().subscribe(res => {\n      this.nodes = res;\n      this.loading = false;\n      expandedNodes.length > 0 ? this.restoreExpandedNodes(expandedNodes) : '';\n    });\n  }\n  onAdd() {\n    const data = {\n      probTypeId: null,\n      probType: null,\n      description: null,\n      hierarchyId: this.selectedRecord ? this.selectedRecord.hierarchyId + 1 : null,\n      parentId: this.parentRecord ? this.parentRecord.key : null\n    };\n    let parentLabels = [];\n    if (this.selectedNode) {\n      let node = this.selectedNode;\n      while (node.parent) {\n        parentLabels.unshift(node.parent.label);\n        node = node.parent;\n      }\n      const selectedNodeLabels = parentLabels.length > 0 ? parentLabels.join(\" | \") + \" | \" + this.selectedNode.label : this.selectedNode.label;\n      if (selectedNodeLabels.length > 0) {\n        this.addProblemTypePanel.parentProbType = selectedNodeLabels;\n      } else {\n        this.addProblemTypePanel.parentProbType = '';\n      }\n    }\n    this.addProblemTypePanel.setFormData(data, \"Add\", this.parentProblemType);\n    this.hideForm = false;\n  }\n  nodeSelect(event) {\n    this.treeState.selectedNode = event.node;\n    this.hideForm = true;\n    let parentLabels = [];\n    let node = event.node;\n    while (node.parent) {\n      parentLabels.unshift(node.parent.label);\n      node = node.parent;\n    }\n    const selectedNodeLabels = parentLabels.join(\" | \");\n    if (selectedNodeLabels.length > 0) {\n      this.addProblemTypePanel.parentProbType = selectedNodeLabels;\n    } else {\n      this.addProblemTypePanel.parentProbType = '';\n    }\n    this.selectedRecord = event.node.data;\n    this.parentRecord = event.node.parent;\n    this.addProblemTypePanel.selectedRecord = event.node.data;\n    this.addProblemTypePanel.setFormData(event.node.data, \"Edit\", this.parentProblemType);\n    this.hideForm = false;\n    this.selectedNode = event.node;\n  }\n  onNodeExpand(event) {\n    if (!this.treeState.expandedNodes) {\n      this.treeState.expandedNodes = [];\n    }\n    this.treeState.expandedNodes.push(event.node);\n  }\n  refresh(action) {\n    if (action === 'Cancel') {\n      this.hideForm = true;\n      this.selectedFiles = [];\n      this.selectedRecord = null;\n      this.parentRecord = null;\n      this.addProblemTypePanel.selectedRecord = null;\n      this.addProblemTypePanel.parentProbType = '';\n      this.selectedNode = null;\n    } else if (action === \"Save\") {\n      this.hideForm = true;\n      this.messageService.clear();\n      this.messageService.add({\n        key: 'save',\n        severity: 'success',\n        summary: 'Record saved successfully',\n        detail: 'Record saved successfully'\n      });\n      this.selectedFiles = [];\n      this.selectedRecord = null;\n      this.parentRecord = null;\n      this.addProblemTypePanel.selectedRecord = null;\n      this.loadRecords();\n      this.addProblemTypePanel.parentProbType = '';\n      this.selectedNode = null;\n    }\n  }\n  getExpandedNodes() {\n    const expandedNodes = [];\n    if (this.nodes) {\n      this.nodes.forEach(node => {\n        if (node.expanded) {\n          expandedNodes.push(node);\n        }\n      });\n      return expandedNodes;\n    } else {\n      return expandedNodes;\n    }\n  }\n  restoreExpandedNodes(expandedNodes) {\n    const visitNode = node => {\n      if (node.expanded) {\n        node.expanded = false;\n        const foundNode = this.findNodeById(this.nodes, node.key);\n        if (foundNode) {\n          foundNode.expanded = true;\n          if (node.children) {\n            node.children.forEach(childNode => {\n              visitNode(childNode);\n            });\n          }\n        }\n      }\n    };\n    expandedNodes.forEach(node => {\n      visitNode(node);\n    });\n  }\n  findNodeById(nodes, id) {\n    let foundNode;\n    nodes.forEach(node => {\n      if (node.key === id) {\n        foundNode = node;\n      } else if (node.children) {\n        const childNode = this.findNodeById(node.children, id);\n        if (childNode) {\n          foundNode = childNode;\n        }\n      }\n    });\n    return foundNode;\n  }\n  static #_ = this.ɵfac = function ProblemTypeComponent_Factory(t) {\n    return new (t || ProblemTypeComponent)(i0.ɵɵdirectiveInject(i1.ProblemTypeService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.MessageService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProblemTypeComponent,\n    selectors: [[\"app-problem-type\"]],\n    viewQuery: function ProblemTypeComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(AddProblemTypeComponent, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.addProblemTypePanel = _t.first);\n      }\n    },\n    features: [i0.ɵɵProvidersFeature([MessageService])],\n    decls: 10,\n    vars: 6,\n    consts: [[1, \"row\"], [1, \"col-sm-6\", \"col-md-6\", \"col-xm-4\", \"col-lg-6\", 2, \"height\", \"90vh\"], [\"header\", \"Problem Type Details\"], [\"pTemplate\", \"icons\"], [\"selectionMode\", \"single\", \"scrollHeight\", \"72vh\", 3, \"loading\", \"value\", \"selection\", \"filter\", \"selectionChange\", \"onNodeSelect\", \"onNodeExpand\"], [\"pTemplate\", \"url\"], [\"pTemplate\", \"default\"], [1, \"col-sm-6\", \"col-md-6\", \"col-xm-4\", \"col-lg-6\"], [3, \"hidden\", \"isNew\", \"parentFun\"], [\"key\", \"save\", \"position\", \"top-right\"], [\"pButton\", \"\", \"label\", \"Add\", \"icon\", \"pi pi-plus\", 3, \"click\"], [3, \"href\"]],\n    template: function ProblemTypeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"p-panel\", 2);\n        i0.ɵɵtemplate(3, ProblemTypeComponent_ng_template_3_Template, 1, 0, \"ng-template\", 3);\n        i0.ɵɵelementStart(4, \"p-tree\", 4);\n        i0.ɵɵlistener(\"selectionChange\", function ProblemTypeComponent_Template_p_tree_selectionChange_4_listener($event) {\n          return ctx.selectedFiles = $event;\n        })(\"onNodeSelect\", function ProblemTypeComponent_Template_p_tree_onNodeSelect_4_listener($event) {\n          return ctx.nodeSelect($event);\n        })(\"onNodeExpand\", function ProblemTypeComponent_Template_p_tree_onNodeExpand_4_listener($event) {\n          return ctx.onNodeExpand($event);\n        });\n        i0.ɵɵtemplate(5, ProblemTypeComponent_ng_template_5_Template, 2, 2, \"ng-template\", 5);\n        i0.ɵɵtemplate(6, ProblemTypeComponent_ng_template_6_Template, 2, 1, \"ng-template\", 6);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(7, \"div\", 7)(8, \"app-add-problem-type\", 8);\n        i0.ɵɵlistener(\"parentFun\", function ProblemTypeComponent_Template_app_add_problem_type_parentFun_8_listener($event) {\n          return ctx.refresh($event);\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(9, \"p-toast\", 9);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"loading\", ctx.loading)(\"value\", ctx.nodes)(\"selection\", ctx.selectedFiles)(\"filter\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"hidden\", ctx.hideForm)(\"isNew\", ctx.isNew);\n      }\n    },\n    dependencies: [i3.PrimeTemplate, i4.ButtonDirective, i5.Toast, i6.Panel, i7.Tree, i8.AddProblemTypeComponent],\n    styles: [\"[_nghost-%COMP%]     b, strong[_ngcontent-%COMP%] {\\n  font-weight: 400;\\n}\\n\\n[_nghost-%COMP%]     chevrondownicon {\\n  font-size: 1.5rem;\\n  font-weight: bold;\\n  color: #0d89ec;\\n}\\n\\n[_nghost-%COMP%]     chevronrighticon {\\n  font-size: 1.5rem;\\n  font-weight: bold;\\n  color: #0d89ec;\\n}\\n\\n[_nghost-%COMP%]     chevronrighticon svg {\\n  width: 16px;\\n  height: 16px;\\n}\\n\\n[_nghost-%COMP%]     chevrondownicon svg {\\n  width: 16px;\\n  height: 16px;\\n}\\n\\n[_nghost-%COMP%]     chevronrighticon svg path {\\n  d: path(\\\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\\\");\\n}\\n\\n[_nghost-%COMP%]     chevrondownicon svg path {\\n  d: path(\\\"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z\\\");\\n}\\n\\n[_nghost-%COMP%]     ::-webkit-scrollbar {\\n  width: 6px !important;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdWkvSGVscGRlc2svcHJvYmxlbS10eXBlL21vZGFsL3Byb2JsZW0tdHlwZS5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uLy4uLy4uLy4uLy4uL01hbmF2JTIwR3VwdGEvRG93bmxvYWRzL2Ztcy9mbXMvZnJvbnRlbmQvZm1zX2Zyb250ZW5kL3NyYy9hcHAvdWkvSGVscGRlc2svcHJvYmxlbS10eXBlL21vZGFsL3Byb2JsZW0tdHlwZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFjQTtFQUNJLGdCQUFBO0FDYko7O0FEZ0JBO0VBQ0ksaUJBQUE7RUFDQSxpQkFBQTtFQUNBLGNBQUE7QUNiSjs7QURnQkU7RUFDRSxpQkFBQTtFQUNBLGlCQUFBO0VBQ0EsY0FBQTtBQ2JKOztBRGdCRTtFQUNFLFdBQUE7RUFDQSxZQUFBO0FDYko7O0FEZ0JFO0VBQ0UsV0FBQTtFQUNBLFlBQUE7QUNiSjs7QURnQkU7RUFDRSxnSEFBQTtBQ2JKOztBRGdCRTtFQUNFLG9FQUFBO0FDYko7O0FEZUU7RUFDRSxxQkFBQTtBQ1pKIiwic291cmNlc0NvbnRlbnQiOlsiLy8gOmhvc3QgOjpuZy1kZWVwIC5waS1jaGV2cm9uLWRvd246YmVmb3JlIHtcbi8vICAgICBjb250ZW50OiBcIlxcMjIxMlwiICFpbXBvcnRhbnQ7XG4vLyAgICAgZm9udC1zaXplOiAxLjVyZW07XG4vLyAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4vLyAgICAgY29sb3I6ICMwZDg5ZWM7XG4vLyB9XG5cbi8vIDpob3N0IDo6bmctZGVlcCAucGktY2hldnJvbi1yaWdodDpiZWZvcmUge1xuLy8gICAgIGNvbnRlbnQ6IFwiXFwwMDJCXCIgIWltcG9ydGFudDtcbi8vICAgICBmb250LXNpemU6IDEuNXJlbTtcbi8vICAgICBmb250LXdlaWdodDogYm9sZDtcbi8vICAgICBjb2xvcjogIzBkODllYztcbi8vIH1cblxuOmhvc3QgOjpuZy1kZWVwIGIsIHN0cm9uZyB7XG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcbn1cblxuOmhvc3QgOjpuZy1kZWVwICBjaGV2cm9uZG93bmljb24ge1xuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGNvbG9yOiAjMGQ4OWVjO1xuICB9XG4gIFxuICA6aG9zdCA6Om5nLWRlZXAgY2hldnJvbnJpZ2h0aWNvbiB7XG4gICAgZm9udC1zaXplOiAxLjVyZW07XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgY29sb3I6ICMwZDg5ZWM7XG4gIH1cbiAgXG4gIDpob3N0IDo6bmctZGVlcCBjaGV2cm9ucmlnaHRpY29uIHN2Z3tcbiAgICB3aWR0aDogMTZweDsgXG4gICAgaGVpZ2h0OiAxNnB4OyBcbiAgfVxuICBcbiAgOmhvc3QgOjpuZy1kZWVwIGNoZXZyb25kb3duaWNvbiBzdmd7XG4gICAgd2lkdGg6IDE2cHg7IFxuICAgIGhlaWdodDogMTZweDsgXG4gIH1cbiAgXG4gIDpob3N0IDo6bmctZGVlcCBjaGV2cm9ucmlnaHRpY29uIHN2ZyBwYXRoIHtcbiAgICBkOiBwYXRoKCdNOCA0YS41LjUgMCAwIDEgLjUuNXYzaDNhLjUuNSAwIDAgMSAwIDFoLTN2M2EuNS41IDAgMCAxLTEgMHYtM2gtM2EuNS41IDAgMCAxIDAtMWgzdi0zQS41LjUgMCAwIDEgOCA0eicpO1xuICB9XG4gIFxuICA6aG9zdCA6Om5nLWRlZXAgY2hldnJvbmRvd25pY29uIHN2ZyBwYXRoIHtcbiAgICBkOiBwYXRoKCdNNCA4YS41LjUgMCAwIDEgLjUtLjVoN2EuNS41IDAgMCAxIDAgMWgtN0EuNS41IDAgMCAxIDQgOHonKTtcbiAgfVxuICA6aG9zdCA6Om5nLWRlZXAgOjotd2Via2l0LXNjcm9sbGJhcntcbiAgICB3aWR0aDo2cHggIWltcG9ydGFudDtcbiAgfSIsIjpob3N0IDo6bmctZGVlcCBiLCBzdHJvbmcge1xuICBmb250LXdlaWdodDogNDAwO1xufVxuXG46aG9zdCA6Om5nLWRlZXAgY2hldnJvbmRvd25pY29uIHtcbiAgZm9udC1zaXplOiAxLjVyZW07XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogIzBkODllYztcbn1cblxuOmhvc3QgOjpuZy1kZWVwIGNoZXZyb25yaWdodGljb24ge1xuICBmb250LXNpemU6IDEuNXJlbTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGNvbG9yOiAjMGQ4OWVjO1xufVxuXG46aG9zdCA6Om5nLWRlZXAgY2hldnJvbnJpZ2h0aWNvbiBzdmcge1xuICB3aWR0aDogMTZweDtcbiAgaGVpZ2h0OiAxNnB4O1xufVxuXG46aG9zdCA6Om5nLWRlZXAgY2hldnJvbmRvd25pY29uIHN2ZyB7XG4gIHdpZHRoOiAxNnB4O1xuICBoZWlnaHQ6IDE2cHg7XG59XG5cbjpob3N0IDo6bmctZGVlcCBjaGV2cm9ucmlnaHRpY29uIHN2ZyBwYXRoIHtcbiAgZDogcGF0aChcIk04IDRhLjUuNSAwIDAgMSAuNS41djNoM2EuNS41IDAgMCAxIDAgMWgtM3YzYS41LjUgMCAwIDEtMSAwdi0zaC0zYS41LjUgMCAwIDEgMC0xaDN2LTNBLjUuNSAwIDAgMSA4IDR6XCIpO1xufVxuXG46aG9zdCA6Om5nLWRlZXAgY2hldnJvbmRvd25pY29uIHN2ZyBwYXRoIHtcbiAgZDogcGF0aChcIk00IDhhLjUuNSAwIDAgMSAuNS0uNWg3YS41LjUgMCAwIDEgMCAxaC03QS41LjUgMCAwIDEgNCA4elwiKTtcbn1cblxuOmhvc3QgOjpuZy1kZWVwIDo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICB3aWR0aDogNnB4ICFpbXBvcnRhbnQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["MessageService","AddProblemTypeComponent","i0","ɵɵelementStart","ɵɵlistener","ProblemTypeComponent_ng_template_3_Template_button_click_0_listener","ɵɵrestoreView","_r4","ctx_r3","ɵɵnextContext","ɵɵresetView","onAdd","ɵɵelementEnd","ɵɵtext","ɵɵproperty","node_r5","data","ɵɵsanitizeUrl","ɵɵadvance","ɵɵtextInterpolate","label","node_r6","ProblemTypeComponent","constructor","problemTypeSrv","authSrv","messageService","isNew","hideForm","loading","parentProblemType","expandedNodes","treeState","ngOnInit","loadRecords","getExpandedNodes","nodes","getAll","subscribe","res","length","restoreExpandedNodes","probTypeId","probType","description","hierarchyId","selectedRecord","parentId","parentRecord","key","parentLabels","selectedNode","node","parent","unshift","selectedNodeLabels","join","addProblemTypePanel","parentProbType","setFormData","nodeSelect","event","onNodeExpand","push","refresh","action","selectedFiles","clear","add","severity","summary","detail","forEach","expanded","visitNode","foundNode","findNodeById","children","childNode","id","_","ɵɵdirectiveInject","i1","ProblemTypeService","i2","AuthService","i3","_2","selectors","viewQuery","ProblemTypeComponent_Query","rf","ctx","decls","vars","consts","template","ProblemTypeComponent_Template","ɵɵtemplate","ProblemTypeComponent_ng_template_3_Template","ProblemTypeComponent_Template_p_tree_selectionChange_4_listener","$event","ProblemTypeComponent_Template_p_tree_onNodeSelect_4_listener","ProblemTypeComponent_Template_p_tree_onNodeExpand_4_listener","ProblemTypeComponent_ng_template_5_Template","ProblemTypeComponent_ng_template_6_Template","ProblemTypeComponent_Template_app_add_problem_type_parentFun_8_listener","ɵɵelement"],"sources":["C:\\Users\\Manav Gupta\\Downloads\\fms\\fms\\frontend\\fms_frontend\\src\\app\\ui\\Helpdesk\\problem-type\\modal\\problem-type.component.ts","C:\\Users\\Manav Gupta\\Downloads\\fms\\fms\\frontend\\fms_frontend\\src\\app\\ui\\Helpdesk\\problem-type\\modal\\problem-type.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { MessageService, TreeNode } from 'primeng/api';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { ProblemTypeService } from '../services/problem-type..service';\nimport { AddProblemTypeComponent } from '../widgets/add-problem-type/add-problem-type.component';\n\n\n@Component({\n  selector: 'app-problem-type',\n  templateUrl: './problem-type.component.html',\n  styleUrls: ['./problem-type.component.scss'],\n  providers: [MessageService]\n})\nexport class ProblemTypeComponent implements OnInit {\n  nodes!: TreeNode[];\n  selectedFiles!: TreeNode[];\n  isNew: boolean = true;\n  hideForm: boolean = true\n  selectedRecord!: any;\n  parentRecord!: any;\n  loading: boolean = false;\n  parentProblemType: string = '';\n  selectedNode!: any;\n  expandedNodes: any[] = [];\n  treeState: any = {};\n\n  @ViewChild(AddProblemTypeComponent) addProblemTypePanel!: AddProblemTypeComponent;\n  constructor(\n    private problemTypeSrv: ProblemTypeService,\n    private authSrv: AuthService,\n    private messageService: MessageService,\n\n  ) { }\n\n  ngOnInit(): void {\n    this.loadRecords();\n  }\n\n  loadRecords() {\n    const expandedNodes = this.getExpandedNodes();\n    this.loading = true;\n    this.nodes = [];\n    this.problemTypeSrv.getAll().subscribe((res: any) => {\n      this.nodes = res;\n      this.loading = false;\n      expandedNodes.length > 0 ? this.restoreExpandedNodes(expandedNodes) : '';\n    })\n\n  }\n\n  onAdd() {\n    const data = {\n      probTypeId: null,\n      probType: null,\n      description: null,\n      hierarchyId: this.selectedRecord ? this.selectedRecord.hierarchyId + 1 : null,\n      parentId: this.parentRecord ? this.parentRecord.key : null,\n    }\n    let parentLabels = [];\n    if (this.selectedNode) {\n      let node = this.selectedNode;\n      while (node.parent) {\n        parentLabels.unshift(node.parent.label);\n        node = node.parent;\n      }\n      const selectedNodeLabels = parentLabels.length > 0 ? parentLabels.join(\" | \") + \" | \" + this.selectedNode.label : this.selectedNode.label;\n      if (selectedNodeLabels.length > 0) {\n        this.addProblemTypePanel.parentProbType = selectedNodeLabels;\n      } else {\n        this.addProblemTypePanel.parentProbType = '';\n      }\n    }\n\n    this.addProblemTypePanel.setFormData(data, \"Add\", this.parentProblemType);\n    this.hideForm = false;\n  }\n\n  nodeSelect(event: any) {\n    this.treeState.selectedNode = event.node;\n    this.hideForm = true;\n    let parentLabels = [];\n    let node = event.node;\n    while (node.parent) {\n      parentLabels.unshift(node.parent.label);\n      node = node.parent;\n    }\n    const selectedNodeLabels = parentLabels.join(\" | \");\n    if (selectedNodeLabels.length > 0) {\n      this.addProblemTypePanel.parentProbType = selectedNodeLabels;\n    } else {\n      this.addProblemTypePanel.parentProbType = '';\n    }\n    this.selectedRecord = event.node.data;\n    this.parentRecord = event.node.parent;\n    this.addProblemTypePanel.selectedRecord = event.node.data;\n    this.addProblemTypePanel.setFormData(event.node.data, \"Edit\", this.parentProblemType);\n    this.hideForm = false;\n    this.selectedNode = event.node;\n  }\n\n  onNodeExpand(event: any) {\n    if (!this.treeState.expandedNodes) {\n      this.treeState.expandedNodes = [];\n    }\n    this.treeState.expandedNodes.push(event.node);\n  }\n\n  refresh(action: any) {\n    if (action === 'Cancel') {\n      this.hideForm = true;\n      this.selectedFiles = [];\n      this.selectedRecord = null;\n      this.parentRecord = null;\n      this.addProblemTypePanel.selectedRecord = null;\n      this.addProblemTypePanel.parentProbType = '';\n      this.selectedNode = null;\n    } else if (action === \"Save\") {\n      this.hideForm = true;\n      this.messageService.clear();\n      this.messageService.add({ key: 'save', severity: 'success', summary: 'Record saved successfully', detail: 'Record saved successfully' });\n      this.selectedFiles = [];\n      this.selectedRecord = null;\n      this.parentRecord = null;\n      this.addProblemTypePanel.selectedRecord = null;\n      this.loadRecords();\n      this.addProblemTypePanel.parentProbType = '';\n      this.selectedNode = null;\n    }\n\n  }\n\n  getExpandedNodes(): TreeNode[] {\n    const expandedNodes: TreeNode[] = [];\n    if (this.nodes) {\n      this.nodes.forEach((node: TreeNode) => {\n        if (node.expanded) {\n          expandedNodes.push(node);\n        }\n      });\n      return expandedNodes;\n    } else {\n      return expandedNodes;\n    }\n\n  }\n\n  restoreExpandedNodes(expandedNodes: TreeNode[]): void {\n    const visitNode = (node: TreeNode) => {\n      if (node.expanded) {\n        node.expanded = false;\n        const foundNode = this.findNodeById(this.nodes, node.key);\n        if (foundNode) {\n          foundNode.expanded = true;\n          if (node.children) {\n            node.children.forEach((childNode: TreeNode) => {\n              visitNode(childNode);\n            });\n          }\n        }\n      }\n    };\n    expandedNodes.forEach((node: TreeNode) => {\n      visitNode(node);\n    });\n  }\n\n  findNodeById(nodes: TreeNode[], id: any): TreeNode {\n    let foundNode: TreeNode | undefined;\n    nodes.forEach((node: TreeNode) => {\n      if (node.key === id) {\n        foundNode = node;\n      } else if (node.children) {\n        const childNode = this.findNodeById(node.children, id);\n        if (childNode) {\n          foundNode = childNode;\n        }\n      }\n    });\n    return foundNode as TreeNode;\n  }\n\n}\n","<div class=\"row\">\n    <div class=\"col-sm-6 col-md-6 col-xm-4 col-lg-6\" style=\"height:90vh;\">\n        <p-panel header=\"Problem Type Details\">\n            <ng-template pTemplate=\"icons\">\n                <button pButton (click)=\"onAdd()\" label=\"Add\" icon=\"pi pi-plus\"></button>\n            </ng-template>\n            <p-tree [loading]=\"loading\" [value]=\"nodes\" selectionMode=\"single\" [(selection)]=\"selectedFiles\" [filter]=\"true\"\n                (onNodeSelect)=\"nodeSelect($event)\" (onNodeExpand)=\"onNodeExpand($event)\" scrollHeight=\"72vh\">\n                <ng-template let-node pTemplate=\"url\">\n                    <a [href]=\"node.data\">{{node.label}}</a>\n                </ng-template>\n                <ng-template let-node pTemplate=\"default\">\n                    <b>{{node.label}}</b>\n                </ng-template>\n            </p-tree>\n        </p-panel>\n    </div>\n    <div class=\"col-sm-6 col-md-6 col-xm-4 col-lg-6\">\n        <app-add-problem-type [hidden]=\"hideForm\" [isNew]=\"isNew\" (parentFun)=\"refresh($event)\"></app-add-problem-type>\n    </div>\n</div>\n<p-toast key=\"save\" position=\"top-right\"></p-toast>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}