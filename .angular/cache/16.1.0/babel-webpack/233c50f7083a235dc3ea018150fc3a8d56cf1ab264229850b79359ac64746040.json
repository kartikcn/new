{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { SvgRoomDataInput } from 'src/app/model/svgroomdatainput.model';\nimport { BreakpointService } from 'src/app/services/breakpoint.service';\nimport { UtilConstant } from 'src/common/UtilConstant';\nimport { SvgViewComponent } from '../svg-view/svg-view.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../employee/services/employee.service\";\nimport * as i3 from \"../background-loc/services/bl.service\";\nimport * as i4 from \"src/app/services/breakpoint.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@ng-select/ng-select\";\nimport * as i7 from \"primeng/button\";\nimport * as i8 from \"ngx-spinner\";\nimport * as i9 from \"../svg-view/svg-view.component\";\nfunction LocateEmployeeComponent_table_2_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.roomDetailsData, \" \");\n  }\n}\nfunction LocateEmployeeComponent_table_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"table\", 6)(1, \"tr\")(2, \"td\", 7)(3, \"div\", 8)(4, \"label\", 9);\n    i0.ɵɵtext(5, \"Employee \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ng-select\", 10);\n    i0.ɵɵlistener(\"open\", function LocateEmployeeComponent_table_2_Template_ng_select_open_6_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.openEm());\n    })(\"scrollToEnd\", function LocateEmployeeComponent_table_2_Template_ng_select_scrollToEnd_6_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.scrollToEndEm());\n    })(\"search\", function LocateEmployeeComponent_table_2_Template_ng_select_search_6_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.searchEm($event));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"td\", 11);\n    i0.ɵɵtemplate(8, LocateEmployeeComponent_table_2_div_8_Template, 2, 1, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"td\", 7);\n    i0.ɵɵelementStart(10, \"td\", 7)(11, \"div\", 13)(12, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function LocateEmployeeComponent_table_2_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.onSearch());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function LocateEmployeeComponent_table_2_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onClear());\n    });\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"clearable\", false)(\"items\", ctx_r0.enumEm)(\"searchable\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.showRoomData);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.filterPanel.valid);\n  }\n}\nfunction LocateEmployeeComponent_table_3_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r12.roomDetailsData, \" \");\n  }\n}\nfunction LocateEmployeeComponent_table_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"table\", 6)(1, \"tr\")(2, \"td\", 17)(3, \"div\", 8)(4, \"label\", 9);\n    i0.ɵɵtext(5, \"Employee \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ng-select\", 10);\n    i0.ɵɵlistener(\"open\", function LocateEmployeeComponent_table_3_Template_ng_select_open_6_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.openEm());\n    })(\"scrollToEnd\", function LocateEmployeeComponent_table_3_Template_ng_select_scrollToEnd_6_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.scrollToEndEm());\n    })(\"search\", function LocateEmployeeComponent_table_3_Template_ng_select_search_6_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.searchEm($event));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"td\", 11);\n    i0.ɵɵtemplate(8, LocateEmployeeComponent_table_3_div_8_Template, 2, 1, \"div\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 17)(10, \"div\", 13)(11, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function LocateEmployeeComponent_table_3_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.onSearch());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function LocateEmployeeComponent_table_3_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.onClear());\n    });\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"clearable\", false)(\"items\", ctx_r1.enumEm)(\"searchable\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.showRoomData);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.filterPanel.valid);\n  }\n}\nfunction LocateEmployeeComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"h1\");\n    i0.ɵɵtext(2, \"No Floorplan available\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LocateEmployeeComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"div\", 23);\n    i0.ɵɵelement(2, \"app-svg-view\", 24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"svgInputData\", ctx_r3.svgInputData);\n  }\n}\nfunction LocateEmployeeComponent_ngx_spinner_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ngx-spinner\", 25)(1, \"p\", 26);\n    i0.ɵɵtext(2, \" Loading... \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"fullScreen\", true);\n  }\n}\nexport let LocateEmployeeComponent = /*#__PURE__*/(() => {\n  class LocateEmployeeComponent {\n    constructor(formBuilder, emSrv, blServ, bps) {\n      this.formBuilder = formBuilder;\n      this.emSrv = emSrv;\n      this.blServ = blServ;\n      this.bps = bps;\n      this.enumEm = [];\n      this.allEmployees = [];\n      this.viewSvg = false;\n      this.noSVGFound = false;\n      this.showSpinner = true;\n      this.showRoomData = false;\n      this.roomDetailsData = '';\n      this.useTabletProtrait = false;\n      this.limitEm = 0;\n      this.offsetEm = 0;\n      this.filterCriteria = {\n        fieldName: null,\n        value: null,\n        matchMode: \"contains\",\n        limit: 0,\n        offset: 0\n      };\n      this.scrollLimit = UtilConstant.SCROLL_LIMIT;\n      this.svgInputData = new SvgRoomDataInput(null, null, null, false, false, false, false, false, \"\", null, \"\", \"\", null, null);\n      this.filterPanel = this.formBuilder.group({\n        emId: [null, [Validators.required]]\n      });\n    }\n    ngOnInit() {\n      this.bps.register(this);\n    }\n    notify() {\n      this.useTabletProtrait = BreakpointService.useTabletProtrait;\n    }\n    onSearch() {\n      this.noSVGFound = false;\n      this.viewSvg = false;\n      let emId = this.filterPanel.controls.emId.value;\n      if (emId != null) {\n        this.emSrv.getEmById(emId).subscribe(res => {\n          let emdata = res.employeeDetails;\n          if (emdata != null && emdata.blId != null && emdata.flId != null && emdata.rmId != null) {\n            this.roomDetailsData = `Located at Building: ${emdata.blBlCode}, Floor: ${emdata.flFlCode}, Room: ${emdata.rmRmCode}`;\n            this.showRoomData = true;\n            this.svgInputData = new SvgRoomDataInput(emdata.blId, emdata.flId, emdata.rmId, false, true, false, false, true, emdata.firstName + \" \" + emdata.lastName, null, \"\", \"\", null, null);\n            this.viewSvg = true;\n          } else {\n            this.noSVGFound = true;\n            this.viewSvg = false;\n            this.showRoomData = false;\n            this.roomDetailsData = '';\n          }\n        });\n      } else {\n        this.noSVGFound = true;\n        this.viewSvg = false;\n        this.showRoomData = false;\n        this.roomDetailsData = '';\n      }\n    }\n    onClear() {\n      this.viewSvg = false;\n      this.filterPanel.patchValue({\n        emId: null\n      });\n      this.svgInputData = new SvgRoomDataInput(null, null, null, false, false, false, false, false, \"\", null, \"\", \"\", null, null);\n      this.noSVGFound = false;\n      this.showRoomData = false;\n      this.roomDetailsData = '';\n    }\n    ngOnDestroy() {\n      this.bps.unregister(this);\n    }\n    scrollToEndEm() {\n      this.offsetEm = this.limitEm;\n      this.limitEm += this.scrollLimit;\n      this.filterCriteria.limit = this.limitEm;\n      this.filterCriteria.offset = this.offsetEm;\n      this.emSrv.getALLmployeeByScroll(this.filterCriteria).subscribe(res => {\n        this.enumEm = res;\n        this.enumEm.unshift({\n          emId: null,\n          firstName: 'Make a selection',\n          emCode: null\n        });\n      });\n    }\n    searchEm(event) {\n      this.filterCriteria = {};\n      this.filterCriteria = {\n        fieldName: \"firstName\",\n        value: event.term,\n        matchMode: \"contains\"\n      };\n      this.scrollToEndEm();\n    }\n    updateEmList(emData) {\n      this.enumEm = this.enumEm.filter(e => e.emId != emData.emId);\n      this.enumEm = this.enumEm.filter(e => e.emId != null);\n      this.enumEm.unshift(emData);\n      this.enumEm.unshift({\n        emId: null,\n        firstName: 'Make a selection',\n        emCode: null\n      });\n    }\n    openEm() {\n      this.limitEm = 0;\n      this.offsetEm = 0;\n      this.filterCriteria = {\n        fieldName: null,\n        value: null,\n        matchMode: \"contains\",\n        limit: 0,\n        offset: 0\n      };\n      this.scrollToEndEm();\n    }\n    static #_ = this.ɵfac = function LocateEmployeeComponent_Factory(t) {\n      return new (t || LocateEmployeeComponent)(i0.ɵɵdirectiveInject(i1.UntypedFormBuilder), i0.ɵɵdirectiveInject(i2.EmployeeService), i0.ɵɵdirectiveInject(i3.BuildingService), i0.ɵɵdirectiveInject(i4.BreakpointService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LocateEmployeeComponent,\n      selectors: [[\"app-locate-employee\"]],\n      viewQuery: function LocateEmployeeComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(SvgViewComponent, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.svgViewComp = _t.first);\n        }\n      },\n      decls: 7,\n      vars: 6,\n      consts: [[1, \"card\"], [3, \"formGroup\"], [\"width\", \"100%\", 4, \"ngIf\"], [\"class\", \"card no-file-found\", 4, \"ngIf\"], [\"class\", \"card\", \"style\", \"height: 600px;\", 4, \"ngIf\"], [\"bdColor\", \"rgba(0, 0, 0, 0.8)\", \"size\", \"medium\", \"color\", \"#879cc9\", \"class\", \"spinner-color\", \"type\", \"ball-spin-clockwise\", 3, \"fullScreen\", 4, \"ngIf\"], [\"width\", \"100%\"], [2, \"width\", \"20%\"], [1, \"input-label-custom\"], [1, \"form-field-lable\", \"control-label\"], [\"appendTo\", \"body\", \"formControlName\", \"emId\", \"bindLabel\", \"firstName\", \"bindValue\", \"emId\", \"placeholder\", \"Make a selection\", 1, \"ng-select-dropdown\", 3, \"clearable\", \"items\", \"searchable\", \"open\", \"scrollToEnd\", \"search\"], [2, \"width\", \"40%\", \"position\", \"relative\"], [\"style\", \"position: absolute; bottom: 9px; font-size: 12px;\", 4, \"ngIf\"], [2, \"margin\", \"5px 0 0 5px\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Search\", 1, \"p-button-primary\", \"p-button-sm\", \"pull\", \"right\", 2, \"width\", \"60px\", \"margin-left\", \"5px\", 3, \"disabled\", \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Clear\", 1, \"p-button-primary\", \"p-button-sm\", \"pull\", \"right\", 2, \"width\", \"60px\", \"margin-left\", \"5px\", 3, \"click\"], [2, \"position\", \"absolute\", \"bottom\", \"9px\", \"font-size\", \"12px\"], [2, \"width\", \"25%\"], [\"style\", \"position: absolute; bottom: 9px; font-size: 11px;\", 4, \"ngIf\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Search\", 1, \"p-button-primary\", \"p-button-sm\", \"pull\", \"right\", 2, \"width\", \"60px\", 3, \"disabled\", \"click\"], [2, \"position\", \"absolute\", \"bottom\", \"9px\", \"font-size\", \"11px\"], [1, \"card\", \"no-file-found\"], [1, \"card\", 2, \"height\", \"600px\"], [2, \"height\", \"590px\"], [3, \"svgInputData\"], [\"bdColor\", \"rgba(0, 0, 0, 0.8)\", \"size\", \"medium\", \"color\", \"#879cc9\", \"type\", \"ball-spin-clockwise\", 1, \"spinner-color\", 3, \"fullScreen\"], [2, \"color\", \"white\"]],\n      template: function LocateEmployeeComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1);\n          i0.ɵɵtemplate(2, LocateEmployeeComponent_table_2_Template, 14, 5, \"table\", 2);\n          i0.ɵɵtemplate(3, LocateEmployeeComponent_table_3_Template, 13, 5, \"table\", 2);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(4, LocateEmployeeComponent_div_4_Template, 3, 0, \"div\", 3);\n          i0.ɵɵtemplate(5, LocateEmployeeComponent_div_5_Template, 3, 1, \"div\", 4);\n          i0.ɵɵtemplate(6, LocateEmployeeComponent_ngx_spinner_6_Template, 3, 1, \"ngx-spinner\", 5);\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"formGroup\", ctx.filterPanel);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.useTabletProtrait);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.useTabletProtrait);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.noSVGFound);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.viewSvg);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.showSpinner);\n        }\n      },\n      dependencies: [i5.NgIf, i6.NgSelectComponent, i7.ButtonDirective, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i8.NgxSpinnerComponent, i9.SvgViewComponent],\n      styles: [\"[_nghost-%COMP%]     .p-dialog .p-dialog-header{background-color:#879cc9;color:#000;padding-left:10px;font-weight:400;margin-bottom:0;height:10px!important}.no-file-found[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:600px}\"]\n    });\n  }\n  return LocateEmployeeComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}