{"ast":null,"code":"import { UtilConstant } from 'src/common/UtilConstant';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"primeng/api\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../service/work-request-comments.services\";\nimport * as i5 from \"src/app/services/auth.service\";\nimport * as i6 from \"@angular/material/legacy-card\";\nimport * as i7 from \"primeng/button\";\nimport * as i8 from \"primeng/confirmdialog\";\nimport * as i9 from \"ng-zorro-antd/input\";\nconst _c0 = function () {\n  return {\n    \"margin-left\": \".5em\"\n  };\n};\nexport class AddWrCommentsComponent {\n  constructor(data, dialogRef, confirmationService, formBuilder, wrCommentsService, authSrv) {\n    this.data = data;\n    this.dialogRef = dialogRef;\n    this.confirmationService = confirmationService;\n    this.formBuilder = formBuilder;\n    this.wrCommentsService = wrCommentsService;\n    this.authSrv = authSrv;\n    this.subscriptions = [];\n    this.title = 'Add';\n    this.isView = false;\n    this.onChange = () => {};\n    this.onTouched = () => {};\n    this.wrCommentsFormPanel = this.formBuilder.group({\n      comments: [null],\n      wrId: [null]\n    });\n    this.subscriptions.push(this.wrCommentsFormPanel.valueChanges.subscribe(value => {\n      this.onChange(value);\n      this.onTouched();\n    }));\n  }\n  ngOnInit() {\n    this.title = this.data.isEdit ? \"Edit\" : this.data.isView ? \"\" : \"Add\";\n    this.isView = this.data.isView;\n    if (this.data.commentId != null) {\n      this.wrCommentsService.getWrCommentsById(this.data.commentId).subscribe(res => {\n        this.commentData = res;\n        setTimeout(() => {\n          this.wrCommentsFormPanel.patchValue({\n            comments: res.comments,\n            wrId: res.wrId\n          });\n        });\n      });\n    } else {\n      setTimeout(() => {\n        this.wrCommentsFormPanel.patchValue({\n          comments: null,\n          wrId: this.data.wrId\n        });\n      });\n    }\n    if (this.isView) {\n      this.wrCommentsFormPanel.disable();\n    }\n  }\n  isValid() {\n    return this.getValidationErrors().length === 0;\n  }\n  getValidationErrors() {\n    const validationErros = [];\n    return validationErros;\n  }\n  get value() {\n    const wrCommentsData = {\n      comments: this.wrCommentsFormPanel.controls.comments.value,\n      wrId: this.wrCommentsFormPanel.controls.wrId.value\n    };\n    return wrCommentsData;\n  }\n  set value(value) {\n    setTimeout(() => {\n      this.wrCommentsFormPanel.patchValue({\n        comments: value.comments,\n        wrId: value.wrId\n      });\n    });\n    this.onChange(value);\n    this.onTouched();\n  }\n  writeValue(value) {\n    if (value) {\n      this.value = value;\n    }\n    if (value === null) {\n      this.wrCommentsFormPanel.reset();\n    }\n  }\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n  validate(_) {\n    return this.wrCommentsFormPanel.valid ? null : {\n      wrCommentsFormPanel: {\n        valid: false\n      }\n    };\n  }\n  onCancel() {\n    this.confirmationService.confirm({\n      message: UtilConstant.CANCEL_Msg,\n      header: 'Confirmation',\n      icon: 'pi pi-exclamation-triangle',\n      accept: () => {\n        this.dialogRef.close(false);\n      },\n      key: \"wr-comments-cancel\"\n    });\n  }\n  onSave() {\n    if (this.wrCommentsFormPanel.value.comments != '' && this.wrCommentsFormPanel.value.comments != null) {\n      let wrCommentsData;\n      if (this.data.isEdit) {\n        wrCommentsData = {\n          commentId: this.commentData.commentId,\n          emId: this.commentData.emId,\n          commentDate: this.commentData.commentDate,\n          commentTime: this.commentData.commentTime,\n          comments: this.wrCommentsFormPanel.controls.comments.value,\n          compId: this.authSrv.getLoggedInUserCompId(),\n          wrId: this.wrCommentsFormPanel.controls.wrId.value\n        };\n      } else {\n        wrCommentsData = {\n          commentId: 0,\n          emId: this.authSrv.getLoggedInUserEMId(),\n          commentDate: null,\n          commentTime: null,\n          comments: this.wrCommentsFormPanel.controls.comments.value,\n          compId: this.authSrv.getLoggedInUserCompId(),\n          wrId: this.wrCommentsFormPanel.controls.wrId.value\n        };\n      }\n      this.wrCommentsService.saveWrComments(wrCommentsData).subscribe(res => {\n        if (res.commentId) {\n          this.dialogRef.close(res);\n        }\n      });\n    }\n  }\n  static #_ = this.ɵfac = function AddWrCommentsComponent_Factory(t) {\n    return new (t || AddWrCommentsComponent)(i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.ConfirmationService), i0.ɵɵdirectiveInject(i3.UntypedFormBuilder), i0.ɵɵdirectiveInject(i4.WrCommentsServices), i0.ɵɵdirectiveInject(i5.AuthService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddWrCommentsComponent,\n    selectors: [[\"app-add-wr-comments\"]],\n    decls: 14,\n    vars: 7,\n    consts: [[\"mat-dialog-title\", \"\", 1, \"mat-dialog-title-ext\"], [3, \"formGroup\"], [\"id\", \"wr-comments\"], [1, \"input-label-custom\"], [1, \"form-field-lable\", \"control-label\"], [3, \"nzMaxCharacterCount\"], [\"name\", \"commetns\", \"formControlName\", \"comments\", \"rows\", \"4\", \"maxlength\", \"4000\", \"nz-input\", \"\", 1, \"form-control\", \"note-border\"], [\"align\", \"end\", 1, \"mat-dialog-actions-ext\"], [\"label\", \"Save\", \"icon\", \"pi pi-check\", 3, \"disabled\", \"click\"], [\"label\", \"Cancel\", \"icon\", \"pi pi-times\", \"styleClass\", \"p-button-secondary\", 3, \"click\"], [\"key\", \"wr-comments-cancel\", \"header\", \"Confirmation\", \"icon\", \"pi pi-exclamation-triangle\"]],\n    template: function AddWrCommentsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\", 0);\n        i0.ɵɵtext(1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"mat-dialog-content\")(3, \"form\", 1)(4, \"mat-card-content\", 2)(5, \"div\", 3)(6, \"label\", 4);\n        i0.ɵɵtext(7, \"Comments\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"nz-textarea-count\", 5);\n        i0.ɵɵelement(9, \"textarea\", 6);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(10, \"mat-dialog-actions\", 7)(11, \"p-button\", 8);\n        i0.ɵɵlistener(\"click\", function AddWrCommentsComponent_Template_p_button_click_11_listener() {\n          return ctx.onSave();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"p-button\", 9);\n        i0.ɵɵlistener(\"click\", function AddWrCommentsComponent_Template_p_button_click_12_listener() {\n          return ctx.onCancel();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(13, \"p-confirmDialog\", 10);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"\", ctx.title, \" Comments\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.wrCommentsFormPanel);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"nzMaxCharacterCount\", 4000);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", !ctx.wrCommentsFormPanel.value.comments || ctx.isView);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(6, _c0));\n      }\n    },\n    dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.MaxLengthValidator, i3.FormGroupDirective, i3.FormControlName, i6.MatLegacyCardContent, i1.MatDialogTitle, i1.MatDialogContent, i1.MatDialogActions, i7.Button, i8.ConfirmDialog, i9.NzTextareaCountComponent, i9.NzInputDirective],\n    styles: [\".mat-dialog-title-ext[_ngcontent-%COMP%] {\\n  background-color: #879cc9;\\n  padding-left: 10px;\\n  font-weight: normal;\\n  margin-bottom: 0px;\\n}\\n\\n.mat-dialog-content-ext[_ngcontent-%COMP%] {\\n  margin: 0;\\n  padding: 10px;\\n}\\n\\n.mat-dialog-actions-ext[_ngcontent-%COMP%] {\\n  border-top: none;\\n  padding: 3px;\\n  min-height: 36px !important;\\n  margin-bottom: 5px;\\n  margin-right: 15px;\\n}\\n\\n.action-buttons[_ngcontent-%COMP%] {\\n  height: 30px;\\n  width: 70px;\\n}\\n\\n.margin-left-20[_ngcontent-%COMP%] {\\n  margin-left: 20px;\\n}\\n\\n.margin-5[_ngcontent-%COMP%] {\\n  margin: 5px !important;\\n}\\n\\n.mat-card[_ngcontent-%COMP%] {\\n  border-radius: 0px;\\n}\\n\\n.mat-expansion-panel[_ngcontent-%COMP%] {\\n  background-color: #879cc9;\\n}\\n\\n.mat-expansion-panel-header-title[_ngcontent-%COMP%] {\\n  color: white;\\n  letter-spacing: 1px;\\n}\\n\\n.mat-card-title[_ngcontent-%COMP%] {\\n  color: white;\\n  letter-spacing: 1px;\\n  font-size: 13px;\\n  margin: 0px !important;\\n}\\n\\n.mat-card-header-text[_ngcontent-%COMP%] {\\n  margin: 0px !important;\\n}\\n\\n.mat-card-header[_ngcontent-%COMP%] {\\n  padding: 5px !important;\\n  margin-left: -15px;\\n}\\n\\n.mat-card-content[_ngcontent-%COMP%] {\\n  background-color: white !important;\\n}\\n\\n.mat-expansion-panel-content[_ngcontent-%COMP%] {\\n  background-color: white !important;\\n}\\n\\n.mat-button[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%] {\\n  line-height: inherit !important;\\n}\\n\\n.btn-filter[_ngcontent-%COMP%] {\\n  margin-left: 4px;\\n  margin-right: 5px;\\n  width: 50px;\\n  margin-top: 17px;\\n}\\n\\n.btn-ggb-orange[_ngcontent-%COMP%] {\\n  width: 90px !important;\\n}\\n\\n.btn-ggb-default-custom[_ngcontent-%COMP%] {\\n  margin: 16px !important;\\n}\\n\\n  .mat-dialog-content {\\n  margin: 0px !important;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdWkvSGVscGRlc2svd29yay1yZXF1ZXN0L3dpZGdldHMvYWRkLXdyLWNvbW1lbnRzL2FkZC13ci1jb21tZW50cy5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy9zY3NzL192YXJpYWJsZXMuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uLy4uLy4uLy4uLy4uL01hbmF2JTIwR3VwdGEvRG93bmxvYWRzL2Ztcy9mbXMvZnJvbnRlbmQvZm1zX2Zyb250ZW5kL3NyYy9hcHAvdWkvSGVscGRlc2svd29yay1yZXF1ZXN0L3dpZGdldHMvYWRkLXdyLWNvbW1lbnRzL2FkZC13ci1jb21tZW50cy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNJLHlCQ09LO0VETkwsa0JBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0FFREo7O0FGSUE7RUFDSSxTQUFBO0VBQ0EsYUFBQTtBRURKOztBRklBO0VBQ0ksZ0JBQUE7RUFDQSxZQUFBO0VBQ0EsMkJBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0FFREo7O0FGSUE7RUFDSSxZQUFBO0VBQ0EsV0FBQTtBRURKOztBRklBO0VBQ0ksaUJBQUE7QUVESjs7QUZJQTtFQUNJLHNCQUFBO0FFREo7O0FGSUE7RUFDSSxrQkFBQTtBRURKOztBRklBO0VBQ0kseUJDOUJLO0FDNkJUOztBRklBO0VBQ0ksWUFBQTtFQUNBLG1CQUFBO0FFREo7O0FGSUE7RUFDSSxZQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0VBQ0Esc0JBQUE7QUVESjs7QUZJQTtFQUNJLHNCQUFBO0FFREo7O0FGSUE7RUFDSSx1QkFBQTtFQUNBLGtCQUFBO0FFREo7O0FGSUE7RUFDSSxrQ0FBQTtBRURKOztBRklBO0VBQ0ksa0NBQUE7QUVESjs7QUZJQTs7OztFQUlJLCtCQUFBO0FFREo7O0FGSUE7RUFDSSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLGdCQUFBO0FFREo7O0FGSUE7RUFDSSxzQkFBQTtBRURKOztBRklBO0VBQ0ksdUJBQUE7QUVESjs7QUZJQTtFQUNJLHNCQUFBO0FFREoiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICcvc3JjL3Njc3MvdmFyaWFibGVzJztcblxuLm1hdC1kaWFsb2ctdGl0bGUtZXh0IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkdG9vbGJhcjtcbiAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICBtYXJnaW4tYm90dG9tOiAwcHg7XG59XG5cbi5tYXQtZGlhbG9nLWNvbnRlbnQtZXh0IHtcbiAgICBtYXJnaW46IDA7XG4gICAgcGFkZGluZzogMTBweDtcbn1cblxuLm1hdC1kaWFsb2ctYWN0aW9ucy1leHQge1xuICAgIGJvcmRlci10b3A6IG5vbmU7XG4gICAgcGFkZGluZzogM3B4O1xuICAgIG1pbi1oZWlnaHQ6IDM2cHggIWltcG9ydGFudDtcbiAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xufVxuXG4uYWN0aW9uLWJ1dHRvbnMge1xuICAgIGhlaWdodDogMzBweDtcbiAgICB3aWR0aDogNzBweDtcbn1cblxuLm1hcmdpbi1sZWZ0LTIwIHtcbiAgICBtYXJnaW4tbGVmdDogMjBweDtcbn1cblxuLm1hcmdpbi01IHtcbiAgICBtYXJnaW46IDVweCAhaW1wb3J0YW50O1xufVxuXG4ubWF0LWNhcmQge1xuICAgIGJvcmRlci1yYWRpdXM6IDBweDtcbn1cblxuLm1hdC1leHBhbnNpb24tcGFuZWwge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR0b29sYmFyO1xufVxuXG4ubWF0LWV4cGFuc2lvbi1wYW5lbC1oZWFkZXItdGl0bGUge1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBsZXR0ZXItc3BhY2luZzogMXB4O1xufVxuXG4ubWF0LWNhcmQtdGl0bGUge1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBsZXR0ZXItc3BhY2luZzogMXB4O1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBtYXJnaW46IDBweCAhaW1wb3J0YW50O1xufVxuXG4ubWF0LWNhcmQtaGVhZGVyLXRleHQge1xuICAgIG1hcmdpbjogMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtY2FyZC1oZWFkZXIge1xuICAgIHBhZGRpbmc6IDVweCAhaW1wb3J0YW50O1xuICAgIG1hcmdpbi1sZWZ0OiAtMTVweDtcbn1cblxuLm1hdC1jYXJkLWNvbnRlbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtZXhwYW5zaW9uLXBhbmVsLWNvbnRlbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtYnV0dG9uLFxuLm1hdC1mbGF0LWJ1dHRvbixcbi5tYXQtaWNvbi1idXR0b24sXG4ubWF0LXN0cm9rZWQtYnV0dG9uIHtcbiAgICBsaW5lLWhlaWdodDogaW5oZXJpdCAhaW1wb3J0YW50O1xufVxuXG4uYnRuLWZpbHRlciB7XG4gICAgbWFyZ2luLWxlZnQ6IDRweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgICB3aWR0aDogNTBweDtcbiAgICBtYXJnaW4tdG9wOiAxN3B4O1xufVxuXG4uYnRuLWdnYi1vcmFuZ2Uge1xuICAgIHdpZHRoOiA5MHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5idG4tZ2diLWRlZmF1bHQtY3VzdG9tIHtcbiAgICBtYXJnaW46IDE2cHggIWltcG9ydGFudFxufVxuXG46Om5nLWRlZXAgLm1hdC1kaWFsb2ctY29udGVudHtcbiAgICBtYXJnaW46IDBweCAhaW1wb3J0YW50O1xufSIsIi8vIFR5cG9ncmFwaHkgdmFyaWFibGVzXG4kZm9udC1mYW1pbHk6ICdSb2JvdG8nLCBzYW5zLXNlcmlmO1xuJHVybDogJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9Um9ib3RvJmRpc3BsYXk9c3dhcCc7XG5cblxuLy8gVGhlbWluZyB2YXJpYWJsZVxuJHByaW1hcnktY29sb3I6ICMwYjllNmQ7XG4kd2hpdGU6ICNmZmZmZmY7XG4kbWFpbi1iYWNrZ3JvdW5kLWNvbG9yOiAjZmFmYWZhO1xuJHRleHQtc2l6ZToxMnB4O1xuJHRvb2xiYXI6Izg3OWNjOTtcbiRzaWRlLW5hdjojMzQzYTQwO1xuJG1hbmRhdG9yeUZpZWxkOiNlMDE1MTU7XG4kdGFiQmdDb2xvcjogIzg3OWNjOTtcbiR0YWJBY3RpdmVCZ0NvbG9yOiAjZmZmZmZmO1xuJHRhYkhlaWdodDogMi4zNTtcbiR0YWJXaWR0aDogODBweDtcbiR0YWJCb3JkZXJSYWRpdXM6IDZweCA2cHggMCAwO1xuJHRhYkJvcmRlckJvdHRvbTogM3B4IHNvbGlkICM4NzljYzkgIWltcG9ydGFudDtcbiR0YWJGb250Q29sb3I6ICNmZmZmZmY7XG4kdGFiUGFuZUJhY2tncm91bmRDb2xvcjogI0YwRjJGNTtcbiRBY3RpdmVUYWJGb250Q29sb3I6ICMwMDAwMDA7XG5cbiR0YWJsZXRQb3RyYWl0TWluV2lkdGg6NjAwcHggO1xuJHRhYmxldFBvdHJhaXRNYXhXaWR0aDogOTU5cHg7XG4kdGFibGV0TGFuZHNjYXBlTWluV2lkdGg6IDk2MHB4O1xuJHRhYmxldExhbmRzcGFjZU1heFdpZHRoOiAxNDM5cHg7XG4iLCIubWF0LWRpYWxvZy10aXRsZS1leHQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjODc5Y2M5O1xuICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gIG1hcmdpbi1ib3R0b206IDBweDtcbn1cblxuLm1hdC1kaWFsb2ctY29udGVudC1leHQge1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDEwcHg7XG59XG5cbi5tYXQtZGlhbG9nLWFjdGlvbnMtZXh0IHtcbiAgYm9yZGVyLXRvcDogbm9uZTtcbiAgcGFkZGluZzogM3B4O1xuICBtaW4taGVpZ2h0OiAzNnB4ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi1ib3R0b206IDVweDtcbiAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xufVxuXG4uYWN0aW9uLWJ1dHRvbnMge1xuICBoZWlnaHQ6IDMwcHg7XG4gIHdpZHRoOiA3MHB4O1xufVxuXG4ubWFyZ2luLWxlZnQtMjAge1xuICBtYXJnaW4tbGVmdDogMjBweDtcbn1cblxuLm1hcmdpbi01IHtcbiAgbWFyZ2luOiA1cHggIWltcG9ydGFudDtcbn1cblxuLm1hdC1jYXJkIHtcbiAgYm9yZGVyLXJhZGl1czogMHB4O1xufVxuXG4ubWF0LWV4cGFuc2lvbi1wYW5lbCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM4NzljYzk7XG59XG5cbi5tYXQtZXhwYW5zaW9uLXBhbmVsLWhlYWRlci10aXRsZSB7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgbGV0dGVyLXNwYWNpbmc6IDFweDtcbn1cblxuLm1hdC1jYXJkLXRpdGxlIHtcbiAgY29sb3I6IHdoaXRlO1xuICBsZXR0ZXItc3BhY2luZzogMXB4O1xuICBmb250LXNpemU6IDEzcHg7XG4gIG1hcmdpbjogMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtY2FyZC1oZWFkZXItdGV4dCB7XG4gIG1hcmdpbjogMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtY2FyZC1oZWFkZXIge1xuICBwYWRkaW5nOiA1cHggIWltcG9ydGFudDtcbiAgbWFyZ2luLWxlZnQ6IC0xNXB4O1xufVxuXG4ubWF0LWNhcmQtY29udGVudCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtZXhwYW5zaW9uLXBhbmVsLWNvbnRlbnQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xufVxuXG4ubWF0LWJ1dHRvbixcbi5tYXQtZmxhdC1idXR0b24sXG4ubWF0LWljb24tYnV0dG9uLFxuLm1hdC1zdHJva2VkLWJ1dHRvbiB7XG4gIGxpbmUtaGVpZ2h0OiBpbmhlcml0ICFpbXBvcnRhbnQ7XG59XG5cbi5idG4tZmlsdGVyIHtcbiAgbWFyZ2luLWxlZnQ6IDRweDtcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gIHdpZHRoOiA1MHB4O1xuICBtYXJnaW4tdG9wOiAxN3B4O1xufVxuXG4uYnRuLWdnYi1vcmFuZ2Uge1xuICB3aWR0aDogOTBweCAhaW1wb3J0YW50O1xufVxuXG4uYnRuLWdnYi1kZWZhdWx0LWN1c3RvbSB7XG4gIG1hcmdpbjogMTZweCAhaW1wb3J0YW50O1xufVxuXG46Om5nLWRlZXAgLm1hdC1kaWFsb2ctY29udGVudCB7XG4gIG1hcmdpbjogMHB4ICFpbXBvcnRhbnQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["UtilConstant","MAT_DIALOG_DATA","AddWrCommentsComponent","constructor","data","dialogRef","confirmationService","formBuilder","wrCommentsService","authSrv","subscriptions","title","isView","onChange","onTouched","wrCommentsFormPanel","group","comments","wrId","push","valueChanges","subscribe","value","ngOnInit","isEdit","commentId","getWrCommentsById","res","commentData","setTimeout","patchValue","disable","isValid","getValidationErrors","length","validationErros","wrCommentsData","controls","writeValue","reset","registerOnChange","fn","registerOnTouched","validate","_","valid","onCancel","confirm","message","CANCEL_Msg","header","icon","accept","close","key","onSave","emId","commentDate","commentTime","compId","getLoggedInUserCompId","getLoggedInUserEMId","saveWrComments","i0","ɵɵdirectiveInject","i1","MatDialogRef","i2","ConfirmationService","i3","UntypedFormBuilder","i4","WrCommentsServices","i5","AuthService","_2","selectors","decls","vars","consts","template","AddWrCommentsComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","AddWrCommentsComponent_Template_p_button_click_11_listener","AddWrCommentsComponent_Template_p_button_click_12_listener","ɵɵadvance","ɵɵtextInterpolate1","ɵɵproperty","ɵɵstyleMap","ɵɵpureFunction0","_c0"],"sources":["C:\\Users\\Manav Gupta\\Downloads\\fms\\fms\\frontend\\fms_frontend\\src\\app\\ui\\Helpdesk\\work-request\\widgets\\add-wr-comments\\add-wr-comments.component.ts","C:\\Users\\Manav Gupta\\Downloads\\fms\\fms\\frontend\\fms_frontend\\src\\app\\ui\\Helpdesk\\work-request\\widgets\\add-wr-comments\\add-wr-comments.component.html"],"sourcesContent":["import { Component, Inject, OnInit } from '@angular/core';\nimport { ConfirmationService } from 'primeng/api';\nimport { UtilConstant } from 'src/common/UtilConstant';\nimport { UntypedFormBuilder, UntypedFormControl, UntypedFormGroup } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { VaildationError } from 'src/app/model/vaildationerror.model';\nimport { WrCommentsServices } from '../../service/work-request-comments.services';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\n\n@Component({\n  selector: 'app-add-wr-comments',\n  templateUrl: './add-wr-comments.component.html',\n  styleUrls: ['./add-wr-comments.component.scss']\n})\nexport class AddWrCommentsComponent implements OnInit {\n  wrCommentsFormPanel!: UntypedFormGroup;\n  subscriptions: Subscription[] = [];\n  commentData:any;\n  title:string = 'Add';\n  isView:boolean = false;\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data: any,\n    public dialogRef: MatDialogRef<AddWrCommentsComponent>,\n    private confirmationService: ConfirmationService,\n    private formBuilder: UntypedFormBuilder,\n    private wrCommentsService: WrCommentsServices,\n    private authSrv: AuthService,\n  ) {\n    this.wrCommentsFormPanel = this.formBuilder.group({\n      comments: [null],\n      wrId:[null]\n    })\n    this.subscriptions.push(\n      this.wrCommentsFormPanel.valueChanges.subscribe(value => {\n        this.onChange(value);\n        this.onTouched();\n      })\n    );\n  }\n\n  ngOnInit(): void {\n    this.title = this.data.isEdit ? \"Edit\" :this.data.isView ? \"\" : \"Add\";\n    this.isView = this.data.isView;\n    if (this.data.commentId != null) {\n      this.wrCommentsService.getWrCommentsById(this.data.commentId).subscribe((res: any) => {\n        this.commentData = res;\n        setTimeout(() => {\n          this.wrCommentsFormPanel.patchValue({\n            comments: res.comments,\n            wrId: res.wrId\n          });\n        });\n      })\n    } else {\n      setTimeout(() => {\n        this.wrCommentsFormPanel.patchValue({\n          comments: null,\n          wrId: this.data.wrId\n        });\n      });\n    }\n    if(this.isView) {\n      this.wrCommentsFormPanel.disable();\n    }\n  }\n\n  public isValid() {\n    return this.getValidationErrors().length === 0;\n  }\n\n  public getValidationErrors() {\n    const validationErros: VaildationError[] = [];\n    return validationErros;\n  }\n\n  get value(): any {\n    const wrCommentsData: any = {\n      comments: this.wrCommentsFormPanel.controls.comments.value,\n      wrId: this.wrCommentsFormPanel.controls.wrId.value,\n    };\n    return wrCommentsData;\n  }\n\n  set value(value: any) {\n    setTimeout(() => {\n      this.wrCommentsFormPanel.patchValue({\n        comments: value.comments,\n        wrId:value.wrId\n      });\n    });\n    this.onChange(value);\n    this.onTouched();\n  }\n\n  writeValue(value: any) {\n    if (value) {\n      this.value = value;\n    }\n    if (value === null) {\n      this.wrCommentsFormPanel.reset();\n    }\n  }\n\n  registerOnChange(fn: any) {\n    this.onChange = fn;\n  }\n  registerOnTouched(fn: any) {\n    this.onTouched = fn;\n  }\n  onChange: any = () => { };\n  onTouched: any = () => { };\n\n  validate(_: UntypedFormControl) {\n    return this.wrCommentsFormPanel.valid ? null : { wrCommentsFormPanel: { valid: false } };\n  }\n\n  onCancel() {\n    this.confirmationService.confirm({\n      message: UtilConstant.CANCEL_Msg,\n      header: 'Confirmation',\n      icon: 'pi pi-exclamation-triangle',\n      accept: () => {\n        this.dialogRef.close(false);\n      },\n      key: \"wr-comments-cancel\"\n    });\n  }\n\n  onSave() {\n    if (this.wrCommentsFormPanel.value.comments != '' && this.wrCommentsFormPanel.value.comments != null) {\n      let wrCommentsData;\n      if (this.data.isEdit) {\n        wrCommentsData = {\n          commentId: this.commentData.commentId,\n          emId: this.commentData.emId,\n          commentDate: this.commentData.commentDate,\n          commentTime: this.commentData.commentTime,\n          comments: this.wrCommentsFormPanel.controls.comments.value,\n          compId: this.authSrv.getLoggedInUserCompId(),\n          wrId: this.wrCommentsFormPanel.controls.wrId.value,\n        }\n      } else {\n        wrCommentsData = {\n          commentId: 0,\n          emId: this.authSrv.getLoggedInUserEMId(),\n          commentDate: null,\n          commentTime: null,\n          comments: this.wrCommentsFormPanel.controls.comments.value,\n          compId: this.authSrv.getLoggedInUserCompId(),\n          wrId: this.wrCommentsFormPanel.controls.wrId.value,\n        }\n      }\n\n      this.wrCommentsService.saveWrComments(wrCommentsData).subscribe((res: any) => {\n        if (res.commentId) {\n          this.dialogRef.close(res);\n        }\n      })\n    }\n  }\n}\n\n\n","<h2 mat-dialog-title class=\"mat-dialog-title-ext\">{{title}} Comments</h2>\n<mat-dialog-content>\n    <form [formGroup]=\"wrCommentsFormPanel\">\n        <mat-card-content id=\"wr-comments\">\n            <div class=\"input-label-custom \">\n                <label class='form-field-lable  control-label'>Comments</label>\n                <nz-textarea-count [nzMaxCharacterCount]=\"4000\">\n                    <textarea class=\"form-control note-border\" name=\"commetns\" formControlName=\"comments\" rows=\"4\" maxlength=\"4000\" nz-input></textarea>\n                </nz-textarea-count>\n            </div>\n        </mat-card-content>\n    </form>\n</mat-dialog-content>\n<mat-dialog-actions align=\"end\" class=\"mat-dialog-actions-ext\">\n    <p-button label=\"Save\" icon=\"pi pi-check\" (click)=\"onSave()\"  [disabled]=\"!wrCommentsFormPanel.value.comments || isView\"></p-button>\n    <p-button label=\"Cancel\" (click)=\"onCancel()\" icon=\"pi pi-times\" styleClass=\"p-button-secondary\"\n        [style]=\"{'margin-left': '.5em'}\"></p-button>\n</mat-dialog-actions>\n<p-confirmDialog key=\"wr-comments-cancel\" header=\"Confirmation\" icon=\"pi pi-exclamation-triangle\"></p-confirmDialog>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}