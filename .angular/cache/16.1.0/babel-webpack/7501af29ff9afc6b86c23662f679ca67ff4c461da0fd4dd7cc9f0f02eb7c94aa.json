{"ast":null,"code":"import { forwardRef } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\nimport { SiteFilterInput } from '../../../site/modal/siteFilterInput.model';\nimport { UtilConstant } from 'src/common/UtilConstant';\nimport { EmpFilterInput } from 'src/app/ui/employee/model/em-filter-input-dto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/bl.service\";\nimport * as i3 from \"../../../../services/site.service\";\nimport * as i4 from \"../../../../services/auth.service\";\nimport * as i5 from \"src/app/ui/employee/services/employee.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@ng-select/ng-select\";\nimport * as i8 from \"ng-zorro-antd/table\";\nimport * as i9 from \"ng-zorro-antd/input\";\nimport * as i10 from \"primeng/button\";\nimport * as i11 from \"primeng/dialog\";\nimport * as i12 from \"../../../../directive/numbers-only.directive\";\nimport * as i13 from \"../../../../directive/directive/upper-case.directive\";\nimport * as i14 from \"../../../../directive/directive/trim-input.directive\";\nfunction AddBlFormComponent_tr_13_label_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 32);\n    i0.ɵɵtext(1, \"Building Id and Site Id combination already exists.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddBlFormComponent_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 2);\n    i0.ɵɵtemplate(2, AddBlFormComponent_tr_13_label_2_Template, 2, 0, \"label\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"td\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r0.blFormPanel.controls[\"blId\"] == null ? null : ctx_r0.blFormPanel.controls[\"blId\"].errors) && !(ctx_r0.blFormPanel.controls[\"blId\"] == null ? null : ctx_r0.blFormPanel.controls[\"blId\"].errors.required));\n  }\n}\nfunction AddBlFormComponent_p_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 33);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.imageerrorMsg);\n  }\n}\nconst _c0 = function () {\n  return {\n    width: \"30vw\"\n  };\n};\nexport class AddBlFormComponent {\n  constructor(formBuilder, blSrv, siteSrv, authSrv, cdr, emService) {\n    this.formBuilder = formBuilder;\n    this.blSrv = blSrv;\n    this.siteSrv = siteSrv;\n    this.authSrv = authSrv;\n    this.cdr = cdr;\n    this.emService = emService;\n    this.subscriptions = [];\n    this.newRecord = true;\n    this.enumList = [];\n    this.enumComp = [];\n    this.bl_img = \"assets/images/blank-image.png\";\n    this.isPhotoUploaded = false;\n    this.enumSites = [];\n    this.blContact = false;\n    this.enumBlContactName = [];\n    this.displayImage = false;\n    this.timeZoneData = [];\n    this.imageerrorMsg = '';\n    this.NotImage = false;\n    this.limitSite = 0;\n    this.offsetSite = 0;\n    this.limitEm = 0;\n    this.offsetEm = 0;\n    this.filterCriteria = {\n      fieldName: null,\n      value: null,\n      matchMode: \"contains\",\n      limit: 0,\n      offset: 0\n    };\n    this.scrollLimit = UtilConstant.SCROLL_LIMIT;\n    this.prevSite = {};\n    this.selectedEm = {};\n    this.onChange = () => {};\n    this.onTouched = () => {};\n    this.blFormPanel = this.formBuilder.group({\n      blId: [''],\n      blCode: ['', [Validators.required]],\n      blName: [''],\n      siteId: ['', [Validators.required]],\n      blInfo: [''],\n      longitude: [''],\n      latitude: [''],\n      blContactName: [''],\n      blContactPhone: [''],\n      blPhoto: [''],\n      timeZoneId: [[Validators.required]]\n    });\n    this.subscriptions.push(\n    // any time the inner form changes update the parent of any change\n    this.blFormPanel.valueChanges.subscribe(value => {\n      this.onChange(value);\n      this.onTouched();\n    }));\n  }\n  ngOnInit() {\n    // this.loadCompany();\n    //this.loadSites();\n    /// this.scrollToEndEm();\n    this.loadTimeZones();\n  }\n  preview() {\n    this.displayImage = true;\n  }\n  loadSites() {\n    this.siteSrv.getALLSites().subscribe(res => {\n      this.enumSites = res;\n      this.enumSites = res.map(i => {\n        i.siteName = i.siteNameString;\n        return i;\n      });\n      this.enumSites.unshift(new SiteFilterInput('', 'Make a selection', 0));\n    });\n  }\n  loadEmployeeContact() {\n    this.blContact = true;\n    this.emService.getAllEmployeeList().subscribe(res => {\n      this.blContact = false;\n      this.enumBlContactName = res;\n      this.enumBlContactName.unshift(new EmpFilterInput('', 'Make a selection'));\n    }, error => {\n      this.blContact = false;\n    });\n  }\n  isValid() {\n    return this.getValidationErrors().length === 0;\n  }\n  getValidationErrors() {\n    const me = this;\n    const validationErros = [];\n    return validationErros;\n  }\n  /// End Of Form Validation Related Code\n  get value() {\n    const blDetails = {\n      blId: this.blFormPanel.controls.blId.value,\n      blCode: this.blFormPanel.controls.blCode.value,\n      siteId: this.blFormPanel.controls.siteId.value,\n      blName: this.blFormPanel.controls.blName.value,\n      blInfo: this.blFormPanel.controls.blInfo.value,\n      longitude: this.blFormPanel.controls.longitude.value,\n      latitude: this.blFormPanel.controls.latitude.value,\n      blContactName: this.blFormPanel.controls.blContactName.value,\n      blContactPhone: this.blFormPanel.controls.blContactPhone.value,\n      blPhoto: 2,\n      timeZoneId: this.blFormPanel.controls.timeZoneId.value\n    };\n    return blDetails;\n  }\n  set value(value) {\n    if (value.siteId) {\n      const siteData = {\n        siteId: value.siteId,\n        siteName: value.site.siteName\n      };\n      this.prevSite = siteData;\n      this.addPrevSite(this.prevSite);\n    }\n    if (value.blContactName) {\n      this.selectedEm = value.blContactName;\n      this.updateEmList(value.blContactName);\n    }\n    setTimeout(() => {\n      this.blFormPanel.patchValue({\n        blId: value.blId,\n        blCode: value.blCode,\n        siteId: value.siteId,\n        blName: value.blName,\n        blInfo: value.blInfo,\n        longitude: value.longitude,\n        latitude: value.latitude,\n        blContactName: value.blContactName,\n        blContactPhone: value.blContactPhone,\n        timeZoneId: value.timeZoneId\n      });\n    });\n    this.onChange(value);\n    this.onTouched();\n  }\n  writeValue(value) {\n    if (value) {\n      this.value = value;\n    }\n    if (value === null) {\n      this.blFormPanel.reset();\n    }\n  }\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n  // communicate the inner form validation to the parent form\n  validate(_) {\n    return this.blFormPanel.valid ? null : {\n      blFormPanel: {\n        valid: false\n      }\n    };\n  }\n  ngOnDestroy() {\n    this.subscriptions.forEach(s => s.unsubscribe());\n  }\n  fileChangeEvent(event) {\n    let me = this;\n    let fileReader = new FileReader();\n    var file = event.target.files[0];\n    this.selectedFile = file;\n    let filename = file.name;\n    var extFile = filename.substr(filename.lastIndexOf(\".\") + 1, filename.length).toLowerCase();\n    if (extFile == \"jpg\" || extFile == \"jpeg\" || extFile == \"png\") {\n      var imgSize = event.target.files[0].size;\n      if (imgSize > 1000000) {\n        this.NotImage = true;\n        this.imageerrorMsg = 'Image Size should not be greater than 1 MB';\n      } else {\n        this.NotImage = false;\n        this.imageerrorMsg = '';\n        me.isPhotoUploaded = true;\n        fileReader.readAsDataURL(file);\n        console.log(fileReader.result);\n        fileReader.onload = function () {\n          me.bl_img = fileReader.result;\n        };\n      }\n    } else {\n      this.NotImage = true;\n      this.imageerrorMsg = 'Only jpg/jpeg and png files are allowed!';\n    }\n  }\n  loadTimeZones() {\n    this.blSrv.getAllTimeZones().subscribe(res => {\n      this.timeZoneData = res.map(t => {\n        t.displayName = t.timeZoneId + \" - \" + t.description;\n        return t;\n      });\n    });\n  }\n  scrollToEndSite() {\n    this.offsetSite = this.limitSite;\n    this.limitSite += this.scrollLimit;\n    this.filterCriteria.limit = this.limitSite;\n    this.filterCriteria.offset = this.offsetSite;\n    this.siteSrv.getAllSiteByScroll(this.filterCriteria).subscribe(res => {\n      this.enumSites = res;\n      this.addPrevSite(this.prevSite);\n    });\n  }\n  searchSite(event) {\n    this.filterCriteria = {};\n    this.filterCriteria = {\n      fieldName: \"siteName\",\n      value: event.term,\n      matchMode: \"contains\"\n    };\n    this.scrollToEndSite();\n  }\n  addPrevSite(prevSite) {\n    if (prevSite) {\n      if (!this.isNew && prevSite.siteId) {\n        this.enumSites = this.enumSites.filter(t => t.siteId !== prevSite.siteId);\n        this.enumSites = this.enumSites.filter(t => t.siteId !== null);\n        this.enumSites.unshift(prevSite);\n      }\n      this.enumSites.unshift(new SiteFilterInput(null, 'Make a selection', 0));\n    }\n  }\n  scrollToEndEm() {\n    this.offsetEm = this.limitEm;\n    this.limitEm += this.scrollLimit;\n    this.filterCriteria.limit = this.limitEm;\n    this.filterCriteria.offset = this.offsetEm;\n    this.emService.getALLmployeeByScroll(this.filterCriteria).subscribe(res => {\n      this.enumBlContactName = res;\n      this.enumBlContactName.unshift({\n        emId: null,\n        firstName: 'Make a selection',\n        emCode: null\n      });\n      this.updateEmList(this.selectedEm);\n    });\n  }\n  searchEm(event) {\n    this.filterCriteria = {};\n    this.filterCriteria = {\n      fieldName: \"firstName\",\n      value: event.term,\n      matchMode: \"contains\"\n    };\n    this.scrollToEndEm();\n  }\n  updateEmList(emData) {\n    if (emData) {\n      this.enumBlContactName = this.enumBlContactName.filter(e => e.firstName != emData);\n      this.enumBlContactName = this.enumBlContactName.filter(e => e.emId != null);\n      this.enumBlContactName.unshift(emData);\n    }\n    this.enumBlContactName.unshift({\n      emId: null,\n      firstName: 'Make a selection',\n      emCode: null\n    });\n  }\n  onOpenSite() {\n    this.limitSite = 0;\n    this.offsetSite = 0;\n    this.filterCriteria = {\n      fieldName: null,\n      value: null,\n      matchMode: \"contains\",\n      limit: 0,\n      offset: 0\n    };\n    this.scrollToEndSite();\n  }\n  onOpenEm() {\n    this.limitEm = 0;\n    this.offsetEm = 0;\n    this.filterCriteria = {\n      fieldName: null,\n      value: null,\n      matchMode: \"contains\",\n      limit: 0,\n      offset: 0\n    };\n    this.scrollToEndEm();\n  }\n  static #_ = this.ɵfac = function AddBlFormComponent_Factory(t) {\n    return new (t || AddBlFormComponent)(i0.ɵɵdirectiveInject(i1.UntypedFormBuilder), i0.ɵɵdirectiveInject(i2.BuildingService), i0.ɵɵdirectiveInject(i3.SiteService), i0.ɵɵdirectiveInject(i4.AuthService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i5.EmployeeService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddBlFormComponent,\n    selectors: [[\"app-add-bl-form\"]],\n    inputs: {\n      isNew: \"isNew\",\n      isView: \"isView\"\n    },\n    features: [i0.ɵɵProvidersFeature([{\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => AddBlFormComponent),\n      multi: true\n    }, {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => AddBlFormComponent),\n      multi: true\n    }])],\n    decls: 75,\n    vars: 32,\n    consts: [[3, \"formGroup\"], [\"width\", \"100%\"], [2, \"width\", \"50%\"], [1, \"input-label-custom\"], [1, \"form-field-lable\", \"control-label\"], [\"type\", \"text\", \"name\", \"blCode\", \"uppercase\", \"\", \"formControlName\", \"blCode\", \"maxlength\", \"32\", \"appTrimInput\", \"\", 1, \"form-control\", 3, \"readonly\"], [1, \"form-field-lable\"], [\"type\", \"text\", \"name\", \"blName\", \"formControlName\", \"blName\", \"maxlength\", \"64\", \"appTrimInput\", \"\", 1, \"form-control\", 3, \"readonly\"], [4, \"ngIf\"], [\"appendTo\", \"body\", \"formControlName\", \"siteId\", \"bindLabel\", \"siteName\", \"bindValue\", \"siteId\", \"placeholder\", \"Make a selection\", 1, \"ng-select-dropdown\", 3, \"clearable\", \"readonly\", \"items\", \"searchable\", \"open\", \"scrollToEnd\", \"search\"], [\"appendTo\", \"body\", \"formControlName\", \"blContactName\", \"bindLabel\", \"firstName\", \"bindValue\", \"firstName\", \"placeholder\", \"Make a selection\", 1, \"ng-select-dropdown\", 3, \"clearable\", \"loading\", \"items\", \"readonly\", \"searchable\", \"open\", \"scrollToEnd\", \"search\"], [\"type\", \"text\", \"name\", \"blContactPhone\", \"NumbersOnly\", \"\", \"formControlName\", \"blContactPhone\", \"maxlength\", \"64\", \"appTrimInput\", \"\", 1, \"form-control\", 3, \"readonly\"], [\"type\", \"number\", \"name\", \"latitude\", \"formControlName\", \"latitude\", \"NumbersOnly\", \"\", \"onKeyPress\", \"if(this.value.length==8) return false;\", \"appTrimInput\", \"\", 1, \"form-control\", \"blue-border\", 3, \"readonly\"], [\"type\", \"number\", \"name\", \"longitude\", \"formControlName\", \"longitude\", \"NumbersOnly\", \"\", \"onKeyPress\", \"if(this.value.length==8) return false;\", \"appTrimInput\", \"\", 1, \"form-control\", \"blue-border\", 3, \"readonly\"], [\"rowspan\", \"2\", 2, \"width\", \"50%\", 3, \"hidden\"], [2, \"width\", \"100%\"], [2, \"align-content\", \"flex-start\"], [1, \"container\"], [\"alt\", \"\", 1, \"image\", 2, \"width\", \"100px\", \"height\", \"100px\", 3, \"src\"], [1, \"middle\"], [1, \"text\"], [\"icon\", \"pi pi-eye\", \"pButton\", \"\", \"pRipple\", \"\", \"type\", \"button\", 1, \"p-button-text\", 3, \"click\"], [\"pButton\", \"\", \"label\", \"Select Photo\", \"type\", \"button\", \"icon\", \"pi pi-image\", \"iconPos\", \"left\", 1, \"p-button\", 2, \"margin-left\", \"4px\", 3, \"disabled\", \"click\"], [\"type\", \"file\", \"accept\", \"image/*\", \"hidden\", \"\", 3, \"change\"], [\"_fileInput\", \"\"], [\"class\", \"form-field-lable\", \"style\", \"color: red;font-size: 10px;\", 4, \"ngIf\"], [\"appendTo\", \"body\", \"formControlName\", \"timeZoneId\", \"bindLabel\", \"displayName\", \"bindValue\", \"timeZoneId\", \"placeholder\", \"Make a selection\", 1, \"ng-select-dropdown\", 3, \"clearable\", \"readonly\", \"items\", \"searchable\"], [\"colspan\", \"2\", 2, \"width\", \"50%\"], [\"name\", \"blInfo\", \"formControlName\", \"blInfo\", \"rows\", \"2\", \"nz-input\", \"\", \"maxlength\", \"128\", \"appTrimInput\", \"\", 1, \"form-control\", \"note-border\", 3, \"readonly\"], [3, \"visible\", \"visibleChange\"], [\"width\", \"90%\", \"height\", \"90%\", 3, \"src\", \"alt\"], [\"class\", \"form-field-lable\", \"style\", \"color:red;\", 4, \"ngIf\"], [1, \"form-field-lable\", 2, \"color\", \"red\"], [1, \"form-field-lable\", 2, \"color\", \"red\", \"font-size\", \"10px\"]],\n    template: function AddBlFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r4 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"form\", 0)(1, \"table\", 1)(2, \"tr\")(3, \"td\", 2)(4, \"div\", 3)(5, \"label\", 4);\n        i0.ɵɵtext(6, \"Building Code\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"input\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"td\", 2)(9, \"div\", 3)(10, \"label\", 6);\n        i0.ɵɵtext(11, \"Building Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"input\", 7);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(13, AddBlFormComponent_tr_13_Template, 4, 1, \"tr\", 8);\n        i0.ɵɵelementStart(14, \"tr\")(15, \"td\", 2)(16, \"div\", 3)(17, \"label\", 4);\n        i0.ɵɵtext(18, \"Site \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"ng-select\", 9);\n        i0.ɵɵlistener(\"open\", function AddBlFormComponent_Template_ng_select_open_19_listener() {\n          return ctx.onOpenSite();\n        })(\"scrollToEnd\", function AddBlFormComponent_Template_ng_select_scrollToEnd_19_listener() {\n          return ctx.scrollToEndSite();\n        })(\"search\", function AddBlFormComponent_Template_ng_select_search_19_listener($event) {\n          return ctx.searchSite($event);\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(20, \"td\", 2)(21, \"div\", 3)(22, \"label\", 6);\n        i0.ɵɵtext(23, \"Building Contact Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"ng-select\", 10);\n        i0.ɵɵlistener(\"open\", function AddBlFormComponent_Template_ng_select_open_24_listener() {\n          return ctx.onOpenEm();\n        })(\"scrollToEnd\", function AddBlFormComponent_Template_ng_select_scrollToEnd_24_listener() {\n          return ctx.scrollToEndEm();\n        })(\"search\", function AddBlFormComponent_Template_ng_select_search_24_listener($event) {\n          return ctx.searchEm($event);\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(25, \"tr\")(26, \"td\", 2)(27, \"div\", 3)(28, \"label\", 6);\n        i0.ɵɵtext(29, \"Contact Number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"input\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(31, \"td\", 2)(32, \"div\", 3)(33, \"label\", 6);\n        i0.ɵɵtext(34, \"Latitude\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(35, \"input\", 12);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(36, \"tr\")(37, \"td\", 2)(38, \"div\", 3)(39, \"label\", 6);\n        i0.ɵɵtext(40, \"Longitude\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"input\", 13);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(42, \"td\", 14)(43, \"table\", 15)(44, \"tr\")(45, \"td\", 16)(46, \"div\", 17);\n        i0.ɵɵelement(47, \"img\", 18);\n        i0.ɵɵelementStart(48, \"div\", 19)(49, \"div\", 20)(50, \"button\", 21);\n        i0.ɵɵlistener(\"click\", function AddBlFormComponent_Template_button_click_50_listener() {\n          return ctx.preview();\n        });\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(51, \"td\", 2)(52, \"div\", 3)(53, \"button\", 22);\n        i0.ɵɵlistener(\"click\", function AddBlFormComponent_Template_button_click_53_listener() {\n          i0.ɵɵrestoreView(_r4);\n          const _r1 = i0.ɵɵreference(56);\n          return i0.ɵɵresetView(_r1.click());\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"div\")(55, \"input\", 23, 24);\n        i0.ɵɵlistener(\"change\", function AddBlFormComponent_Template_input_change_55_listener($event) {\n          return ctx.fileChangeEvent($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(57, AddBlFormComponent_p_57_Template, 2, 1, \"p\", 25);\n        i0.ɵɵelementEnd()()()()()()();\n        i0.ɵɵelementStart(58, \"tr\");\n        i0.ɵɵelement(59, \"td\")(60, \"td\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(61, \"tr\")(62, \"td\", 2)(63, \"div\", 3)(64, \"label\", 4);\n        i0.ɵɵtext(65, \"Time Zone\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(66, \"ng-select\", 26);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(67, \"tr\")(68, \"td\", 27)(69, \"div\", 3)(70, \"label\", 6);\n        i0.ɵɵtext(71, \"Building Info\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(72, \"textarea\", 28);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(73, \"p-dialog\", 29);\n        i0.ɵɵlistener(\"visibleChange\", function AddBlFormComponent_Template_p_dialog_visibleChange_73_listener($event) {\n          return ctx.displayImage = $event;\n        });\n        i0.ɵɵelement(74, \"img\", 30);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.blFormPanel);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"readonly\", ctx.isView);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"readonly\", ctx.isView);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.blFormPanel.controls[\"blId\"] == null ? null : ctx.blFormPanel.controls[\"blId\"].errors) && ((ctx.blFormPanel.controls[\"blId\"] == null ? null : ctx.blFormPanel.controls[\"blId\"].dirty) || (ctx.blFormPanel.controls[\"blId\"] == null ? null : ctx.blFormPanel.controls[\"blId\"].touched)));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"clearable\", false)(\"readonly\", !ctx.isNew)(\"items\", ctx.enumSites)(\"readonly\", ctx.isView)(\"searchable\", true);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"clearable\", false)(\"loading\", ctx.blContact)(\"items\", ctx.enumBlContactName)(\"readonly\", ctx.isView)(\"searchable\", true);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"readonly\", ctx.isView);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"readonly\", ctx.isView);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"readonly\", ctx.isView);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"hidden\", ctx.isNew);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"src\", ctx.bl_img, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"disabled\", ctx.isView);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.NotImage);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"clearable\", false)(\"readonly\", !ctx.isNew)(\"items\", ctx.timeZoneData)(\"readonly\", ctx.isView)(\"searchable\", true);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"readonly\", ctx.isView);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(31, _c0));\n        i0.ɵɵproperty(\"visible\", ctx.displayImage);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"src\", ctx.bl_img, i0.ɵɵsanitizeUrl);\n      }\n    },\n    dependencies: [i6.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MaxLengthValidator, i1.FormGroupDirective, i1.FormControlName, i7.NgSelectComponent, i8.NzTableCellDirective, i8.NzTrDirective, i9.NzInputDirective, i10.ButtonDirective, i11.Dialog, i12.NumbersOnlyDirective, i13.UppercaseDirective, i14.TrimInputDirective],\n    styles: [\".container[_ngcontent-%COMP%] {\\n  position: relative;\\n  width: 50%;\\n  align-content: flex-start;\\n  margin-left: 0px;\\n}\\n\\n.image[_ngcontent-%COMP%] {\\n  opacity: 1;\\n  display: block;\\n  \\n\\n\\n  transition: 0.5s ease;\\n  backface-visibility: hidden;\\n}\\n\\n.middle[_ngcontent-%COMP%] {\\n  transition: 0.5s ease;\\n  opacity: 0;\\n  position: absolute;\\n  top: 50%;\\n  left: 65%;\\n  transform: translate(-50%, -50%);\\n  -ms-transform: translate(-50%, -50%);\\n  text-align: center;\\n}\\n\\n.container[_ngcontent-%COMP%]:hover   .image[_ngcontent-%COMP%] {\\n  opacity: 0.3;\\n}\\n\\n.container[_ngcontent-%COMP%]:hover   .middle[_ngcontent-%COMP%] {\\n  opacity: 1;\\n}\\n\\n.text[_ngcontent-%COMP%] {\\n  \\n\\n  color: white;\\n  font-size: 10px;\\n  padding: 16px 32px;\\n}\\n\\n.form-field-lable[_ngcontent-%COMP%] {\\n  font-size: 11px;\\n  margin-bottom: 0px;\\n  font-weight: 500;\\n}\\n\\n.form-control[_ngcontent-%COMP%] {\\n  margin-top: -3px;\\n  padding-left: 5px;\\n}\\n\\n[_ngcontent-%COMP%]::placeholder { \\n\\n  color: #555;\\n  opacity: 1; \\n\\n}\\n\\n[_ngcontent-%COMP%]:-ms-input-placeholder { \\n\\n  color: #555;\\n}\\n\\n[_ngcontent-%COMP%]::-ms-input-placeholder { \\n\\n  color: #555;\\n}\\n\\n.ng-select.ng-select-single[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%] {\\n  border-radius: 0px !important;\\n}\\n\\n.mat-expansion-panel-header-title[_ngcontent-%COMP%] {\\n  color: white;\\n  letter-spacing: 1px;\\n}\\n\\n.mat-card[_ngcontent-%COMP%] {\\n  padding: 0px;\\n  border: thin double rgb(181, 155, 90);\\n}\\n\\n.mat-card-title[_ngcontent-%COMP%] {\\n  color: white;\\n  letter-spacing: 1px;\\n  font-size: 13px;\\n  margin: 0px !important;\\n}\\n\\n.mat-card-header-text[_ngcontent-%COMP%] {\\n  margin: 0px !important;\\n}\\n\\n.mat-card-header[_ngcontent-%COMP%] {\\n  padding: 5px !important;\\n  margin-left: -15px;\\n}\\n\\n.action-buttons[_ngcontent-%COMP%] {\\n  height: 30px;\\n  width: 70px;\\n}\\n\\n.blue-border[_ngcontent-%COMP%] {\\n  border-color: #879cc9 !important;\\n  height: 24px !important;\\n  margin-top: 2px !important;\\n  opacity: 1;\\n}\\n\\n.note-border[_ngcontent-%COMP%] {\\n  border-color: #879cc9 !important;\\n  margin-top: 2px !important;\\n  opacity: 1;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdWkvYmFja2dyb3VuZC1sb2Mvd2lkZ2V0cy9hZGQtYmwtZm9ybS9hZGQtYmwtZm9ybS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBQ0EsVUFBQTtFQUNBLHlCQUFBO0VBQ0EsZ0JBQUE7QUFDRjs7QUFFQTtFQUNFLFVBQUE7RUFDQSxjQUFBO0VBQ0E7Z0JBQUE7RUFFQSxxQkFBQTtFQUNBLDJCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxxQkFBQTtFQUNBLFVBQUE7RUFDQSxrQkFBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0VBQ0EsZ0NBQUE7RUFDQSxvQ0FBQTtFQUNBLGtCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxZQUFBO0FBQ0Y7O0FBRUE7RUFDRSxVQUFBO0FBQ0Y7O0FBRUE7RUFDRSw2QkFBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxnQkFBQTtFQUNBLGlCQUFBO0FBQ0Y7O0FBR0EsZ0JBQUEseUNBQUE7RUFDRSxXQUFBO0VBQ0EsVUFBQSxFQUFBLFlBQUE7QUFBRjs7QUFHQSx5QkFBQSw0QkFBQTtFQUNFLFdBQUE7QUFBRjs7QUFHQSwwQkFBQSxtQkFBQTtFQUNFLFdBQUE7QUFBRjs7QUFHQTtFQUNFLDZCQUFBO0FBQUY7O0FBR0E7RUFDRSxZQUFBO0VBQ0EsbUJBQUE7QUFBRjs7QUFHQTtFQUNFLFlBQUE7RUFDQSxxQ0FBQTtBQUFGOztBQUdBO0VBQ0UsWUFBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQTtFQUNBLHNCQUFBO0FBQUY7O0FBR0E7RUFDRSxzQkFBQTtBQUFGOztBQUdBO0VBQ0UsdUJBQUE7RUFDQSxrQkFBQTtBQUFGOztBQUdBO0VBQ0UsWUFBQTtFQUNBLFdBQUE7QUFBRjs7QUFHQTtFQUVFLGdDQUFBO0VBQ0EsdUJBQUE7RUFDQSwwQkFBQTtFQUNBLFVBQUE7QUFERjs7QUFJQTtFQUVFLGdDQUFBO0VBQ0EsMEJBQUE7RUFDQSxVQUFBO0FBRkYiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB3aWR0aDogNTAlO1xuICBhbGlnbi1jb250ZW50OiBmbGV4LXN0YXJ0O1xuICBtYXJnaW4tbGVmdDogMHB4O1xufVxuXG4uaW1hZ2Uge1xuICBvcGFjaXR5OiAxO1xuICBkaXNwbGF5OiBibG9jaztcbiAgLyp3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiBhdXRvOyovXG4gIHRyYW5zaXRpb246IC41cyBlYXNlO1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG59XG5cbi5taWRkbGUge1xuICB0cmFuc2l0aW9uOiAuNXMgZWFzZTtcbiAgb3BhY2l0eTogMDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDUwJTtcbiAgbGVmdDogNjUlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5jb250YWluZXI6aG92ZXIgLmltYWdlIHtcbiAgb3BhY2l0eTogMC4zO1xufVxuXG4uY29udGFpbmVyOmhvdmVyIC5taWRkbGUge1xuICBvcGFjaXR5OiAxO1xufVxuXG4udGV4dCB7XG4gIC8qYmFja2dyb3VuZC1jb2xvcjogIzA0QUE2RDsqL1xuICBjb2xvcjogd2hpdGU7XG4gIGZvbnQtc2l6ZTogMTBweDtcbiAgcGFkZGluZzogMTZweCAzMnB4O1xufVxuXG4uZm9ybS1maWVsZC1sYWJsZSB7XG4gIGZvbnQtc2l6ZTogMTFweDtcbiAgbWFyZ2luLWJvdHRvbTogMHB4O1xuICBmb250LXdlaWdodDogNTAwO1xufVxuXG4uZm9ybS1jb250cm9sIHtcbiAgbWFyZ2luLXRvcDogLTNweDtcbiAgcGFkZGluZy1sZWZ0OiA1cHg7XG59XG5cblxuOjpwbGFjZWhvbGRlciB7IC8qIENocm9tZSwgRmlyZWZveCwgT3BlcmEsIFNhZmFyaSAxMC4xKyAqL1xuICBjb2xvcjogIzU1NTtcbiAgb3BhY2l0eTogMTsgLyogRmlyZWZveCAqL1xufVxuXG46LW1zLWlucHV0LXBsYWNlaG9sZGVyIHsgLyogSW50ZXJuZXQgRXhwbG9yZXIgMTAtMTEgKi9cbiAgY29sb3I6ICM1NTU7XG59XG5cbjo6LW1zLWlucHV0LXBsYWNlaG9sZGVyIHsgLyogTWljcm9zb2Z0IEVkZ2UgKi9cbiAgY29sb3I6ICM1NTU7XG59XG5cbi5uZy1zZWxlY3Qubmctc2VsZWN0LXNpbmdsZSAubmctc2VsZWN0LWNvbnRhaW5lciB7XG4gIGJvcmRlci1yYWRpdXM6IDBweCAhaW1wb3J0YW50O1xufVxuXG4ubWF0LWV4cGFuc2lvbi1wYW5lbC1oZWFkZXItdGl0bGUge1xuICBjb2xvcjogd2hpdGU7XG4gIGxldHRlci1zcGFjaW5nOiAxcHg7XG59XG5cbi5tYXQtY2FyZCB7XG4gIHBhZGRpbmc6IDBweDtcbiAgYm9yZGVyOiB0aGluIGRvdWJsZSByZ2IoMTgxLCAxNTUsIDkwKTtcbn1cblxuLm1hdC1jYXJkLXRpdGxlIHtcbiAgY29sb3I6IHdoaXRlO1xuICBsZXR0ZXItc3BhY2luZzogMXB4O1xuICBmb250LXNpemU6IDEzcHg7XG4gIG1hcmdpbjogMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtY2FyZC1oZWFkZXItdGV4dCB7XG4gIG1hcmdpbjogMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtY2FyZC1oZWFkZXIge1xuICBwYWRkaW5nOiA1cHggIWltcG9ydGFudDtcbiAgbWFyZ2luLWxlZnQ6IC0xNXB4O1xufVxuXG4uYWN0aW9uLWJ1dHRvbnMge1xuICBoZWlnaHQ6IDMwcHg7XG4gIHdpZHRoOiA3MHB4O1xufVxuXG4uYmx1ZS1ib3JkZXIge1xuICAvLyBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICBib3JkZXItY29sb3I6ICM4NzljYzkgIWltcG9ydGFudDtcbiAgaGVpZ2h0OiAyNHB4ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi10b3A6IDJweCAhaW1wb3J0YW50O1xuICBvcGFjaXR5OjE7XG59XG5cbi5ub3RlLWJvcmRlciB7XG4gIC8vIGJhY2tncm91bmQtY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gIGJvcmRlci1jb2xvcjogIzg3OWNjOSAhaW1wb3J0YW50O1xuICBtYXJnaW4tdG9wOiAycHggIWltcG9ydGFudDtcbiAgb3BhY2l0eToxO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["forwardRef","Validators","NG_VALUE_ACCESSOR","NG_VALIDATORS","SiteFilterInput","UtilConstant","EmpFilterInput","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","AddBlFormComponent_tr_13_label_2_Template","ɵɵelement","ɵɵadvance","ɵɵproperty","ctx_r0","blFormPanel","controls","errors","required","ɵɵtextInterpolate","ctx_r2","imageerrorMsg","AddBlFormComponent","constructor","formBuilder","blSrv","siteSrv","authSrv","cdr","emService","subscriptions","newRecord","enumList","enumComp","bl_img","isPhotoUploaded","enumSites","blContact","enumBlContactName","displayImage","timeZoneData","NotImage","limitSite","offsetSite","limitEm","offsetEm","filterCriteria","fieldName","value","matchMode","limit","offset","scrollLimit","SCROLL_LIMIT","prevSite","selectedEm","onChange","onTouched","group","blId","blCode","blName","siteId","blInfo","longitude","latitude","blContactName","blContactPhone","blPhoto","timeZoneId","push","valueChanges","subscribe","ngOnInit","loadTimeZones","preview","loadSites","getALLSites","res","map","i","siteName","siteNameString","unshift","loadEmployeeContact","getAllEmployeeList","error","isValid","getValidationErrors","length","me","validationErros","blDetails","siteData","site","addPrevSite","updateEmList","setTimeout","patchValue","writeValue","reset","registerOnChange","fn","registerOnTouched","validate","_","valid","ngOnDestroy","forEach","s","unsubscribe","fileChangeEvent","event","fileReader","FileReader","file","target","files","selectedFile","filename","name","extFile","substr","lastIndexOf","toLowerCase","imgSize","size","readAsDataURL","console","log","result","onload","getAllTimeZones","t","displayName","description","scrollToEndSite","getAllSiteByScroll","searchSite","term","isNew","filter","scrollToEndEm","getALLmployeeByScroll","emId","firstName","emCode","searchEm","emData","e","onOpenSite","onOpenEm","ɵɵdirectiveInject","i1","UntypedFormBuilder","i2","BuildingService","i3","SiteService","i4","AuthService","ChangeDetectorRef","i5","EmployeeService","_2","selectors","inputs","isView","features","ɵɵProvidersFeature","provide","useExisting","multi","decls","vars","consts","template","AddBlFormComponent_Template","rf","ctx","AddBlFormComponent_tr_13_Template","ɵɵlistener","AddBlFormComponent_Template_ng_select_open_19_listener","AddBlFormComponent_Template_ng_select_scrollToEnd_19_listener","AddBlFormComponent_Template_ng_select_search_19_listener","$event","AddBlFormComponent_Template_ng_select_open_24_listener","AddBlFormComponent_Template_ng_select_scrollToEnd_24_listener","AddBlFormComponent_Template_ng_select_search_24_listener","AddBlFormComponent_Template_button_click_50_listener","AddBlFormComponent_Template_button_click_53_listener","ɵɵrestoreView","_r4","_r1","ɵɵreference","ɵɵresetView","click","AddBlFormComponent_Template_input_change_55_listener","AddBlFormComponent_p_57_Template","AddBlFormComponent_Template_p_dialog_visibleChange_73_listener","dirty","touched","ɵɵsanitizeUrl","ɵɵstyleMap","ɵɵpureFunction0","_c0"],"sources":["/home/admin7/Documents/fms_frontend/src/app/ui/background-loc/widgets/add-bl-form/add-bl-form.component.ts","/home/admin7/Documents/fms_frontend/src/app/ui/background-loc/widgets/add-bl-form/add-bl-form.component.html"],"sourcesContent":["import { Component, forwardRef, OnDestroy, Input, ChangeDetectorRef } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { UntypedFormGroup, UntypedFormBuilder, Validators, ValidatorFn, AbstractControl } from '@angular/forms';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR, UntypedFormControl, NG_VALIDATORS } from '@angular/forms';\nimport { Enums } from 'src/app/model/enums.model';\nimport { VaildationError } from 'src/app/model/vaildationerror.model';\nimport { BuildingService } from '../../services/bl.service';\nimport { BuildingFilterInput } from '../../model/DTO/blFilterInput.model';\nimport { SiteService } from '../../../../services/site.service';\nimport { SiteFilterInput } from '../../../site/modal/siteFilterInput.model';\nimport { AuthService } from '../../../../services/auth.service';\nimport { UtilConstant } from 'src/common/UtilConstant';\nimport { EmployeeService } from 'src/app/ui/employee/services/employee.service';\nimport { EmpFilterInput } from 'src/app/ui/employee/model/em-filter-input-dto';\n\n@Component({\n  selector: 'app-add-bl-form',\n  templateUrl: './add-bl-form.component.html',\n  styleUrls: ['./add-bl-form.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => AddBlFormComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => AddBlFormComponent),\n      multi: true\n    }\n  ]\n})\nexport class AddBlFormComponent implements ControlValueAccessor, OnDestroy {\n\n  blFormPanel: UntypedFormGroup;\n  subscriptions: Subscription[] = [];\n  newRecord: boolean = true;\n  enumList: Enums[] = [];\n  enumComp: BuildingFilterInput[] = [];\n  bl_img: any = \"assets/images/blank-image.png\";\n  selectedFile!: any;\n  isPhotoUploaded: boolean = false;\n  @Input() isNew!: boolean;\n  @Input() isView!: boolean;\n  enumSites: SiteFilterInput[] = [];\n  blContact:boolean =false;\n  enumBlContactName: any[] =[];\n  displayImage: boolean = false;\n  timeZoneData: any[] = [];\n  imageerrorMsg:string ='';\n  NotImage:boolean = false;\n  limitSite: number = 0;\n  offsetSite: number = 0;\n  limitEm: number = 0;\n  offsetEm: number = 0;\n  filterCriteria: any = {\n    fieldName: null, value: null, matchMode: \"contains\", limit: 0, offset: 0\n  };\n  scrollLimit:number = UtilConstant.SCROLL_LIMIT;\n  prevSite:any = {};\n  selectedEm:any = {};\n  constructor(\n    private formBuilder: UntypedFormBuilder,\n    private blSrv: BuildingService,\n    private siteSrv: SiteService,\n    private authSrv: AuthService,\n    private cdr: ChangeDetectorRef,\n    private emService: EmployeeService\n  ) {\n    this.blFormPanel = this.formBuilder.group({\n      blId: [''],\n      blCode: ['', [Validators.required ]],\n      blName: [''],\n      siteId: ['', [Validators.required]],\n      blInfo: [''],\n      longitude: [''],\n      latitude: [''],\n      blContactName: [''],\n      blContactPhone: [''],\n      blPhoto: [''],\n      timeZoneId:[[Validators.required]],\n    });\n\n    this.subscriptions.push(\n      // any time the inner form changes update the parent of any change\n      this.blFormPanel.valueChanges.subscribe(value => {\n        this.onChange(value);\n        this.onTouched();\n      })\n    );\n  }\n\n  ngOnInit(): void {\n    // this.loadCompany();\n    //this.loadSites();\n   /// this.scrollToEndEm();\n    this.loadTimeZones();\n  }\n\n  preview() {\n    this.displayImage = true;\n  }\n\n  loadSites() {\n    this.siteSrv.getALLSites().subscribe((res: any[]) => {\n      this.enumSites = res;\n      this.enumSites = res.map((i: any) => { i.siteName = i.siteNameString; return i; });\n      this.enumSites.unshift(new SiteFilterInput('', 'Make a selection',0));\n    });\n  }\n\n  \n  loadEmployeeContact():void{\n    this.blContact = true;\n    this.emService.getAllEmployeeList().subscribe((res: any[]) => {\n      this.blContact = false;\n      this.enumBlContactName = res;\n      this.enumBlContactName.unshift(new EmpFilterInput('', 'Make a selection'));\n    },error=>{\n      this.blContact = false;\n    });\n  }\n\n  public isValid() {\n    return this.getValidationErrors().length === 0;\n  }\n\n  public getValidationErrors() {\n    const me = this;\n    const validationErros: VaildationError[] = [];\n\n    return validationErros;\n  }\n  /// End Of Form Validation Related Code\n  get value(): any {\n    const blDetails: any = {\n      blId: this.blFormPanel.controls.blId.value,\n      blCode: this.blFormPanel.controls.blCode.value,\n      siteId: this.blFormPanel.controls.siteId.value,\n      blName: this.blFormPanel.controls.blName.value,\n      blInfo: this.blFormPanel.controls.blInfo.value,\n      longitude: this.blFormPanel.controls.longitude.value,\n      latitude: this.blFormPanel.controls.latitude.value,\n      blContactName: this.blFormPanel.controls.blContactName.value,\n      blContactPhone: this.blFormPanel.controls.blContactPhone.value,\n      blPhoto: 2,\n      timeZoneId: this.blFormPanel.controls.timeZoneId.value\n    };\n    return blDetails;\n  }\n\n  set value(value: any) {\n    if(value.siteId) {\n      const siteData:any = {\n        siteId:value.siteId,\n        siteName:value.site.siteName,\n      }\n      this.prevSite = siteData;\n      this.addPrevSite(this.prevSite);\n    }\n    if(value.blContactName) {\n      this.selectedEm = value.blContactName;\n      this.updateEmList(value.blContactName);\n    }\n    setTimeout(() => {\n      this.blFormPanel.patchValue({\n        blId: value.blId,\n        blCode: value.blCode,\n        siteId: value.siteId,\n        blName: value.blName,\n        blInfo: value.blInfo,\n        longitude: value.longitude,\n        latitude: value.latitude,\n        blContactName: value.blContactName,\n        blContactPhone: value.blContactPhone,\n        timeZoneId: value.timeZoneId\n      });\n     \n    });\n    this.onChange(value);\n    this.onTouched();\n  }\n\n  writeValue(value: any) {\n\n    if (value) {\n      this.value = value;\n    }\n    if (value === null) {\n      this.blFormPanel.reset();\n    }\n  }\n\n\n  registerOnChange(fn: any) {\n    this.onChange = fn;\n  }\n  registerOnTouched(fn: any) {\n    this.onTouched = fn;\n  }\n  onChange: any = () => { };\n  onTouched: any = () => { };\n\n  // communicate the inner form validation to the parent form\n  validate(_: UntypedFormControl) {\n    return this.blFormPanel.valid ? null : { blFormPanel: { valid: false } };\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.forEach(s => s.unsubscribe());\n  }\n\n  fileChangeEvent(event: any) {\n    let me = this;\n    let fileReader = new FileReader();\n    var file = event.target.files[0];\n    this.selectedFile = file;\n    let filename = file.name;\n    var extFile = filename.substr(filename.lastIndexOf(\".\") + 1, filename.length).toLowerCase();\n    if (extFile==\"jpg\" || extFile==\"jpeg\" || extFile==\"png\"){\n      var imgSize = event.target.files[0].size;\n        if(imgSize > 1000000) {\n          this.NotImage = true;\n          this.imageerrorMsg = 'Image Size should not be greater than 1 MB';\n        }else{\n          this.NotImage = false;\n          this.imageerrorMsg = '';\n          me.isPhotoUploaded = true;\n          fileReader.readAsDataURL(file);\n          console.log(fileReader.result);\n          fileReader.onload = function () {\n          me.bl_img = fileReader.result;\n        }} \n    }else{\n        this.NotImage = true;\n        this.imageerrorMsg = 'Only jpg/jpeg and png files are allowed!';\n    }\n  }\n\n  loadTimeZones(){\n    this.blSrv.getAllTimeZones().subscribe((res:any) => {\n      this.timeZoneData = res.map((t:any) => {t.displayName = t.timeZoneId + \" - \" + t.description; return t})\n\n    })\n  }\n\n  scrollToEndSite() {\n    this.offsetSite = this.limitSite;\n    this.limitSite += this.scrollLimit;\n    this.filterCriteria.limit = this.limitSite;\n    this.filterCriteria.offset = this.offsetSite;\n    this.siteSrv.getAllSiteByScroll(this.filterCriteria).subscribe((res:any) => {\n     this.enumSites = res;\n     this.addPrevSite(this.prevSite);\n    })\n   }\n\n   searchSite(event:any) {\n    this.filterCriteria = {};\n    this.filterCriteria = { fieldName: \"siteName\", value: event.term, matchMode: \"contains\" };\n    this.scrollToEndSite();\n   }\n\n   addPrevSite(prevSite:any) {\n    if(prevSite) {\n      if(!this.isNew && prevSite.siteId){\n        this.enumSites = this.enumSites.filter(t => t.siteId !== prevSite.siteId);\n        this.enumSites = this.enumSites.filter(t => t.siteId !== null);\n        this.enumSites.unshift(prevSite);\n       \n     }\n     this.enumSites.unshift(new SiteFilterInput(null,'Make a selection',0));\n    }\n   }\n\n   scrollToEndEm() {\n    this.offsetEm = this.limitEm;\n    this.limitEm += this.scrollLimit;\n    this.filterCriteria.limit = this.limitEm;\n    this.filterCriteria.offset = this.offsetEm;\n    this.emService.getALLmployeeByScroll(this.filterCriteria).subscribe((res:any) => {\n      this.enumBlContactName = res;\n      this.enumBlContactName.unshift({emId:null, firstName:'Make a selection',emCode:null});\n      this.updateEmList(this.selectedEm);\n    })\n  }\n\n  searchEm(event: any) {\n    this.filterCriteria = {};\n    this.filterCriteria = { fieldName: \"firstName\", value: event.term, matchMode: \"contains\" };\n    this.scrollToEndEm();\n  }\n\n  updateEmList(emData:any) {\n   if(emData) {\n    this.enumBlContactName = this.enumBlContactName.filter(e => e.firstName != emData);\n    this.enumBlContactName = this.enumBlContactName.filter(e => e.emId != null);\n    this.enumBlContactName.unshift(emData);\n   }\n    this.enumBlContactName.unshift({emId:null, firstName:'Make a selection',emCode:null});\n  }\n\n  onOpenSite() {\n    this.limitSite = 0;\n    this.offsetSite = 0;\n    this.filterCriteria = {\n      fieldName: null, value: null, matchMode: \"contains\", limit: 0, offset: 0\n    };\n    this.scrollToEndSite();\n  }\n\n  onOpenEm() {\n    this.limitEm = 0;\n    this.offsetEm = 0;\n    this.filterCriteria = {\n      fieldName: null, value: null, matchMode: \"contains\", limit: 0, offset: 0\n    };\n    this.scrollToEndEm();\n  }\n\n}\n","<form [formGroup]=\"blFormPanel\">\n  <table width=\"100%\">\n    <tr>\n      <td style=\"width: 50%\">\n        <div class=\"input-label-custom \">\n          <label class='form-field-lable control-label'>Building Code</label>\n          <input type=\"text\" class=\"form-control\" name=\"blCode\" uppercase formControlName=\"blCode\" maxlength=\"32\" [readonly]=\"isView\" appTrimInput>\n        </div>\n      </td>\n      <td style=\"width: 50%\">\n        <div class=\"input-label-custom \">\n          <label class='form-field-lable'>Building Name</label>\n          <input type=\"text\" class=\"form-control\" [readonly]=\"isView\" name=\"blName\" formControlName=\"blName\" maxlength=\"64\" appTrimInput>\n        </div>\n      </td>\n    </tr>\n    <tr *ngIf=\"(blFormPanel.controls['blId']?.errors && (blFormPanel.controls['blId']?.dirty || blFormPanel.controls['blId']?.touched))\">\n            <td style=\"width: 50%\">\n                    <label *ngIf=\"blFormPanel.controls['blId']?.errors && !blFormPanel.controls['blId']?.errors.required\"\n                            class='form-field-lable' style=\"color:red;\">Building Id and Site Id combination  already\n                            exists.</label>\n            </td>\n            <td></td>\n    </tr>\n    <tr>\n      <td style=\"width: 50%\">\n        <div class=\"input-label-custom \">\n          <label class='form-field-lable control-label'>Site </label>\n          <ng-select appendTo=\"body\" [clearable]=\"false\" [readonly]=\"!isNew\" [items]=\"enumSites\" formControlName=\"siteId\"\n          [readonly]=\"isView\"  [searchable]=\"true\" bindLabel=\"siteName\" bindValue=\"siteId\" placeholder=\"Make a selection\"\n          (open)=\"onOpenSite()\"   class=\"ng-select-dropdown\" (scrollToEnd)=\"scrollToEndSite()\" (search)=\"searchSite($event)\">\n          </ng-select>\n        </div>\n      </td>\n      <td style=\"width: 50%\">\n        <div class=\"input-label-custom \">\n          <label class='form-field-lable'>Building Contact Name</label>\n          <ng-select appendTo=\"body\" [clearable]=\"false\" [loading]=\"blContact\" [items]=\"enumBlContactName\" (open)=\"onOpenEm()\"\n            formControlName=\"blContactName\" [readonly]=\"isView\" [searchable]=\"true\" bindLabel=\"firstName\" bindValue=\"firstName\"\n            placeholder=\"Make a selection\" class=\"ng-select-dropdown\" (scrollToEnd)=\"scrollToEndEm()\" (search)=\"searchEm($event)\">\n          </ng-select>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td style=\"width: 50%\">\n        <div class=\"input-label-custom \">\n          <label class='form-field-lable'>Contact Number</label>\n          <input type=\"text\" class=\"form-control\"  [readonly]=\"isView\" name=\"blContactPhone\" NumbersOnly formControlName=\"blContactPhone\" maxlength=\"64\" appTrimInput>\n        </div>\n      </td>\n      <td style=\"width: 50%\">\n        <div class=\"input-label-custom \">\n          <label class='form-field-lable'>Latitude</label>\n          <input type=\"number\" class=\"form-control blue-border\" [readonly]=\"isView\" name=\"latitude\" formControlName=\"latitude\" NumbersOnly onKeyPress=\"if(this.value.length==8) return false;\" appTrimInput>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td style=\"width: 50%\">\n        <div class=\"input-label-custom \">\n          <label class='form-field-lable'>Longitude</label>\n          <input type=\"number\" class=\"form-control blue-border\" [readonly]=\"isView\" name=\"longitude\" formControlName=\"longitude\" NumbersOnly onKeyPress=\"if(this.value.length==8) return false;\" appTrimInput>\n        </div>\n      </td>\n      <td style=\"width: 50%\" rowspan=\"2\" [hidden]=\"isNew\">\n        <table style=\"width: 100%\">\n          <tr>\n            <td style=\"align-content:flex-start\">\n              <div class=\"container\">\n                <img [src]=\"bl_img\" alt=\"\" class=\"image\" style=\"width: 100px; height: 100px;\">\n                <div class=\"middle\">\n                  <div class=\"text\">\n                    <button icon=\"pi pi-eye\" pButton pRipple type=\"button\" (click)=\"preview()\" class=\"p-button-text\">\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </td>\n            <td style=\"width: 50%\">\n              <div class=\"input-label-custom \">\n                <button pButton label=\"Select Photo\" style=\"margin-left:4px\" class=\"p-button\" [disabled]=\"isView\" type=\"button\" icon=\"pi pi-image\"\n                        iconPos=\"left\" (click)=\"_fileInput.click()\"></button>\n                <div>\n                    <input #_fileInput type=\"file\" accept=\"image/*\" (change)=\"fileChangeEvent($event)\" hidden />\n                    <p *ngIf=\"NotImage\" class='form-field-lable' style=\"color: red;font-size: 10px;\">{{imageerrorMsg}}</p>\n                </div>\n                \n              </div>\n            </td>\n          </tr>\n        </table>\n      </td>\n    </tr>\n    <tr>\n      <td></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td style=\"width: 50%\">\n        <div class=\"input-label-custom \">\n          <label class='form-field-lable control-label'>Time Zone</label>\n          <ng-select appendTo=\"body\" [clearable]=\"false\" [readonly]=\"!isNew\" [items]=\"timeZoneData\" formControlName=\"timeZoneId\"\n          [readonly]=\"isView\"  [searchable]=\"true\" bindLabel=\"displayName\" bindValue=\"timeZoneId\" placeholder=\"Make a selection\"\n                     class=\"ng-select-dropdown\">\n          </ng-select>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td style=\"width: 50%\" colspan=\"2\">\n        <div class=\"input-label-custom \">\n          <label class='form-field-lable'>Building Info</label>\n          <textarea class=\"form-control note-border\" [readonly]=\"isView\" name=\"blInfo\" formControlName=\"blInfo\" rows=\"2\" nz-input maxlength=\"128\" appTrimInput></textarea>\n        </div>\n      </td>\n    </tr>\n  </table>\n  <p-dialog [(visible)]=\"displayImage\" [style]=\"{width: '30vw'}\">\n    <img [src]=\"bl_img\" [alt]=\"\" width=\"90%\" height=\"90%\" />\n  </p-dialog>\n</form>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}