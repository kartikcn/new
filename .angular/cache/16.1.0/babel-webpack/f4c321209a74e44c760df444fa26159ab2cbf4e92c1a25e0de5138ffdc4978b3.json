{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { UtilConstant } from 'src/common/UtilConstant';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../service/inventory.service\";\nimport * as i2 from \"src/app/ui/background-loc/services/bl.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"primeng/api\";\nimport * as i5 from \"primeng/table\";\nimport * as i6 from \"primeng/button\";\nimport * as i7 from \"primeng/dialog\";\nimport * as i8 from \"primeng/panel\";\nfunction CenterBudgetTermItemReportComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-button\", 7);\n    i0.ɵɵlistener(\"click\", function CenterBudgetTermItemReportComponent_ng_template_4_Template_p_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.clickBack());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CenterBudgetTermItemReportComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 8)(2, \"div\", 9)(3, \"div\", 10)(4, \"p\", 11);\n    i0.ɵɵtext(5, \"Item Id\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 12);\n    i0.ɵɵelement(7, \"p-sortIcon\", 13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"th\", 14)(9, \"div\", 9)(10, \"div\", 10)(11, \"p\", 11);\n    i0.ɵɵtext(12, \"Budget\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 12);\n    i0.ɵɵelement(14, \"p-sortIcon\", 15);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"th\", 16)(16, \"div\", 9)(17, \"div\", 10)(18, \"p\", 11);\n    i0.ɵɵtext(19, \"Expense\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 12);\n    i0.ɵɵelement(21, \"p-sortIcon\", 17);\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction CenterBudgetTermItemReportComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 18);\n    i0.ɵɵlistener(\"click\", function CenterBudgetTermItemReportComponent_ng_template_7_Template_td_click_5_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const cntbdg_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.showExpenses($event, cntbdg_r7));\n    });\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const cntbdg_r7 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.getNameById(cntbdg_r7.itemId, \"ITEM\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cntbdg_r7.budget);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"color\", ctx_r2.getColor(cntbdg_r7));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(cntbdg_r7.expense || 0);\n  }\n}\nfunction CenterBudgetTermItemReportComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"No records found\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"colspan\", 3);\n  }\n}\nfunction CenterBudgetTermItemReportComponent_p_dialog_9_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 8)(2, \"div\", 9)(3, \"div\", 10)(4, \"p\", 11);\n    i0.ɵɵtext(5, \"Item\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 12);\n    i0.ɵɵelement(7, \"p-sortIcon\", 13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"th\", 21)(9, \"div\", 9)(10, \"div\", 10)(11, \"p\", 11);\n    i0.ɵɵtext(12, \"Quantity\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 12);\n    i0.ɵɵelement(14, \"p-sortIcon\", 22);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"th\", 23)(16, \"div\", 9)(17, \"div\", 10)(18, \"p\", 11);\n    i0.ɵɵtext(19, \"Cost Per Unit\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 12);\n    i0.ɵɵelement(21, \"p-sortIcon\", 24);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"th\", 25)(23, \"div\", 9)(24, \"div\", 10)(25, \"p\", 11);\n    i0.ɵɵtext(26, \"Cost\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"div\", 12);\n    i0.ɵɵelement(28, \"p-sortIcon\", 26);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(29, \"th\", 25)(30, \"div\", 9)(31, \"div\", 10)(32, \"p\", 11);\n    i0.ɵɵtext(33, \"Reason For Over Usage\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(34, \"div\", 12);\n    i0.ɵɵelement(35, \"p-sortIcon\", 26);\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction CenterBudgetTermItemReportComponent_p_dialog_9_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const centerUsage_r14 = ctx.$implicit;\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r12.getNameById(centerUsage_r14.itemId, \"ITEM\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(centerUsage_r14.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(centerUsage_r14.rate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(centerUsage_r14.cost);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(centerUsage_r14.overUsageReason);\n  }\n}\nfunction CenterBudgetTermItemReportComponent_p_dialog_9_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"No records found\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"colspan\", 5);\n  }\n}\nconst _c0 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\nconst _c1 = function () {\n  return {\n    \"min-width\": \"68rem\",\n    width: \"100%\"\n  };\n};\nconst _c2 = function () {\n  return [25, 50, 100];\n};\nfunction CenterBudgetTermItemReportComponent_p_dialog_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-dialog\", 19);\n    i0.ɵɵlistener(\"visibleChange\", function CenterBudgetTermItemReportComponent_p_dialog_9_Template_p_dialog_visibleChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.showDetails = $event);\n    })(\"onHide\", function CenterBudgetTermItemReportComponent_p_dialog_9_Template_p_dialog_onHide_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.onCancel());\n    });\n    i0.ɵɵelementStart(1, \"p-table\", 20);\n    i0.ɵɵtemplate(2, CenterBudgetTermItemReportComponent_p_dialog_9_ng_template_2_Template, 36, 0, \"ng-template\", 3);\n    i0.ɵɵtemplate(3, CenterBudgetTermItemReportComponent_p_dialog_9_ng_template_3_Template, 11, 5, \"ng-template\", 4);\n    i0.ɵɵtemplate(4, CenterBudgetTermItemReportComponent_p_dialog_9_ng_template_4_Template, 3, 1, \"ng-template\", 5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(14, _c0));\n    i0.ɵɵproperty(\"header\", ctx_r4.title)(\"visible\", ctx_r4.showDetails)(\"draggable\", false)(\"modal\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r4.expenseDataList)(\"paginator\", true)(\"rows\", ctx_r4.rowCount)(\"tableStyle\", i0.ɵɵpureFunction0(15, _c1))(\"rowHover\", true)(\"scrollable\", true)(\"showCurrentPageReport\", true)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(16, _c2));\n  }\n}\nconst _c3 = function () {\n  return {\n    \"min-width\": \"60rem\",\n    width: \"100%\"\n  };\n};\nexport let CenterBudgetTermItemReportComponent = /*#__PURE__*/(() => {\n  class CenterBudgetTermItemReportComponent {\n    constructor(inventorySrv, blSrv) {\n      this.inventorySrv = inventorySrv;\n      this.blSrv = blSrv;\n      this.parentFun = new EventEmitter();\n      this.centerBudgetList = [];\n      this.blIdList = [];\n      this.flIdList = [];\n      this.itemList = [];\n      this.expenseDataList = [];\n      this.rowCount = UtilConstant.ROW_COUNT;\n      this.title = '';\n      this.showDetails = false;\n    }\n    ngOnInit() {\n      const {\n        name,\n        ...selectedBudgetData\n      } = this.budgetTermData;\n      this.loadCenterBudgetList(selectedBudgetData);\n      this.loadEnumsList();\n      this.title += name;\n    }\n    loadCenterBudgetList(data) {\n      if (data) {\n        this.inventorySrv.getCenterBudgetByBlIdFlId(data).subscribe(res => {\n          this.centerBudgetList = res && !res.code ? res : [];\n        });\n      }\n    }\n    loadEnumsList() {\n      const {\n        blId,\n        flId\n      } = this.budgetTermData;\n      this.inventorySrv.getAllItems().subscribe(res => {\n        this.itemList = res && !res.code ? res : [];\n      });\n    }\n    loadItemExpenseData(data) {\n      if (data) {\n        this.inventorySrv.getCenterUsageItemExpense(data).subscribe(res => {\n          this.expenseDataList = res && !res.code ? res : [];\n        });\n      }\n    }\n    getNameById(id, type) {\n      let sourceList = [];\n      let name = '';\n      switch (type) {\n        case 'ITEM':\n          sourceList = this.itemList;\n          name = sourceList.find(v => v.itemId === id)?.name || '';\n          break;\n        default:\n          break;\n      }\n      return name;\n    }\n    clickBack() {\n      this.parentFun.emit({\n        ...this.budgetTermData,\n        close: true\n      });\n    }\n    getColor(data) {\n      const {\n        budget,\n        expense\n      } = data;\n      if (budget && expense) {\n        return budget > expense ? \"#495057\" : '#F75D59';\n      }\n      return '#495057';\n    }\n    showExpenses(e, data) {\n      e.stopPropagation();\n      this.loadItemExpenseData(data);\n      this.showDetails = true;\n    }\n    onCancel() {\n      this.expenseDataList = [];\n      this.showDetails = false;\n      this.title = 'Inventory Report';\n    }\n    static #_ = this.ɵfac = function CenterBudgetTermItemReportComponent_Factory(t) {\n      return new (t || CenterBudgetTermItemReportComponent)(i0.ɵɵdirectiveInject(i1.InventoryService), i0.ɵɵdirectiveInject(i2.BuildingService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CenterBudgetTermItemReportComponent,\n      selectors: [[\"app-center-budget-term-item-report\"]],\n      inputs: {\n        budgetTermData: \"budgetTermData\"\n      },\n      outputs: {\n        parentFun: \"parentFun\"\n      },\n      decls: 10,\n      vars: 12,\n      consts: [[1, \"card\", 2, \"height\", \"90vh\"], [\"pTemplate\", \"icons\"], [\"dataKey\", \"itemId\", \"styleClass\", \"p-datatable-responsive-demo p-datatable-gridlines\", \"scrollDirection\", \"both\", \"scrollHeight\", \"540px\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"paginator\", \"rows\", \"tableStyle\", \"rowHover\", \"scrollable\", \"showCurrentPageReport\", \"rowsPerPageOptions\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [3, \"header\", \"visible\", \"draggable\", \"modal\", \"style\", \"visibleChange\", \"onHide\", 4, \"ngIf\"], [\"label\", \"Back\", \"icon\", \"pi pi-arrow-circle-left\", \"styleClass\", \"p-button-secondary\", 1, \"pull-right\", 3, \"click\"], [\"pSortableColumn\", \"itemId\"], [1, \"grid-header-column\"], [1, \"grid-header-label\"], [1, \"grid-label-paragraph\"], [1, \"grid-sort-icon\"], [\"field\", \"itemId\"], [\"pSortableColumn\", \"budget\"], [\"field\", \"budget\"], [\"pSortableColumn\", \"expense\"], [\"field\", \"expense\"], [3, \"click\"], [3, \"header\", \"visible\", \"draggable\", \"modal\", \"visibleChange\", \"onHide\"], [\"dataKey\", \"centerUsageId\", \"styleClass\", \"p-datatable-responsive-demo p-datatable-gridlines\", \"scrollDirection\", \"both\", \"scrollHeight\", \"540px\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"paginator\", \"rows\", \"tableStyle\", \"rowHover\", \"scrollable\", \"showCurrentPageReport\", \"rowsPerPageOptions\"], [\"pSortableColumn\", \"quantity\"], [\"field\", \"quantity\"], [\"pSortableColumn\", \"rate\"], [\"field\", \"rate\"], [\"pSortableColumn\", \"cost\"], [\"field\", \"cost\"]],\n      template: function CenterBudgetTermItemReportComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"p-panel\")(2, \"p-header\");\n          i0.ɵɵtext(3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(4, CenterBudgetTermItemReportComponent_ng_template_4_Template, 1, 0, \"ng-template\", 1);\n          i0.ɵɵelementStart(5, \"p-table\", 2);\n          i0.ɵɵtemplate(6, CenterBudgetTermItemReportComponent_ng_template_6_Template, 22, 0, \"ng-template\", 3);\n          i0.ɵɵtemplate(7, CenterBudgetTermItemReportComponent_ng_template_7_Template, 7, 5, \"ng-template\", 4);\n          i0.ɵɵtemplate(8, CenterBudgetTermItemReportComponent_ng_template_8_Template, 3, 1, \"ng-template\", 5);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(9, CenterBudgetTermItemReportComponent_p_dialog_9_Template, 5, 17, \"p-dialog\", 6);\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.title);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"value\", ctx.centerBudgetList)(\"paginator\", true)(\"rows\", ctx.rowCount)(\"tableStyle\", i0.ɵɵpureFunction0(10, _c3))(\"rowHover\", true)(\"scrollable\", true)(\"showCurrentPageReport\", true)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(11, _c2));\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.showDetails);\n        }\n      },\n      dependencies: [i3.NgIf, i4.Header, i4.PrimeTemplate, i5.Table, i5.SortableColumn, i5.SortIcon, i6.Button, i7.Dialog, i8.Panel],\n      styles: [\"[_nghost-%COMP%]     .p-panel .p-panel-content{padding:0}[_nghost-%COMP%]     .p-panel .p-panel-header{padding:.5rem}.ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]     .p-datatable-scrollable-body{overflow-y:auto!important}[_nghost-%COMP%]     .p-datatable-scrollable-header-box{padding:0!important}\"]\n    });\n  }\n  return CenterBudgetTermItemReportComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}