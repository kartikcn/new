{"ast":null,"code":"import { forkJoin, of } from 'rxjs';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { UtilConstant } from '../../../../../common/UtilConstant';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"src/app/services/enum.service\";\nimport * as i4 from \"src/app/services/site.service\";\nimport * as i5 from \"src/app/services/rmcat.service\";\nimport * as i6 from \"primeng/api\";\nimport * as i7 from \"ngx-toastr\";\nimport * as i8 from \"../add-rmcat-item/add-rmcat-item.component\";\nimport * as i9 from \"@angular/material/legacy-card\";\nimport * as i10 from \"primeng/button\";\nimport * as i11 from \"primeng/confirmdialog\";\nconst _c0 = function () {\n  return {\n    \"margin-left\": \".5em\"\n  };\n};\nexport class AddEditRmcatComponent {\n  constructor(data, formBuilder, dialog, dialogRef, enumsrv, siteSrv, rmcatSrv, confirmationService, toastr) {\n    this.data = data;\n    this.formBuilder = formBuilder;\n    this.dialog = dialog;\n    this.dialogRef = dialogRef;\n    this.enumsrv = enumsrv;\n    this.siteSrv = siteSrv;\n    this.rmcatSrv = rmcatSrv;\n    this.confirmationService = confirmationService;\n    this.toastr = toastr;\n    this.subscriptions = [];\n    this.isNew = true;\n    this.isEdit = true;\n    this.title = \"\";\n    this.frmRmcatDetail = this.formBuilder.group({\n      rmcatFormPanel: []\n    });\n  }\n  ngOnInit() {\n    this.isEdit = true;\n    this.isNew = true;\n    if (this.data != null) {\n      this.title = this.data.title;\n      this.loadData();\n      this.disableButton();\n      this.isNewRecord();\n    }\n  }\n  disableButton() {\n    if (this.data.isEdit != null && !this.data.isEdit) {\n      this.isEdit = false;\n    }\n  }\n  isNewRecord() {\n    if (this.data.newRecord != null) {\n      this.isNew = this.data.newRecord;\n    }\n  }\n  loadData() {\n    const calls = [];\n    if (this.data.rmCat != null) {\n      calls.push(this.rmcatSrv.getRmcatById(this.data.rmCat));\n    } else {\n      calls.push(of(null));\n    }\n    forkJoin(...calls).subscribe(results => {\n      if (results[0] == null) {\n        let data = {\n          rmCat: '',\n          rmCatDesc: '',\n          highlightColor: '#a6a6a6'\n        };\n        setTimeout(() => {\n          this.frmRmcatDetail.patchValue({\n            rmcatFormPanel: data\n          });\n        }, 0);\n      } else {\n        setTimeout(() => {\n          this.frmRmcatDetail.patchValue({\n            rmcatFormPanel: results[0]\n          });\n        }, 0);\n      }\n    });\n  }\n  saveRecords() {\n    if (this.frmRmcatDetail.valid) {\n      const rmcatData = this.frmRmcatDetail.controls.rmcatFormPanel.value;\n      this.rmcatSrv.saveRmcat(rmcatData).subscribe(res => {\n        if (res.status != 202) {\n          this.toastr.success(\"Record saved Successfully.\");\n          this.dialogRef.close(true);\n        }\n      }, error => {});\n    }\n  }\n  confirmDialog() {\n    this.confirmationService.confirm({\n      message: UtilConstant.CANCEL_Msg,\n      header: 'Confirmation',\n      icon: 'pi pi-exclamation-triangle',\n      accept: () => {\n        this.dialogRef.close(false);\n      },\n      key: 'rmcatForm'\n    });\n  }\n  deleteRecord() {\n    this.userDeleteConfirm();\n  }\n  deleteSiteRecord() {\n    this.rmcatSrv.deleteRoomCat(this.data.rmCat).subscribe(res => {\n      if (res != null && res.code == 200) {\n        //  this.messageService.add({ key: 'siteDetailsMessage', severity: 'success', summary: 'Record deleted successfully', detail: 'Record deleted successfully' });\n        this.dialogRef.close(true);\n      }\n    });\n  }\n  userDeleteConfirm() {\n    this.confirmationService.confirm({\n      message: 'Are you sure that you want to delete ' + this.data.rmCat + '?',\n      header: 'Delete Confirmation',\n      icon: 'pi pi-info-circle',\n      accept: () => {\n        this.deleteSiteRecord();\n      },\n      key: 'rmcatForm'\n    });\n  }\n  static #_ = this.ɵfac = function AddEditRmcatComponent_Factory(t) {\n    return new (t || AddEditRmcatComponent)(i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.UntypedFormBuilder), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i2.MatDialogRef), i0.ɵɵdirectiveInject(i3.EnumService), i0.ɵɵdirectiveInject(i4.SiteService), i0.ɵɵdirectiveInject(i5.RmcatService), i0.ɵɵdirectiveInject(i6.ConfirmationService), i0.ɵɵdirectiveInject(i7.ToastrService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddEditRmcatComponent,\n    selectors: [[\"app-add-edit-rmcat\"]],\n    decls: 12,\n    vars: 9,\n    consts: [[\"mat-dialog-title\", \"\", 1, \"mat-dialog-title-ext\"], [1, \"mat-typography\", \"mat-dialog-content-ext\"], [3, \"formGroup\"], [\"id\", \"blFrm\"], [\"formControlName\", \"rmcatFormPanel\", 3, \"isNew\"], [\"align\", \"end\", 1, \"mat-dialog-actions-ext\"], [\"label\", \"Delete\", \"icon\", \"pi pi-trash\", 1, \"mr5\", 3, \"hidden\", \"disabled\", \"click\"], [\"label\", \"Save\", \"icon\", \"pi pi-check\", 3, \"disabled\", \"click\"], [\"label\", \"Cancel\", \"icon\", \"pi pi-times\", \"styleClass\", \"p-button-secondary\", 3, \"click\"], [\"key\", \"rmcatForm\", \"header\", \"Confirmation\", \"icon\", \"pi pi-exclamation-triangle\"]],\n    template: function AddEditRmcatComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\", 0);\n        i0.ɵɵtext(1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"mat-dialog-content\", 1)(3, \"form\", 2)(4, \"mat-card\")(5, \"mat-card-content\", 3);\n        i0.ɵɵelement(6, \"app-add-rmcat-item\", 4);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(7, \"mat-dialog-actions\", 5)(8, \"p-button\", 6);\n        i0.ɵɵlistener(\"click\", function AddEditRmcatComponent_Template_p_button_click_8_listener() {\n          return ctx.deleteRecord();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"p-button\", 7);\n        i0.ɵɵlistener(\"click\", function AddEditRmcatComponent_Template_p_button_click_9_listener() {\n          return ctx.saveRecords();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"p-button\", 8);\n        i0.ɵɵlistener(\"click\", function AddEditRmcatComponent_Template_p_button_click_10_listener() {\n          return ctx.confirmDialog();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(11, \"p-confirmDialog\", 9);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"\", ctx.title, \" Room Category\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.frmRmcatDetail);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"isNew\", ctx.isNew);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", ctx.isNew)(\"disabled\", !ctx.frmRmcatDetail.valid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", !ctx.frmRmcatDetail.valid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(8, _c0));\n      }\n    },\n    dependencies: [i8.AddRmcatItemComponent, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i9.MatLegacyCard, i9.MatLegacyCardContent, i2.MatDialogTitle, i2.MatDialogContent, i2.MatDialogActions, i10.Button, i11.ConfirmDialog],\n    styles: [\"\\n\\n.mat-dialog-title-ext[_ngcontent-%COMP%] {\\n  background-color: #879cc9;\\n  padding-left: 10px;\\n  font-weight: normal;\\n  margin-bottom: 0px;\\n}\\n\\n.mat-dialog-content-ext[_ngcontent-%COMP%] {\\n  \\n\\n  margin: 0;\\n  padding: 10px;\\n}\\n\\n.mat-dialog-actions-ext[_ngcontent-%COMP%] {\\n  \\n\\n  border-top: none;\\n  padding: 3px;\\n  min-height: 36px !important;\\n  margin-bottom: 5px;\\n  margin-right: 15px;\\n}\\n\\n.action-buttons[_ngcontent-%COMP%] {\\n  height: 30px;\\n  width: 70px;\\n}\\n\\n.margin-left-20[_ngcontent-%COMP%] {\\n  margin-left: 20px;\\n}\\n\\n.margin-5[_ngcontent-%COMP%] {\\n  margin: 5px !important;\\n}\\n\\n.mat-card[_ngcontent-%COMP%] {\\n  border-radius: 0px;\\n}\\n\\n.mat-expansion-panel[_ngcontent-%COMP%] {\\n  background-color: #879cc9;\\n}\\n\\n.mat-expansion-panel-header-title[_ngcontent-%COMP%] {\\n  color: white;\\n  letter-spacing: 1px;\\n}\\n\\n\\n\\n\\n\\n\\n.mat-card-title[_ngcontent-%COMP%] {\\n  color: white;\\n  letter-spacing: 1px;\\n  font-size: 13px;\\n  margin: 0px !important;\\n}\\n\\n.mat-card-header-text[_ngcontent-%COMP%] {\\n  margin: 0px !important;\\n}\\n\\n.mat-card-header[_ngcontent-%COMP%] {\\n  padding: 5px !important;\\n  margin-left: -15px;\\n}\\n\\n.mat-card-content[_ngcontent-%COMP%] {\\n  background-color: white !important;\\n  \\n\\n}\\n\\n.mat-expansion-panel-content[_ngcontent-%COMP%] {\\n  background-color: white !important;\\n}\\n\\n.mat-button[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%] {\\n  line-height: inherit !important;\\n}\\n\\n.btn-filter[_ngcontent-%COMP%] {\\n  margin-left: 4px;\\n  margin-right: 5px;\\n  width: 50px;\\n  margin-top: 17px;\\n}\\n\\n.btn-ggb-orange[_ngcontent-%COMP%] {\\n  width: 90px !important;\\n}\\n\\n.btn-ggb-default-custom[_ngcontent-%COMP%] {\\n  margin: 16px !important;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdWkvcm1jYXQvd2lkZ2V0cy9hZGQtZWRpdC1ybWNhdC9hZGQtZWRpdC1ybWNhdC5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uLy4uLy4uLy4uLy4uL01hbmF2JTIwR3VwdGEvRG93bmxvYWRzL2Ztcy9mbXMvZnJvbnRlbmQvZm1zX2Zyb250ZW5kL3NyYy9hcHAvdWkvcm1jYXQvd2lkZ2V0cy9hZGQtZWRpdC1ybWNhdC9hZGQtZWRpdC1ybWNhdC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxpQ0FBQTtBQUVBO0VBQ0kseUJBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7QUNBSjs7QURHRTtFQUNFLCtCQUFBO0VBQ0EsU0FBQTtFQUNBLGFBQUE7QUNBSjs7QURHRTtFQUNFLCtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxZQUFBO0VBQ0EsMkJBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0FDQUo7O0FER0U7RUFDRSxZQUFBO0VBQ0EsV0FBQTtBQ0FKOztBREdFO0VBQ0UsaUJBQUE7QUNBSjs7QURHRTtFQUNFLHNCQUFBO0FDQUo7O0FER0U7RUFDRSxrQkFBQTtBQ0FKOztBREdFO0VBQ0UseUJBQUE7QUNBSjs7QURHRTtFQUNFLFlBQUE7RUFDQSxtQkFBQTtBQ0FKOztBREdFOzs7R0FBQTtBQUtBO0VBQ0UsWUFBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQTtFQUNBLHNCQUFBO0FDREo7O0FESUU7RUFDRSxzQkFBQTtBQ0RKOztBRElFO0VBQ0UsdUJBQUE7RUFDQSxrQkFBQTtBQ0RKOztBRElFO0VBQ0Usa0NBQUE7RUFDQSxrQkFBQTtBQ0RKOztBRElFO0VBQ0Usa0NBQUE7QUNESjs7QURJRTtFQUNFLCtCQUFBO0FDREo7O0FESUU7RUFDRSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLGdCQUFBO0FDREo7O0FESUU7RUFDRSxzQkFBQTtBQ0RKOztBREtFO0VBQ0UsdUJBQUE7QUNGSiIsInNvdXJjZXNDb250ZW50IjpbIi8qQGltcG9ydCAnL3NyYy9zY3NzL3ZhcmlhYmxlcyc7Ki9cblxuLm1hdC1kaWFsb2ctdGl0bGUtZXh0IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjODc5Y2M5O1xuICAgIHBhZGRpbmctbGVmdDogMTBweDtcbiAgICBmb250LXdlaWdodDogbm9ybWFsO1xuICAgIG1hcmdpbi1ib3R0b206IDBweDtcbiAgfVxuICBcbiAgLm1hdC1kaWFsb2ctY29udGVudC1leHQge1xuICAgIC8qYm9yZGVyOiB0aGluIGRvdWJsZSAjODc5Y2M5OyovXG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gIH1cbiAgXG4gIC5tYXQtZGlhbG9nLWFjdGlvbnMtZXh0IHtcbiAgICAvKmJvcmRlcjogdGhpbiBkb3VibGUgIzg3OWNjOTsqL1xuICAgIGJvcmRlci10b3A6IG5vbmU7XG4gICAgcGFkZGluZzogM3B4O1xuICAgIG1pbi1oZWlnaHQ6IDM2cHggIWltcG9ydGFudDtcbiAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xuICB9XG4gIFxuICAuYWN0aW9uLWJ1dHRvbnMge1xuICAgIGhlaWdodDogMzBweDtcbiAgICB3aWR0aDogNzBweDtcbiAgfVxuICBcbiAgLm1hcmdpbi1sZWZ0LTIwIHtcbiAgICBtYXJnaW4tbGVmdDogMjBweDtcbiAgfVxuICBcbiAgLm1hcmdpbi01IHtcbiAgICBtYXJnaW46IDVweCAhaW1wb3J0YW50O1xuICB9XG4gIFxuICAubWF0LWNhcmQge1xuICAgIGJvcmRlci1yYWRpdXM6IDBweDtcbiAgfVxuICBcbiAgLm1hdC1leHBhbnNpb24tcGFuZWwge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICM4NzljYzk7XG4gIH1cbiAgXG4gIC5tYXQtZXhwYW5zaW9uLXBhbmVsLWhlYWRlci10aXRsZSB7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGxldHRlci1zcGFjaW5nOiAxcHg7XG4gIH1cbiAgXG4gIC8qIC5tYXQtY2FyZCB7XG4gICAgcGFkZGluZzogMHB4O1xuICAgIGJvcmRlcjogdGhpbiBkb3VibGUgcmdiKDE4MSwgMTU1LCA5MCk7XG4gIH0gKi9cbiAgXG4gIC5tYXQtY2FyZC10aXRsZSB7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGxldHRlci1zcGFjaW5nOiAxcHg7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIG1hcmdpbjogMHB4ICFpbXBvcnRhbnQ7XG4gIH1cbiAgXG4gIC5tYXQtY2FyZC1oZWFkZXItdGV4dCB7XG4gICAgbWFyZ2luOiAwcHggIWltcG9ydGFudDtcbiAgfVxuICBcbiAgLm1hdC1jYXJkLWhlYWRlciB7XG4gICAgcGFkZGluZzogNXB4ICFpbXBvcnRhbnQ7XG4gICAgbWFyZ2luLWxlZnQ6IC0xNXB4O1xuICB9XG4gIFxuICAubWF0LWNhcmQtY29udGVudCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgICAvKiBwYWRkaW5nOiA1cHg7ICovXG4gIH1cbiAgXG4gIC5tYXQtZXhwYW5zaW9uLXBhbmVsLWNvbnRlbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gIH1cbiAgXG4gIC5tYXQtYnV0dG9uLCAubWF0LWZsYXQtYnV0dG9uLCAubWF0LWljb24tYnV0dG9uLCAubWF0LXN0cm9rZWQtYnV0dG9uIHtcbiAgICBsaW5lLWhlaWdodDogaW5oZXJpdCAhaW1wb3J0YW50O1xuICB9XG4gIFxuICAuYnRuLWZpbHRlciB7XG4gICAgbWFyZ2luLWxlZnQ6IDRweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgICB3aWR0aDogNTBweDtcbiAgICBtYXJnaW4tdG9wOiAxN3B4O1xuICB9XG4gIFxuICAuYnRuLWdnYi1vcmFuZ2Uge1xuICAgIHdpZHRoOiA5MHB4ICFpbXBvcnRhbnQ7XG4gIH1cbiAgXG4gIFxuICAuYnRuLWdnYi1kZWZhdWx0LWN1c3RvbSB7XG4gICAgbWFyZ2luOiAxNnB4ICFpbXBvcnRhbnRcbiAgfVxuICAiLCIvKkBpbXBvcnQgJy9zcmMvc2Nzcy92YXJpYWJsZXMnOyovXG4ubWF0LWRpYWxvZy10aXRsZS1leHQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjODc5Y2M5O1xuICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gIG1hcmdpbi1ib3R0b206IDBweDtcbn1cblxuLm1hdC1kaWFsb2ctY29udGVudC1leHQge1xuICAvKmJvcmRlcjogdGhpbiBkb3VibGUgIzg3OWNjOTsqL1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDEwcHg7XG59XG5cbi5tYXQtZGlhbG9nLWFjdGlvbnMtZXh0IHtcbiAgLypib3JkZXI6IHRoaW4gZG91YmxlICM4NzljYzk7Ki9cbiAgYm9yZGVyLXRvcDogbm9uZTtcbiAgcGFkZGluZzogM3B4O1xuICBtaW4taGVpZ2h0OiAzNnB4ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi1ib3R0b206IDVweDtcbiAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xufVxuXG4uYWN0aW9uLWJ1dHRvbnMge1xuICBoZWlnaHQ6IDMwcHg7XG4gIHdpZHRoOiA3MHB4O1xufVxuXG4ubWFyZ2luLWxlZnQtMjAge1xuICBtYXJnaW4tbGVmdDogMjBweDtcbn1cblxuLm1hcmdpbi01IHtcbiAgbWFyZ2luOiA1cHggIWltcG9ydGFudDtcbn1cblxuLm1hdC1jYXJkIHtcbiAgYm9yZGVyLXJhZGl1czogMHB4O1xufVxuXG4ubWF0LWV4cGFuc2lvbi1wYW5lbCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM4NzljYzk7XG59XG5cbi5tYXQtZXhwYW5zaW9uLXBhbmVsLWhlYWRlci10aXRsZSB7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgbGV0dGVyLXNwYWNpbmc6IDFweDtcbn1cblxuLyogLm1hdC1jYXJkIHtcbiAgcGFkZGluZzogMHB4O1xuICBib3JkZXI6IHRoaW4gZG91YmxlIHJnYigxODEsIDE1NSwgOTApO1xufSAqL1xuLm1hdC1jYXJkLXRpdGxlIHtcbiAgY29sb3I6IHdoaXRlO1xuICBsZXR0ZXItc3BhY2luZzogMXB4O1xuICBmb250LXNpemU6IDEzcHg7XG4gIG1hcmdpbjogMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtY2FyZC1oZWFkZXItdGV4dCB7XG4gIG1hcmdpbjogMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtY2FyZC1oZWFkZXIge1xuICBwYWRkaW5nOiA1cHggIWltcG9ydGFudDtcbiAgbWFyZ2luLWxlZnQ6IC0xNXB4O1xufVxuXG4ubWF0LWNhcmQtY29udGVudCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gIC8qIHBhZGRpbmc6IDVweDsgKi9cbn1cblxuLm1hdC1leHBhbnNpb24tcGFuZWwtY29udGVudCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG59XG5cbi5tYXQtYnV0dG9uLCAubWF0LWZsYXQtYnV0dG9uLCAubWF0LWljb24tYnV0dG9uLCAubWF0LXN0cm9rZWQtYnV0dG9uIHtcbiAgbGluZS1oZWlnaHQ6IGluaGVyaXQgIWltcG9ydGFudDtcbn1cblxuLmJ0bi1maWx0ZXIge1xuICBtYXJnaW4tbGVmdDogNHB4O1xuICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgd2lkdGg6IDUwcHg7XG4gIG1hcmdpbi10b3A6IDE3cHg7XG59XG5cbi5idG4tZ2diLW9yYW5nZSB7XG4gIHdpZHRoOiA5MHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5idG4tZ2diLWRlZmF1bHQtY3VzdG9tIHtcbiAgbWFyZ2luOiAxNnB4ICFpbXBvcnRhbnQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["forkJoin","of","MAT_DIALOG_DATA","UtilConstant","AddEditRmcatComponent","constructor","data","formBuilder","dialog","dialogRef","enumsrv","siteSrv","rmcatSrv","confirmationService","toastr","subscriptions","isNew","isEdit","title","frmRmcatDetail","group","rmcatFormPanel","ngOnInit","loadData","disableButton","isNewRecord","newRecord","calls","rmCat","push","getRmcatById","subscribe","results","rmCatDesc","highlightColor","setTimeout","patchValue","saveRecords","valid","rmcatData","controls","value","saveRmcat","res","status","success","close","error","confirmDialog","confirm","message","CANCEL_Msg","header","icon","accept","key","deleteRecord","userDeleteConfirm","deleteSiteRecord","deleteRoomCat","code","_","i0","ɵɵdirectiveInject","i1","UntypedFormBuilder","i2","MatDialog","MatDialogRef","i3","EnumService","i4","SiteService","i5","RmcatService","i6","ConfirmationService","i7","ToastrService","_2","selectors","decls","vars","consts","template","AddEditRmcatComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","AddEditRmcatComponent_Template_p_button_click_8_listener","AddEditRmcatComponent_Template_p_button_click_9_listener","AddEditRmcatComponent_Template_p_button_click_10_listener","ɵɵadvance","ɵɵtextInterpolate1","ɵɵproperty","ɵɵstyleMap","ɵɵpureFunction0","_c0"],"sources":["C:\\Users\\Manav Gupta\\Downloads\\fms\\fms\\frontend\\fms_frontend\\src\\app\\ui\\rmcat\\widgets\\add-edit-rmcat\\add-edit-rmcat.component.ts","C:\\Users\\Manav Gupta\\Downloads\\fms\\fms\\frontend\\fms_frontend\\src\\app\\ui\\rmcat\\widgets\\add-edit-rmcat\\add-edit-rmcat.component.html"],"sourcesContent":["import { Component, Inject, OnInit } from '@angular/core';\nimport { UntypedFormGroup, UntypedFormBuilder } from '@angular/forms';\nimport { forkJoin, of, Subscription } from 'rxjs';\nimport {  ConfirmBoxDialogComponent } from 'src/app/confirm-box-dialog/confirm-box-dialog.component';\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';import { EnumService } from 'src/app/services/enum.service';\nimport { SiteService } from 'src/app/services/site.service';\nimport { ConfirmBoxDialogModel } from 'src/app/model/confirm-dialog.model';\nimport { ConfirmationService } from 'primeng/api';\nimport { ToastrService } from 'ngx-toastr';\nimport { SiteDetailsList } from 'src/app/model/site-details-list.model';\nimport { RmcatService } from 'src/app/services/rmcat.service';\nimport { RmcatDetailsList } from 'src/app/model/rmcat-details-list.model';\nimport { UtilConstant } from '../../../../../common/UtilConstant';\n\n@Component({\n     selector: 'app-add-edit-rmcat',\n     templateUrl: './add-edit-rmcat.component.html',\n     styleUrls: ['./add-edit-rmcat.component.scss']\n   })\nexport class AddEditRmcatComponent implements OnInit {\n\n  frmRmcatDetail: UntypedFormGroup;\n  value: any;\n  subscriptions: Subscription[] = [];\n  isNew: boolean = true;\n  confirmationResult: any;\n  isEdit: boolean= true;\n  title=\"\";\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data: any,\n    private formBuilder: UntypedFormBuilder,\n    public dialog: MatDialog,\n    public dialogRef: MatDialogRef<AddEditRmcatComponent>,\n    private enumsrv: EnumService,\n    private siteSrv: SiteService,\n    private rmcatSrv: RmcatService,\n    private confirmationService: ConfirmationService,\n    private toastr: ToastrService\n  ) {\n    this.frmRmcatDetail = this.formBuilder.group({\n      rmcatFormPanel: []\n    });\n  }\n\n  ngOnInit() {\n    this.isEdit = true;\n    this.isNew = true;\n    if (this.data != null) {\n      this.title = this.data.title;\n      this.loadData();\n      this.disableButton();\n      this.isNewRecord();\n    }\n  }\n\n  disableButton() {\n    if (this.data.isEdit != null && !this.data.isEdit) {\n      this.isEdit = false;\n    }\n  }\n  isNewRecord() {\n    if (this.data.newRecord != null) {\n      this.isNew = this.data.newRecord\n    }\n  }\n  loadData() {\n    const calls = [];\n    if (this.data.rmCat != null) {\n     calls.push(this.rmcatSrv.getRmcatById(this.data.rmCat));\n    }\n    else {\n      calls.push(of(null));\n    }\n\n    forkJoin(...calls).subscribe(results => {\n      \n      if (results[0] == null) {\n        let data ={\n          rmCat:'',\n          rmCatDesc:'',\n          highlightColor:'#a6a6a6'\n        }\n        setTimeout(() => {\n          this.frmRmcatDetail.patchValue({\n            rmcatFormPanel: data\n          });\n        }, 0);\n      } else {\n        setTimeout(() => {\n          this.frmRmcatDetail.patchValue({\n            rmcatFormPanel: results[0]\n          });\n        }, 0);\n      }\n    });\n  }\n \n  saveRecords() {\n    \n    if (this.frmRmcatDetail.valid) {\n      const rmcatData: RmcatDetailsList = this.frmRmcatDetail.controls.rmcatFormPanel.value;\n      this.rmcatSrv.saveRmcat(rmcatData).subscribe((res: any) => {\n        if (res.status != 202) {\n          this.toastr.success(\"Record saved Successfully.\");\n          this.dialogRef.close(true);\n        }\n      },\n        error => {\n        }\n      );\n    }\n\n  }\n\n  confirmDialog(): void {\n    this.confirmationService.confirm({\n      message: UtilConstant.CANCEL_Msg,\n      header: 'Confirmation',\n      icon: 'pi pi-exclamation-triangle',\n      accept: () => {\n        this.dialogRef.close(false);\n      },\n      key:'rmcatForm'\n    });\n  \n  }\n\n  deleteRecord(){\n    this.userDeleteConfirm();\n  }\n\n  deleteSiteRecord() {\n    \n    this.rmcatSrv.deleteRoomCat(this.data.rmCat).subscribe((res) => {\n      if (res != null && res.code == 200) {\n        //  this.messageService.add({ key: 'siteDetailsMessage', severity: 'success', summary: 'Record deleted successfully', detail: 'Record deleted successfully' });\n        this.dialogRef.close(true);\n      }\n\n    });\n  }\n  userDeleteConfirm(): void {\n    this.confirmationService.confirm({\n      message: 'Are you sure that you want to delete ' + this.data.rmCat  + '?',\n      header: 'Delete Confirmation',\n      icon: 'pi pi-info-circle',\n      accept: () => {\n        this.deleteSiteRecord();\n      },\n      key: 'rmcatForm'\n    });\n  }\n\n}\n\n","<h2 mat-dialog-title class=\"mat-dialog-title-ext\">{{title}} Room Category</h2>\n<mat-dialog-content class=\"mat-typography mat-dialog-content-ext\">\n  <form [formGroup]=\"frmRmcatDetail\">\n    <mat-card>\n      <mat-card-content id=\"blFrm\">\n        <app-add-rmcat-item formControlName=\"rmcatFormPanel\" [isNew]=\"isNew\" ></app-add-rmcat-item>\n      </mat-card-content>\n    </mat-card>\n  </form>\n</mat-dialog-content>\n<mat-dialog-actions align=\"end\" class=\"mat-dialog-actions-ext\">\n  <p-button label=\"Delete\" (click)=\"deleteRecord()\" [hidden]=\"this.isNew\" [disabled]=\"!frmRmcatDetail.valid\"\n    icon=\"pi pi-trash\" class=\"mr5\"></p-button>\n  <p-button label=\"Save\"  (click)=\"saveRecords()\" [disabled]=\"!frmRmcatDetail.valid\" icon=\"pi pi-check\"></p-button>\n  <p-button label=\"Cancel\" icon=\"pi pi-times\" (click)=\"confirmDialog()\" styleClass=\"p-button-secondary\"\n            [style]=\"{'margin-left': '.5em'}\"></p-button>\n</mat-dialog-actions>\n<p-confirmDialog key=\"rmcatForm\" header=\"Confirmation\"  icon=\"pi pi-exclamation-triangle\"></p-confirmDialog>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}