{"ast":null,"code":"import { MatDialogConfig } from '@angular/material/dialog';\nimport { UtilConstant } from 'src/common/UtilConstant';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../provider/request-documents.provider\";\nimport * as i2 from \"primeng/api\";\nimport * as i3 from \"../services/request-documents.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"ng-zorro-antd/table\";\nimport * as i6 from \"primeng/table\";\nimport * as i7 from \"primeng/button\";\nimport * as i8 from \"primeng/dialog\";\nimport * as i9 from \"primeng/toast\";\nimport * as i10 from \"primeng/panel\";\nimport * as i11 from \"primeng/confirmdialog\";\nfunction RequestDocumentsComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function RequestDocumentsComponent_ng_template_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onAddDocuments());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r0.isReadOnly || ctx_r0.isTechnician);\n  }\n}\nfunction RequestDocumentsComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelement(1, \"th\", 12);\n    i0.ɵɵelementStart(2, \"th\", 13)(3, \"div\", 14)(4, \"div\", 15)(5, \"p\", 16);\n    i0.ɵɵtext(6, \"Document Name\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 17);\n    i0.ɵɵelement(8, \"p-sortIcon\", 18)(9, \"p-columnFilter\", 19);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"th\", 20)(11, \"div\", 14)(12, \"div\", 15)(13, \"p\", 16);\n    i0.ɵɵtext(14, \"Description\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 17);\n    i0.ɵɵelement(16, \"p-sortIcon\", 21)(17, \"p-columnFilter\", 22);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"th\", 23)(19, \"div\", 14)(20, \"div\", 15)(21, \"p\", 16);\n    i0.ɵɵtext(22, \"Date Added\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 17);\n    i0.ɵɵelement(24, \"p-sortIcon\", 24)(25, \"p-columnFilter\", 25);\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction RequestDocumentsComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 26)(1, \"td\", 12)(2, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function RequestDocumentsComponent_ng_template_5_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const doc_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.showDocumentDialog(doc_r6));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function RequestDocumentsComponent_ng_template_5_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const doc_r6 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.onDelete(doc_r6.requestDocId));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const doc_r6 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"pSelectableRow\", doc_r6);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.isTechnician);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(doc_r6.documentName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(doc_r6.docDescription);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(10, 5, doc_r6.dateAdded, \"d MMM yyyy\"));\n  }\n}\nfunction RequestDocumentsComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 29);\n    i0.ɵɵtext(2, \" No Records Found \");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c0 = function () {\n  return [5, 10, 25];\n};\nconst _c1 = function () {\n  return {\n    width: \"30vw\"\n  };\n};\nexport class RequestDocumentsComponent {\n  constructor(requestDocumentsProvider, messageService, requestDocumentsService, confirmSerive, datePipe) {\n    this.requestDocumentsProvider = requestDocumentsProvider;\n    this.messageService = messageService;\n    this.requestDocumentsService = requestDocumentsService;\n    this.confirmSerive = confirmSerive;\n    this.datePipe = datePipe;\n    this.savedFiles = [];\n    this.rowCount = UtilConstant.ROW_COUNT;\n    this.requestId = 0;\n    this.isRequestor = false;\n    this.isApprover = false;\n    this.isTechnician = false;\n    this.isSupervisor = false;\n    this.displayImage = false;\n    this.isReadOnly = false;\n  }\n  ngOnInit() {}\n  onAddDocuments() {\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.disableClose = true;\n    dialogConfig.autoFocus = false;\n    dialogConfig.width = '600px';\n    dialogConfig.data = {\n      requestId: this.requestId,\n      // isView: false,\n      userChecks: {\n        isRequestor: this.isRequestor,\n        isApprover: this.isApprover,\n        isSupervisor: this.isSupervisor,\n        isTechnician: this.isTechnician\n      }\n    };\n    this.requestDocumentsProvider.openDialog(dialogConfig);\n    this.requestDocumentsProvider.onDialogueClosed.subscribe(result => {\n      this.messageService.clear();\n      if (result) {\n        this.messageService.add({\n          key: 'requestDoc',\n          severity: 'success',\n          summary: 'Record saved successfully',\n          detail: 'Record saved successfully'\n        });\n        this.loadDocumentsByRequest(this.requestId);\n      }\n    });\n  }\n  loadDocumentsByRequest(requestId) {\n    this.requestDocumentsService.getDocumentsById(parseInt(requestId)).subscribe(res => {\n      if (res.length > 0) {\n        this.savedFiles = res.map(each => {\n          return {\n            ...each,\n            formatedDateAdded: this.datePipe.transform(each.dateAdded, 'd MMM yyyy')\n          };\n        });\n      } else {\n        this.savedFiles = [];\n      }\n    });\n  }\n  onDelete(id) {\n    this.confirmSerive.confirm({\n      message: 'Are you sure that you want to delete?',\n      header: 'Confirmation',\n      icon: 'pi pi-exclamation-triangle',\n      key: 'deleteDoc',\n      accept: () => {\n        this.deleteDocument(id);\n      }\n    });\n  }\n  deleteDocument(id) {\n    this.requestDocumentsService.deleteRequestDocument(id).subscribe(res => {\n      if (res.code === 200) {\n        this.messageService.add({\n          key: 'requestDoc',\n          severity: 'success',\n          summary: 'Record deleted successfully',\n          detail: 'Record deleted successfully'\n        });\n        this.loadDocumentsByRequest(this.requestId);\n      }\n    });\n  }\n  showDocumentDialog(doc) {\n    if (doc.docType === 'png' || doc.docType === 'jpeg' || doc.docType === 'jpg') {\n      this.src = \"data:image/png;base64,\" + doc.documentContent;\n      this.displayImage = true;\n      return false;\n    } else {\n      const byteCharacters = atob(doc.documentContent);\n      const byteNumbers = new Array(byteCharacters.length);\n      for (let i = 0; i < byteCharacters.length; i++) {\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\n      }\n      const byteArray = new Uint8Array(byteNumbers);\n      let mimeType;\n      // Determine the MIME type based on the file extension or type\n      if (doc.docType === 'pdf') {\n        mimeType = 'application/pdf';\n      } else if (doc.docType === 'doc' || doc.docType === 'docx') {\n        mimeType = 'application/msword';\n      } else if (doc.docType === 'xlsx' || doc.docType === 'xls') {\n        mimeType = 'application/vnd.ms-excel';\n      } else if (doc.docType === 'ppt') {\n        mimeType = 'application/vnd.ms-powerpoint';\n      } else {\n        // Fallback to a generic binary file\n        mimeType = 'application/octet-stream';\n      }\n      const blob = new Blob([byteArray], {\n        type: mimeType\n      });\n      const url = URL.createObjectURL(blob);\n      const anchor = document.createElement('a');\n      anchor.href = url;\n      anchor.target = '_blank';\n      anchor.setAttribute('download', doc.documentName); // Set the download attribute to the desired filename\n      anchor.style.display = 'none';\n      document.body.appendChild(anchor);\n      anchor.click();\n      document.body.removeChild(anchor);\n      return false;\n    }\n  }\n  static #_ = this.ɵfac = function RequestDocumentsComponent_Factory(t) {\n    return new (t || RequestDocumentsComponent)(i0.ɵɵdirectiveInject(i1.RequestDocumentsProvider), i0.ɵɵdirectiveInject(i2.MessageService), i0.ɵɵdirectiveInject(i3.RequestDocumentsService), i0.ɵɵdirectiveInject(i2.ConfirmationService), i0.ɵɵdirectiveInject(i4.DatePipe));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RequestDocumentsComponent,\n    selectors: [[\"app-request-documents\"]],\n    inputs: {\n      isReadOnly: \"isReadOnly\"\n    },\n    decls: 11,\n    vars: 17,\n    consts: [[\"header\", \" \"], [\"pTemplate\", \"icons\"], [1, \"card\"], [\"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", \"styleClass\", \"p-datatable-customers p-datatable-gridlines\", \"selectionMode\", \"single\", 3, \"value\", \"paginator\", \"rows\", \"showCurrentPageReport\", \"rowsPerPageOptions\", \"rowHover\", \"scrollable\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [\"header\", \" \", 3, \"visible\", \"closable\", \"draggable\", \"resizable\", \"modal\", \"visibleChange\"], [\"width\", \"90%\", \"height\", \"90%\", 3, \"src\", \"alt\"], [\"key\", \"requestDoc\", \"position\", \"top-right\"], [\"key\", \"deleteDoc\", \"header\", \"Confirmation\", \"icon\", \"pi pi-exclamation-triangle\"], [\"pButton\", \"\", \"label\", \"Add\", \"icon\", \"pi pi-plus\", 3, \"disabled\", \"click\"], [2, \"width\", \"8rem\"], [\"pSortableColumn\", \"documentName\"], [1, \"grid-header-column\"], [1, \"grid-header-label\"], [1, \"grid-label-paragraph\"], [1, \"grid-sort-icon\"], [\"field\", \"documentName\"], [\"type\", \"text\", \"field\", \"documentName\", \"display\", \"menu\"], [\"pSortableColumn\", \"docDescription\"], [\"field\", \"docDescription\"], [\"type\", \"text\", \"field\", \"docDescription\", \"display\", \"menu\"], [\"pSortableColumn\", \"formatedDateAdded\"], [\"field\", \"formatedDateAdded\"], [\"type\", \"text\", \"field\", \"formatedDateAdded\", \"display\", \"menu\"], [3, \"pSelectableRow\"], [\"pButton\", \"\", \"pRipple\", \"\", \"type\", \"button\", \"icon\", \"pi pi-eye\", 1, \"p-button-text\", 2, \"font-size\", \"5rem\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-times\", \"type\", \"button\", 1, \"p-button-text\", 2, \"font-size\", \"5rem\", \"color\", \"red\", 3, \"disabled\", \"click\"], [\"colspan\", \"4\", 2, \"text-align\", \"center\"]],\n    template: function RequestDocumentsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p-panel\", 0);\n        i0.ɵɵtemplate(1, RequestDocumentsComponent_ng_template_1_Template, 1, 1, \"ng-template\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"p-table\", 3);\n        i0.ɵɵtemplate(4, RequestDocumentsComponent_ng_template_4_Template, 26, 0, \"ng-template\", 4);\n        i0.ɵɵtemplate(5, RequestDocumentsComponent_ng_template_5_Template, 11, 8, \"ng-template\", 5);\n        i0.ɵɵtemplate(6, RequestDocumentsComponent_ng_template_6_Template, 3, 0, \"ng-template\", 6);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(7, \"p-dialog\", 7);\n        i0.ɵɵlistener(\"visibleChange\", function RequestDocumentsComponent_Template_p_dialog_visibleChange_7_listener($event) {\n          return ctx.displayImage = $event;\n        });\n        i0.ɵɵelement(8, \"img\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"p-toast\", 9)(10, \"p-confirmDialog\", 10);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"value\", ctx.savedFiles)(\"paginator\", true)(\"rows\", ctx.rowCount)(\"showCurrentPageReport\", true)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(15, _c0))(\"rowHover\", true)(\"scrollable\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(16, _c1));\n        i0.ɵɵproperty(\"visible\", ctx.displayImage)(\"closable\", true)(\"draggable\", false)(\"resizable\", false)(\"modal\", true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"src\", ctx.src, i0.ɵɵsanitizeUrl);\n      }\n    },\n    dependencies: [i5.NzTableCellDirective, i5.NzThMeasureDirective, i5.NzTrDirective, i2.PrimeTemplate, i6.Table, i6.SortableColumn, i6.SelectableRow, i6.SortIcon, i6.ColumnFilter, i7.ButtonDirective, i8.Dialog, i9.Toast, i10.Panel, i11.ConfirmDialog, i4.DatePipe],\n    styles: [\".p-fileupload .p-fileupload-buttonbar {\\n  display: flex;\\n  justify-content: flex-end;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdWkvSGVscGRlc2svd29yay1yZXF1ZXN0LWRldGFpbHMvd2lkZ2V0cy9yZXF1ZXN0LWRvY3VtZW50cy9tb2RhbC9yZXF1ZXN0LWRvY3VtZW50cy5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uLy4uLy4uLy4uLy4uL01hbmF2JTIwR3VwdGEvRG93bmxvYWRzL2Ztcy9mbXMvZnJvbnRlbmQvZm1zX2Zyb250ZW5kL3NyYy9hcHAvdWkvSGVscGRlc2svd29yay1yZXF1ZXN0LWRldGFpbHMvd2lkZ2V0cy9yZXF1ZXN0LWRvY3VtZW50cy9tb2RhbC9yZXF1ZXN0LWRvY3VtZW50cy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7RUFDQSx5QkFBQTtBQ0NKIiwic291cmNlc0NvbnRlbnQiOlsiOjpuZy1kZWVwIC5wLWZpbGV1cGxvYWQgLnAtZmlsZXVwbG9hZC1idXR0b25iYXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbn0iLCI6Om5nLWRlZXAgLnAtZmlsZXVwbG9hZCAucC1maWxldXBsb2FkLWJ1dHRvbmJhciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["MatDialogConfig","UtilConstant","i0","ɵɵelementStart","ɵɵlistener","RequestDocumentsComponent_ng_template_1_Template_button_click_0_listener","ɵɵrestoreView","_r5","ctx_r4","ɵɵnextContext","ɵɵresetView","onAddDocuments","ɵɵelementEnd","ɵɵproperty","ctx_r0","isReadOnly","isTechnician","ɵɵelement","ɵɵtext","RequestDocumentsComponent_ng_template_5_Template_button_click_2_listener","restoredCtx","_r8","doc_r6","$implicit","ctx_r7","showDocumentDialog","RequestDocumentsComponent_ng_template_5_Template_button_click_3_listener","ctx_r9","onDelete","requestDocId","ɵɵadvance","ctx_r2","ɵɵtextInterpolate","documentName","docDescription","ɵɵpipeBind2","dateAdded","RequestDocumentsComponent","constructor","requestDocumentsProvider","messageService","requestDocumentsService","confirmSerive","datePipe","savedFiles","rowCount","ROW_COUNT","requestId","isRequestor","isApprover","isSupervisor","displayImage","ngOnInit","dialogConfig","disableClose","autoFocus","width","data","userChecks","openDialog","onDialogueClosed","subscribe","result","clear","add","key","severity","summary","detail","loadDocumentsByRequest","getDocumentsById","parseInt","res","length","map","each","formatedDateAdded","transform","id","confirm","message","header","icon","accept","deleteDocument","deleteRequestDocument","code","doc","docType","src","documentContent","byteCharacters","atob","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","mimeType","blob","Blob","type","url","URL","createObjectURL","anchor","document","createElement","href","target","setAttribute","style","display","body","appendChild","click","removeChild","_","ɵɵdirectiveInject","i1","RequestDocumentsProvider","i2","MessageService","i3","RequestDocumentsService","ConfirmationService","i4","DatePipe","_2","selectors","inputs","decls","vars","consts","template","RequestDocumentsComponent_Template","rf","ctx","ɵɵtemplate","RequestDocumentsComponent_ng_template_1_Template","RequestDocumentsComponent_ng_template_4_Template","RequestDocumentsComponent_ng_template_5_Template","RequestDocumentsComponent_ng_template_6_Template","RequestDocumentsComponent_Template_p_dialog_visibleChange_7_listener","$event","ɵɵpureFunction0","_c0","ɵɵstyleMap","_c1","ɵɵsanitizeUrl"],"sources":["C:\\Users\\Manav Gupta\\Downloads\\fms\\fms\\frontend\\fms_frontend\\src\\app\\ui\\Helpdesk\\work-request-details\\widgets\\request-documents\\modal\\request-documents.component.ts","C:\\Users\\Manav Gupta\\Downloads\\fms\\fms\\frontend\\fms_frontend\\src\\app\\ui\\Helpdesk\\work-request-details\\widgets\\request-documents\\modal\\request-documents.component.html"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { RequestDocumentsProvider } from '../provider/request-documents.provider';\nimport { ConfirmationService, MessageService } from 'primeng/api';\nimport { RequestDocumentsService } from '../services/request-documents.service';\nimport { UtilConstant } from 'src/common/UtilConstant';\nimport { DatePipe } from '@angular/common';\n\n@Component({\n  selector: 'app-request-documents',\n  templateUrl: './request-documents.component.html',\n  styleUrls: ['./request-documents.component.scss']\n})\nexport class RequestDocumentsComponent implements OnInit {\n\n  savedFiles: any[] = [];\n  rowCount: number = UtilConstant.ROW_COUNT;\n  requestId: any = 0;\n  isRequestor: boolean = false;\n  isApprover: boolean = false;\n  isTechnician: boolean = false;\n  isSupervisor: boolean = false;\n  displayImage: boolean = false;\n  src: any;\n  @Input() isReadOnly: boolean = false;\n\n  constructor(\n    private requestDocumentsProvider: RequestDocumentsProvider,\n    private messageService: MessageService,\n    private requestDocumentsService: RequestDocumentsService,\n    private confirmSerive: ConfirmationService,\n    private datePipe: DatePipe\n  ) { }\n\n  ngOnInit(): void {\n\n  }\n\n  onAddDocuments() {\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.disableClose = true;\n    dialogConfig.autoFocus = false;\n    dialogConfig.width = '600px';\n    dialogConfig.data = {\n      requestId: this.requestId,\n      // isView: false,\n      userChecks: { isRequestor: this.isRequestor, isApprover: this.isApprover, isSupervisor: this.isSupervisor, isTechnician: this.isTechnician }\n    }\n    this.requestDocumentsProvider.openDialog(dialogConfig);\n    this.requestDocumentsProvider.onDialogueClosed.subscribe((result: any) => {\n      this.messageService.clear();\n      if (result) {\n        this.messageService.add({ key: 'requestDoc', severity: 'success', summary: 'Record saved successfully', detail: 'Record saved successfully' });\n        this.loadDocumentsByRequest(this.requestId);\n      }\n    });\n  }\n\n  loadDocumentsByRequest(requestId: any) {\n    this.requestDocumentsService.getDocumentsById(parseInt(requestId)).subscribe((res: any) => {\n      if (res.length > 0) {\n        this.savedFiles = res.map((each: any)=>{\n          return{\n            ...each,\n            formatedDateAdded : this.datePipe.transform(each.dateAdded, 'd MMM yyyy')\n          }\n        });\n      } else {\n        this.savedFiles = [];\n      }\n    })\n  }\n\n  onDelete(id: any) {\n    this.confirmSerive.confirm({\n      message: 'Are you sure that you want to delete?',\n      header: 'Confirmation',\n      icon: 'pi pi-exclamation-triangle',\n      key: 'deleteDoc',\n      accept: () => {\n        this.deleteDocument(id)\n      },\n    });\n  }\n\n  deleteDocument(id: any) {\n    this.requestDocumentsService.deleteRequestDocument(id).subscribe((res: any) => {\n      if (res.code === 200) {\n        this.messageService.add({ key: 'requestDoc', severity: 'success', summary: 'Record deleted successfully', detail: 'Record deleted successfully' });\n        this.loadDocumentsByRequest(this.requestId);\n      }\n    })\n  }\n\n  showDocumentDialog(doc: any) {\n    if (doc.docType === 'png' || doc.docType === 'jpeg' || doc.docType === 'jpg') {\n      this.src = \"data:image/png;base64,\" + doc.documentContent;\n      this.displayImage = true;\n      return false;\n    } else {\n      const byteCharacters = atob(doc.documentContent);\n      const byteNumbers = new Array(byteCharacters.length);\n      for (let i = 0; i < byteCharacters.length; i++) {\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\n      }\n      const byteArray = new Uint8Array(byteNumbers);\n      let mimeType: string;\n\n      // Determine the MIME type based on the file extension or type\n      if (doc.docType === 'pdf') {\n        mimeType = 'application/pdf';\n      } else if (doc.docType === 'doc' || doc.docType === 'docx') {\n        mimeType = 'application/msword';\n      } else if (doc.docType === 'xlsx' || doc.docType === 'xls') {\n        mimeType = 'application/vnd.ms-excel';\n      } else if (doc.docType === 'ppt') {\n        mimeType = 'application/vnd.ms-powerpoint';\n      } else {\n        // Fallback to a generic binary file\n        mimeType = 'application/octet-stream';\n      }\n      const blob = new Blob([byteArray], { type: mimeType });\n      const url = URL.createObjectURL(blob);\n      const anchor = document.createElement('a');\n      anchor.href = url;\n      anchor.target = '_blank';\n      anchor.setAttribute('download', doc.documentName); // Set the download attribute to the desired filename\n      anchor.style.display = 'none';\n      document.body.appendChild(anchor);\n      anchor.click();\n      document.body.removeChild(anchor);\n      return false;\n    }\n  }\n\n}\n\n","<p-panel header=\" \">\n    <ng-template pTemplate=\"icons\">\n        <button pButton label=\"Add\" (click)=\"onAddDocuments()\" icon=\"pi pi-plus\"\n            [disabled]=\"isReadOnly || isTechnician\"></button>\n    </ng-template>\n    <div class=\"card\">\n        <p-table [value]=\"savedFiles\" [paginator]=\"true\" [rows]=\"rowCount\" [showCurrentPageReport]=\"true\"\n            currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} entries\"\n            [rowsPerPageOptions]=\"[5,10,25]\" styleClass=\"p-datatable-customers p-datatable-gridlines\" [rowHover]=\"true\"\n            [scrollable]=\"true\" selectionMode=\"single\">\n            <ng-template pTemplate=\"header\">\n                <tr>\n                    <th style=\"width:8rem\"></th>\n                    <th pSortableColumn=\"documentName\">\n                        <div class=\"grid-header-column\">\n                            <div class=\"grid-header-label\">\n                                <p class=\"grid-label-paragraph\">Document Name</p>\n                            </div>\n                            <div class=\"grid-sort-icon\">\n                                <p-sortIcon field=\"documentName\"></p-sortIcon>\n                                <p-columnFilter type=\"text\" field=\"documentName\"\n                                    display=\"menu\"></p-columnFilter>\n                            </div>\n                        </div>\n                    </th>\n                   <th pSortableColumn=\"docDescription\">\n                        <div class=\"grid-header-column\">\n                            <div class=\"grid-header-label\">\n                                <p class=\"grid-label-paragraph\">Description</p>\n                            </div>\n                            <div class=\"grid-sort-icon\">\n                                <p-sortIcon field=\"docDescription\"></p-sortIcon>\n                                <p-columnFilter type=\"text\" field=\"docDescription\"\n                                    display=\"menu\"></p-columnFilter>\n                            </div>\n                        </div>\n                    </th>\n                    <th pSortableColumn=\"formatedDateAdded\">\n                        <div class=\"grid-header-column\">\n                            <div class=\"grid-header-label\">\n                                <p class=\"grid-label-paragraph\">Date Added</p>\n                            </div>\n                            <div class=\"grid-sort-icon\">\n                                <p-sortIcon field=\"formatedDateAdded\"></p-sortIcon>\n                                <p-columnFilter type=\"text\" field=\"formatedDateAdded\"\n                                    display=\"menu\"></p-columnFilter>\n                            </div>\n                        </div>\n                    </th>\n\n                </tr>\n            </ng-template>\n            <ng-template pTemplate=\"body\" let-doc>\n                <tr [pSelectableRow]=\"doc\">\n                    <td style=\"width:8rem\">\n                        <button pButton pRipple type=\"button\" (click)=\"showDocumentDialog(doc)\" icon=\"pi pi-eye\"\n                            class=\"p-button-text\" style=\"font-size: 5rem;\">\n                        </button>\n                        <button pButton pRipple icon=\"pi pi-times\" type=\"button\" [disabled]=\"isTechnician\"\n                            (click)=\"onDelete(doc.requestDocId)\" class=\"p-button-text\"\n                            style=\"font-size: 5rem; color: red;\">\n                        </button>\n                    </td>\n                    <td>{{doc.documentName}}</td>\n                    <td>{{doc.docDescription}}</td>\n                    <td>{{(doc.dateAdded) | date:\"d MMM yyyy\"}}</td>\n                </tr>\n            </ng-template>\n            <ng-template pTemplate=\"emptymessage\" let-columns>\n                <tr>\n                    <td colspan=\"4\" style=\"text-align: center;\">\n                        No Records Found\n                    </td>\n                </tr>\n            </ng-template>\n        </p-table>\n    </div>\n</p-panel>\n<p-dialog header=\" \" [(visible)]=\"displayImage\" [style]=\"{width: '30vw'}\" [closable]=\"true\" [draggable]=\"false\"\n    [resizable]=\"false\" [modal]=\"true\">\n    <img [src]=\"src\" [alt]=\"\" width=\"90%\" height=\"90%\" />\n</p-dialog>\n<p-toast key=\"requestDoc\" position=\"top-right\"></p-toast>\n<p-confirmDialog key=\"deleteDoc\" header=\"Confirmation\" icon=\"pi pi-exclamation-triangle\"></p-confirmDialog>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}