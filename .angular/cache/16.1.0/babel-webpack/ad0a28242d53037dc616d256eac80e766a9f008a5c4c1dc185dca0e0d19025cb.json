{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { MessageService } from 'primeng/api';\nimport { UtilConstant } from 'src/common/UtilConstant';\nimport { BuildingFilterInput } from '../../background-loc/model/DTO/blFilterInput.model';\nimport { FLFilterInputDTO } from '../../background-loc/model/DTO/flFilterInput.model';\nimport { RMFilterInputDTO } from '../../background-loc/model/DTO/rmFilterInput.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../background-loc/services/bl.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../../Helpdesk/equipment/services/equipment.services\";\nimport * as i4 from \"../../ppm-plan/services/ppm-plan-services\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../ppm-schedule/services/plan-schedule-services\";\nimport * as i7 from \"ngx-spinner\";\nimport * as i8 from \"../../Helpdesk/trades/services/trades.services\";\nimport * as i9 from \"../../Helpdesk/parts/services/parts.service\";\nimport * as i10 from \"../../Helpdesk/tools/services/tools.services\";\nimport * as i11 from \"primeng/api\";\nimport * as i12 from \"primeng/accordion\";\nimport * as i13 from \"primeng/table\";\nimport * as i14 from \"primeng/calendar\";\nimport * as i15 from \"primeng/button\";\nimport * as i16 from \"primeng/dialog\";\nimport * as i17 from \"primeng/panel\";\nimport * as i18 from \"primeng/confirmdialog\";\nimport * as i19 from \"@ng-select/ng-select\";\nimport * as i20 from \"@angular/material/legacy-card\";\nimport * as i21 from \"../../common-components/trade-details/modal/trade-details.component\";\nimport * as i22 from \"../../common-components/part-details/modal/part-details.component\";\nimport * as i23 from \"../../Helpdesk/tools/widgets/add-tools/add-tools.component\";\nimport * as i24 from \"../widgets/forecast-plan-details/forecast-plan-details/forecast-plan-details.component\";\nimport * as i25 from \"@angular/material/tooltip\";\nfunction ForecastDetailsComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 45)(1, \"div\", 46)(2, \"label\", 14);\n    i0.ɵɵtext(3, \"Forecast\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ForecastDetailsComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 47);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.errorMsg);\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_th_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"Standard Hours\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_th_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"Available Quantity\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_th_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \" Required Hours\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_th_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"Required Quantity\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_th_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"Allocated Hours\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_th_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"Allocated Quantity\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelement(1, \"th\", 52);\n    i0.ɵɵelementStart(2, \"th\");\n    i0.ɵɵtext(3, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_th_4_Template, 2, 0, \"th\", 12);\n    i0.ɵɵtemplate(5, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_th_5_Template, 2, 0, \"th\", 12);\n    i0.ɵɵtemplate(6, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_th_6_Template, 2, 0, \"th\", 12);\n    i0.ɵɵtemplate(7, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_th_7_Template, 2, 0, \"th\", 12);\n    i0.ɵɵtemplate(8, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_th_8_Template, 2, 0, \"th\", 12);\n    i0.ɵɵtemplate(9, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_th_9_Template, 2, 0, \"th\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const title_r16 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id != \"Parts\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id == \"Parts\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id != \"Parts\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id == \"Parts\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id != \"Parts\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id == \"Parts\");\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_td_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r27 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(type_r27.availableHours);\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_td_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r27 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(type_r27.availableQuantity);\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r27 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(type_r27.requiredHours);\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r27 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(type_r27.requiredQuantity);\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r27 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(type_r27.hoursInUse);\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r27 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(type_r27.inUseQuantity);\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 53);\n    i0.ɵɵlistener(\"click\", function ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_Template_tr_click_0_listener() {\n      i0.ɵɵrestoreView(_r41);\n      const ctx_r40 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r40.getPlanDetails());\n    });\n    i0.ɵɵelementStart(1, \"td\", 52)(2, \"button\", 54);\n    i0.ɵɵlistener(\"click\", function ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const type_r27 = restoredCtx.$implicit;\n      const title_r16 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r42 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r42.onClickDetails(type_r27, title_r16.id));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_td_5_Template, 2, 1, \"td\", 12);\n    i0.ɵɵtemplate(6, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_td_6_Template, 2, 1, \"td\", 12);\n    i0.ɵɵtemplate(7, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_td_7_Template, 2, 1, \"td\", 12);\n    i0.ɵɵtemplate(8, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_td_8_Template, 2, 1, \"td\", 12);\n    i0.ɵɵtemplate(9, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_td_9_Template, 2, 1, \"td\", 12);\n    i0.ɵɵtemplate(10, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_td_10_Template, 2, 1, \"td\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r27 = ctx.$implicit;\n    const title_r16 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵproperty(\"pSelectableRow\", type_r27);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(type_r27.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id != \"Parts\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id == \"Parts\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id != \"Parts\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id == \"Parts\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id != \"Parts\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id == \"Parts\");\n  }\n}\nconst _c0 = function () {\n  return [5, 10, 25];\n};\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p-table\", 51);\n    i0.ɵɵtemplate(2, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_2_Template, 10, 6, \"ng-template\", 0);\n    i0.ɵɵtemplate(3, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_ng_template_3_Template, 11, 8, \"ng-template\", 36);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r17.cardData)(\"rowHover\", true)(\"rows\", 5)(\"paginator\", true)(\"showCurrentPageReport\", true)(\"scrollable\", true)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(7, _c0));\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-accordionTab\", 50);\n    i0.ɵɵtemplate(1, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_div_1_Template, 4, 8, \"div\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const title_r16 = ctx.$implicit;\n    i0.ɵɵproperty(\"header\", title_r16.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", title_r16.id != null);\n  }\n}\nfunction ForecastDetailsComponent_p_accordion_72_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r46 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-accordion\", 48);\n    i0.ɵɵlistener(\"onOpen\", function ForecastDetailsComponent_p_accordion_72_Template_p_accordion_onOpen_0_listener($event) {\n      i0.ɵɵrestoreView(_r46);\n      const ctx_r45 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r45.onTabOpen($event));\n    });\n    i0.ɵɵtemplate(1, ForecastDetailsComponent_p_accordion_72_p_accordionTab_1_Template, 2, 2, \"p-accordionTab\", 49);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.cardTitles);\n  }\n}\nfunction ForecastDetailsComponent_ng_template_76_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 55)(2, \"div\", 56)(3, \"div\", 57)(4, \"p\", 58);\n    i0.ɵɵtext(5, \"Requested Date \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 59);\n    i0.ɵɵelement(7, \"p-sortIcon\", 60)(8, \"p-columnFilter\", 61);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"th\", 62)(10, \"div\", 56)(11, \"div\", 57)(12, \"p\", 58);\n    i0.ɵɵtext(13, \"Date To Respond\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 59);\n    i0.ɵɵelement(15, \"p-sortIcon\", 63)(16, \"p-columnFilter\", 64);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"th\", 62)(18, \"div\", 56)(19, \"div\", 57)(20, \"p\", 58);\n    i0.ɵɵtext(21, \"Date To Perform\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"div\", 59);\n    i0.ɵɵelement(23, \"p-sortIcon\", 63)(24, \"p-columnFilter\", 64);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(25, \"th\", 65)(26, \"div\", 56)(27, \"div\", 57)(28, \"p\", 58);\n    i0.ɵɵtext(29, \"Date To Complete\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"div\", 59);\n    i0.ɵɵelement(31, \"p-sortIcon\", 66)(32, \"p-columnFilter\", 67);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(33, \"th\", 68)(34, \"div\", 56)(35, \"div\", 57)(36, \"p\", 58);\n    i0.ɵɵtext(37, \"Building\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(38, \"div\", 59);\n    i0.ɵɵelement(39, \"p-sortIcon\", 69)(40, \"p-columnFilter\", 70);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(41, \"th\", 71)(42, \"div\", 56)(43, \"div\", 57)(44, \"p\", 58);\n    i0.ɵɵtext(45, \"Floor\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(46, \"div\", 59);\n    i0.ɵɵelement(47, \"p-sortIcon\", 72)(48, \"p-columnFilter\", 73);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(49, \"th\", 74)(50, \"div\", 56)(51, \"div\", 57)(52, \"p\", 58);\n    i0.ɵɵtext(53, \"Room \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(54, \"div\", 59);\n    i0.ɵɵelement(55, \"p-sortIcon\", 75)(56, \"p-columnFilter\", 76);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(57, \"th\", 77)(58, \"div\", 56)(59, \"div\", 57)(60, \"p\", 58);\n    i0.ɵɵtext(61, \"Asset \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(62, \"div\", 59);\n    i0.ɵɵelement(63, \"p-sortIcon\", 78)(64, \"p-columnFilter\", 79);\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction ForecastDetailsComponent_ng_template_77_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 80)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const wr_r47 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"pSelectableRow\", wr_r47);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(3, 12, wr_r47.dateRequested, \"dd MMM yyyy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(6, 15, wr_r47.escDateResponded, \"dd MMM yyyy\"), \" \", ctx_r5.convertToDisplayTime(wr_r47.escTimeResponded), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(9, 18, wr_r47.dateToPerform, \"dd MMM yyyy\"), \" \", ctx_r5.convertToDisplayTime(wr_r47.escTimeResponded), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(12, 21, wr_r47.escDateCompleted, \"dd MMM yyyy\"), \" \", ctx_r5.convertToDisplayTime(wr_r47.escTimeCompleted), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(wr_r47.building);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(wr_r47.floor);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(wr_r47.room);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(wr_r47.eqCode);\n  }\n}\nfunction ForecastDetailsComponent_ng_template_78_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \" No records found. \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"colspan\", 8);\n  }\n}\nfunction ForecastDetailsComponent_ng_template_79_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r50 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 81);\n    i0.ɵɵlistener(\"click\", function ForecastDetailsComponent_ng_template_79_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r50);\n      const ctx_r49 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r49.displayRequestList = false);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c1 = function () {\n  return {\n    width: \"40vw\"\n  };\n};\nfunction ForecastDetailsComponent_p_dialog_80_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r52 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-dialog\", 82);\n    i0.ɵɵlistener(\"visibleChange\", function ForecastDetailsComponent_p_dialog_80_Template_p_dialog_visibleChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r52);\n      const ctx_r51 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r51.showTradeDetails = $event);\n    });\n    i0.ɵɵelement(1, \"app-trade-details\", 83);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c1));\n    i0.ɵɵproperty(\"visible\", ctx_r8.showTradeDetails)(\"modal\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"selectedTrade\", ctx_r8.selectedTrade);\n  }\n}\nconst _c2 = function () {\n  return {\n    width: \"32vw\"\n  };\n};\nfunction ForecastDetailsComponent_p_dialog_81_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r54 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-dialog\", 84);\n    i0.ɵɵlistener(\"visibleChange\", function ForecastDetailsComponent_p_dialog_81_Template_p_dialog_visibleChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r54);\n      const ctx_r53 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r53.showPartDetails = $event);\n    });\n    i0.ɵɵelement(1, \"app-part-details\", 85);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c2));\n    i0.ɵɵproperty(\"visible\", ctx_r9.showPartDetails)(\"modal\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"selectedPart\", ctx_r9.selectedPart);\n  }\n}\nconst _c3 = function () {\n  return {\n    width: \"35vw\"\n  };\n};\nfunction ForecastDetailsComponent_p_dialog_82_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r56 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-dialog\", 86);\n    i0.ɵɵlistener(\"visibleChange\", function ForecastDetailsComponent_p_dialog_82_Template_p_dialog_visibleChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r56);\n      const ctx_r55 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r55.showToolDetails = $event);\n    });\n    i0.ɵɵelementStart(1, \"form\", 87)(2, \"mat-card\")(3, \"mat-card-content\", 88);\n    i0.ɵɵelement(4, \"app-add-tools\", 89);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c3));\n    i0.ɵɵproperty(\"visible\", ctx_r10.showToolDetails)(\"modal\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r10.frmToolsDetail);\n  }\n}\nfunction ForecastDetailsComponent_ng_template_85_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\");\n    i0.ɵɵtext(1, \"Message\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForecastDetailsComponent_ng_template_86_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r58 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 90);\n    i0.ɵɵlistener(\"click\", function ForecastDetailsComponent_ng_template_86_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r58);\n      i0.ɵɵnextContext();\n      const _r11 = i0.ɵɵreference(84);\n      return i0.ɵɵresetView(_r11.accept());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForecastDetailsComponent_p_dialog_87_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r60 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-dialog\", 91);\n    i0.ɵɵlistener(\"visibleChange\", function ForecastDetailsComponent_p_dialog_87_Template_p_dialog_visibleChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r60);\n      const ctx_r59 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r59.showPlanDetails = $event);\n    });\n    i0.ɵɵelement(1, \"app-forecast-plan-details\", 92);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"visible\", ctx_r14.showPlanDetails)(\"modal\", true)(\"draggable\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"planData\", ctx_r14.planData);\n  }\n}\nconst _c4 = function () {\n  return {\n    width: \"70vw\"\n  };\n};\nconst _c5 = function () {\n  return {\n    width: \"20vw\"\n  };\n};\nexport let ForecastDetailsComponent = /*#__PURE__*/(() => {\n  class ForecastDetailsComponent {\n    constructor(blService, formBuilder, eqService, ppmPlanService, datePipe, planScheduleSrv, spinner, tradeService, partsService, toolsService, confirmationService) {\n      this.blService = blService;\n      this.formBuilder = formBuilder;\n      this.eqService = eqService;\n      this.ppmPlanService = ppmPlanService;\n      this.datePipe = datePipe;\n      this.planScheduleSrv = planScheduleSrv;\n      this.spinner = spinner;\n      this.tradeService = tradeService;\n      this.partsService = partsService;\n      this.toolsService = toolsService;\n      this.confirmationService = confirmationService;\n      this.enumBL = [];\n      this.enumAllBl = [];\n      this.enumFL = [];\n      this.enumRM = [];\n      this.enumAllEquipment = [];\n      this.enumEquipment = [];\n      this.enumAllFL = [];\n      this.allRmDdata = [];\n      this.rm_data = [];\n      this.eqData = [];\n      this.planList = [];\n      this.errorMsg = '';\n      this.today = new Date();\n      this.requestsList = [];\n      this.rowCount = UtilConstant.ROW_COUNT;\n      this.tradeHoursMap = {};\n      this.toolHoursMap = {};\n      this.partQuantityMap = {};\n      this.displayRequestList = false;\n      this.showTradeDetails = false;\n      this.tradeList = [];\n      this.showPartDetails = false;\n      this.partsList = [];\n      this.showToolDetails = false;\n      this.toolsList = [];\n      this.cardTitles = [{\n        id: \"Trades\"\n      }, {\n        id: \"Tools\"\n      }, {\n        id: \"Parts\"\n      }];\n      this.cardData = [];\n      this.isReload = false;\n      this.planData = [];\n      this.showPlanDetails = false;\n      this.filterPanel = this.formBuilder.group({\n        blId: [null],\n        flId: [null],\n        rmId: [null],\n        eqId: [null],\n        planId: [null],\n        fromDate: [null, [Validators.required, this.checkDateValidation()]],\n        toDate: [null, [Validators.required, this.checkDateValidation()]]\n      });\n      this.frmToolsDetail = this.formBuilder.group({\n        toolsFormPanel: []\n      });\n    }\n    ngOnInit() {\n      this.loadBuilding();\n      this.loadFloors();\n      this.loadRooms();\n      this.loadequipments();\n      this.loadPlansData();\n      let month = new Date().getMonth();\n      this.maxDate = new Date(new Date().setMonth(month + 6));\n      var date = new Date();\n      var nextDate = new Date(new Date().setMonth(month + 1));\n      this.setDefaultDates(date, nextDate);\n      this.loadTrades();\n      this.loadParts();\n      this.loadTools();\n    }\n    setDefaultDates(fromDate, toDate) {\n      setTimeout(() => {\n        this.filterPanel.patchValue({\n          fromDate: fromDate,\n          toDate: toDate\n        });\n      }, 0);\n    }\n    loadBuilding() {\n      this.blService.getALLBuilding().subscribe(res => {\n        this.enumAllBl = res;\n        this.enumAllBl = res.map(i => {\n          i.name = i.blNameString;\n          return i;\n        });\n        this.enumAllBl.unshift(new BuildingFilterInput('', 'Make a selection', '', 0));\n        this.enumBL = this.enumAllBl;\n      });\n    }\n    loadFloors() {\n      this.blService.getALLFloor().subscribe(res => {\n        this.enumAllFL = res;\n        this.enumAllFL = res.map(i => {\n          i.name = i.flNameString;\n          return i;\n        });\n        this.enumAllFL.unshift(new FLFilterInputDTO('', 'Make a selection', '', 0));\n        this.enumFL = this.enumAllFL;\n      });\n    }\n    loadRooms() {\n      this.blService.getALLRoom().subscribe(res => {\n        this.allRmDdata = res;\n        this.allRmDdata = res.map(i => {\n          i.name = i.rmNameString;\n          return i;\n        });\n        this.allRmDdata.unshift(new RMFilterInputDTO('', 'Make a selection', '', '', 0));\n        this.rm_data = this.allRmDdata;\n      });\n    }\n    loadTrades() {\n      this.tradeService.getAllTrades().subscribe(res => {\n        this.tradeList = res;\n      });\n    }\n    loadParts() {\n      this.partsService.getAllParts().subscribe(res => {\n        this.partsList = res;\n      });\n    }\n    loadTools() {\n      this.toolsService.getAllTools().subscribe(res => {\n        this.toolsList = res;\n      });\n    }\n    onSelectBlCode($event) {\n      if ($event.id != null && $event.id != '') {\n        setTimeout(() => {\n          this.filterPanel.patchValue({\n            flId: null,\n            rmId: null,\n            siteId: $event.siteId,\n            eqId: null\n          });\n          this.filterFloorCode($event.id);\n          this.filterAssets($event.id, null, null);\n        }, 0);\n      } else {\n        this.enumFL = this.enumAllFL;\n        this.filterAssets(null, null, null);\n        setTimeout(() => {\n          this.filterPanel.patchValue({\n            flId: null,\n            rmId: null,\n            blId: null,\n            eqId: null\n          });\n        }, 0);\n      }\n      this.enumBL.unshift(new BuildingFilterInput('Make a selection', '', '', 0));\n    }\n    filterFloorCode(bl_id) {\n      if (bl_id != null) {\n        this.enumFL = [];\n        this.enumFL = this.enumAllFL.filter(t => t.blId == bl_id);\n        this.enumFL.unshift(new FLFilterInputDTO('', 'Make a selection', '', 0));\n        this.rm_data = this.allRmDdata.filter(t => t.blId == bl_id);\n        this.rm_data.unshift(new RMFilterInputDTO('', 'Make a selection', '', '', 0));\n      }\n    }\n    onSelectFlCode($event) {\n      if ($event.id != null && $event.id != '') {\n        setTimeout(() => {\n          this.filterPanel.patchValue({\n            blId: $event.blId,\n            rmId: null,\n            eqId: null\n          });\n          this.filterRmCode($event.id, $event.blId);\n          this.filterAssets($event.blId, $event.id, null);\n        }, 10);\n      } else {\n        setTimeout(() => {\n          this.filterPanel.patchValue({\n            rmId: null,\n            flId: null,\n            eqId: null\n          });\n        }, 0);\n        this.enumFL = this.enumAllFL;\n        this.filterAssets(null, null, null);\n      }\n      this.rm_data = this.allRmDdata;\n    }\n    filterRmCode(flId, blId) {\n      if (flId != null) {\n        this.rm_data = [];\n        this.rm_data = this.allRmDdata.filter(t => t.blId == blId);\n        this.rm_data = this.rm_data.filter(t => t.flId == flId);\n        this.rm_data.unshift(new RMFilterInputDTO('', 'Make a selection', '', '', 0));\n      }\n    }\n    onSelectRmCode($event) {\n      if ($event.id != null && $event.id != '') {\n        setTimeout(() => {\n          this.filterPanel.patchValue({\n            blId: $event.blId,\n            flId: $event.flId,\n            eqId: null\n          });\n        }, 0);\n        this.filterAssets($event.blId, $event.flId, $event.id);\n      } else {\n        setTimeout(() => {\n          this.filterPanel.patchValue({\n            rmId: null,\n            eqId: null\n          });\n          this.filterAssets(null, null, null);\n        }, 0);\n      }\n    }\n    onSelectAsset($event) {\n      if ($event.eqId != null && $event.eqId != '') {\n        setTimeout(() => {\n          this.filterPanel.patchValue({\n            blId: $event.blId,\n            flId: $event.flId,\n            rmId: $event.rmId\n          });\n        }, 0);\n      } else {\n        setTimeout(() => {\n          this.filterPanel.patchValue({\n            blId: null,\n            flId: null,\n            rmId: null\n          });\n        }, 0);\n      }\n    }\n    filterAssets(blId, flId, rmId) {\n      this.enumEquipment = this.enumAllEquipment;\n      blId ? this.enumEquipment = this.enumAllEquipment.filter(asset => asset.blId == blId) : '';\n      flId ? this.enumEquipment = this.enumEquipment.filter(asset => asset.blId == blId && asset.flId == flId) : '';\n      rmId ? this.enumEquipment = this.enumEquipment.filter(asset => asset.blId == blId && asset.flId == flId && asset.rmId == rmId) : '';\n      //this.enumEquipment.unshift(new Object({ eqId: \"Make a selection\", description: '', compId: 1 }))\n    }\n\n    loadequipments() {\n      this.eqService.getAllEquipments().subscribe(res => {\n        if (res.status != 202) {\n          this.enumAllEquipment = res;\n          this.enumEquipment = this.enumAllEquipment;\n          this.enumEquipment.unshift(new Object({\n            eqId: \"Make a selection\",\n            description: '',\n            compId: 1\n          }));\n        }\n      });\n    }\n    loadPlansData() {\n      this.ppmPlanService.getAllPlans().subscribe(res => {\n        if (res.status != 202) {\n          this.planList = res;\n          this.planList.unshift(new Object({\n            planId: null,\n            planName: \"Make a selection\"\n          }));\n        } else {\n          this.planList = [];\n        }\n      });\n    }\n    checkDateValidation() {\n      return control => {\n        if (control.value !== undefined && control.value != null) {\n          this.errorMsg = '';\n          this.filterPanel.controls['fromDate'].setErrors(null);\n          this.filterPanel.controls['toDate'].setErrors(null);\n          this.filterPanel.clearAsyncValidators();\n          this.filterPanel.updateValueAndValidity();\n          var dateFrom = new Date(this.filterPanel.controls['fromDate'].value);\n          var dateTo = new Date(this.filterPanel.controls['toDate'].value);\n          if (dateFrom.getTime() > dateTo.getTime() && this.filterPanel.controls['toDate'].value != null) {\n            this.filterPanel.controls['fromDate'].setErrors({\n              'incorrect': true\n            });\n            this.filterPanel.updateValueAndValidity();\n            this.errorMsg = ' date end should be greater than date start.';\n            return {\n              'incorrect': true\n            };\n          } else {\n            return null;\n          }\n        }\n        return null;\n      };\n    }\n    onSearch() {\n      this.spinner.show();\n      this.filterData = {\n        blId: this.filterPanel.controls.blId.value,\n        flId: this.filterPanel.controls.flId.value,\n        rmId: this.filterPanel.controls.rmId.value,\n        eqId: this.filterPanel.controls.eqId.value,\n        planId: this.filterPanel.controls.planId.value ? this.filterPanel.controls.planId.value : 0,\n        fromDate: this.datePipe.transform(this.filterPanel.controls.fromDate.value, \"yyyy-MM-dd\"),\n        toDate: this.datePipe.transform(this.filterPanel.controls.toDate.value, \"yyyy-MM-dd\")\n      };\n      this.requestsList = [];\n      this.isReload = false;\n      this.planScheduleSrv.getForecastDetails(this.filterData).subscribe(res => {\n        // if (res.forecastDetails.length == 0) {\n        //   this.noRequestsFoundAlert();\n        // } else {\n        //   this.requestsList = res.forecastDetails;\n        //   this.getCompleteDetails(res);\n        // }\n        this.requestsList = res.requestsList;\n        this.finalObject = res;\n        this.isReload = true;\n        this.spinner.hide();\n      });\n    }\n    onClickRequest() {\n      this.displayRequestList = true;\n    }\n    convertToDisplayTime(value) {\n      if (value != null) {\n        var data = value.split(':');\n        var time = data[0] + ':' + data[1];\n        return time;\n      } else {\n        return '';\n      }\n    }\n    onClickDetails(type, title) {\n      if (title == \"Trades\") {\n        this.selectedTrade = this.getSelectedTrade(type.id);\n        this.showTradeDetails = true;\n      } else if (title == \"Parts\") {\n        this.selectedPart = this.getSelectedPart(type.id);\n        this.showPartDetails = true;\n      } else {\n        let selectedTool = this.getSelectedTool(type.id);\n        this.setToolForm(selectedTool);\n        this.showToolDetails = true;\n      }\n    }\n    getSelectedTrade(tradeId) {\n      let selectedTrade = this.tradeList.find(t => t.tradeId === tradeId);\n      if (selectedTrade) {\n        return selectedTrade;\n      }\n    }\n    getSelectedPart(partCode) {\n      let selectedPart = this.partsList.find(t => t.partCode === partCode);\n      if (selectedPart) {\n        return selectedPart;\n      }\n    }\n    getSelectedTool(toolId) {\n      let selectedTool = this.toolsList.find(t => t.tool === toolId);\n      if (selectedTool) {\n        return selectedTool;\n      }\n    }\n    setToolForm(value) {\n      setTimeout(() => {\n        this.frmToolsDetail.patchValue({\n          toolsFormPanel: value\n        });\n      }, 0);\n    }\n    getCompleteDetails(data) {\n      const trades = {};\n      const parts = {};\n      const tools = {};\n      // Aggregate forecastDetails for trades, parts, and tools\n      data.forecastDetails.forEach(forecast => {\n        forecast.planTradeList.forEach(trade => {\n          trades[trade.tradeId] = trades[trade.tradeId] || {\n            id: trade.tradeId,\n            requiredHours: 0,\n            hoursInUse: 0,\n            availableHours: 0\n          };\n          trades[trade.tradeId].requiredHours += trade.hoursRequired;\n        });\n        forecast.planToolList.forEach(tool => {\n          tools[tool.toolId] = tools[tool.toolId] || {\n            id: tool.toolId,\n            requiredHours: 0,\n            hoursInUse: 0,\n            availableHours: 0\n          };\n          tools[tool.toolId].requiredHours += tool.hoursRequired;\n        });\n        forecast.planPartsList.forEach(part => {\n          parts[part.partId] = parts[part.partId] || {\n            id: part.partId,\n            requiredQuantity: 0,\n            inUseQuantity: 0,\n            availableQuantity: 0\n          };\n          parts[part.partId].requiredQuantity += part.qunatityRequired;\n        });\n      });\n      // Aggregate actualDetails for trades, parts, and tools\n      data.actualDetails.forEach(each => {\n        each.trade.forEach(trade => {\n          trades[trade.id] = trades[trade.id] || {\n            id: trade.id,\n            requiredHours: 0,\n            hoursInUse: 0,\n            availableHours: 0\n          };\n          trades[trade.id].availableHours += parseFloat(trade.availableCount);\n          trades[trade.id].hoursInUse += parseFloat(trade.count);\n        });\n        each.part.forEach(part => {\n          parts[part.id] = parts[part.id] || {\n            id: part.id,\n            requiredQuantity: 0,\n            inUseQuantity: 0,\n            availableQuantity: 0\n          };\n          parts[part.id].availableQuantity += parseFloat(part.availableCount);\n          parts[part.id].inUseQuantity += parseFloat(part.count);\n        });\n        each.tool.forEach(tool => {\n          tools[tool.id] = tools[tool.id] || {\n            id: tool.id,\n            requiredHours: 0,\n            hoursInUse: 0,\n            availableHours: 0\n          };\n          tools[tool.id].availableHours += parseFloat(tool.availableCount);\n          tools[tool.id].hoursInUse += parseFloat(tool.count);\n        });\n      });\n      // Construct the final object\n      this.finalObject = {\n        Trades: Object.entries(trades).map(([name, {\n          id,\n          requiredHours,\n          hoursInUse,\n          availableHours\n        }]) => ({\n          name,\n          id,\n          requiredHours,\n          hoursInUse,\n          availableHours\n        })),\n        Parts: Object.entries(parts).map(([name, {\n          id,\n          requiredQuantity,\n          inUseQuantity,\n          availableQuantity\n        }]) => ({\n          name,\n          id,\n          requiredQuantity,\n          inUseQuantity,\n          availableQuantity\n        })),\n        Tools: Object.entries(tools).map(([name, {\n          id,\n          requiredHours,\n          hoursInUse,\n          availableHours\n        }]) => ({\n          name,\n          id,\n          requiredHours,\n          hoursInUse,\n          availableHours\n        }))\n      };\n      this.isReload = true;\n      this.spinner.hide();\n      console.log(this.finalObject);\n    }\n    noRequestsFoundAlert() {\n      this.confirmationService.confirm({\n        message: UtilConstant.NO_REQUESTS_FOUND,\n        header: 'Confirmation',\n        icon: 'pi pi-exclamation-triangle',\n        key: 'noReqFound',\n        accept: () => {\n          this.onClear();\n        }\n      });\n    }\n    onClear() {\n      this.filterPanel.reset();\n      this.requestsList = [];\n      this.tradeHoursMap = {};\n      this.toolHoursMap = {};\n      this.partQuantityMap = {};\n      this.isReload = false;\n    }\n    onTabOpen(event) {\n      this.cardData = [];\n      var selectedTab = this.cardTitles[event.index];\n      switch (selectedTab.id) {\n        case 'Trades':\n          this.cardData = this.finalObject.Trades.map(trade => {\n            // this.selectedTrade = this.getSelectedTrade(trade.id);\n            trade.availableHours = trade.standardHours;\n            return trade;\n          });\n          break;\n        case 'Parts':\n          this.cardData = this.finalObject.Parts.map(part => {\n            this.selectedPart = this.getSelectedPart(part.id);\n            part.availableQuantity = this.selectedPart.qutOnHand;\n            return part;\n          });\n          break;\n        case 'Tools':\n          this.cardData = this.finalObject.Tools.map(tool => {\n            let selectedTool = this.getSelectedTool(tool.id);\n            tool.availableHours = selectedTool.standardAvalTime * this.getNumberOfDays(this.filterData.fromDate, this.filterData.toDate);\n            return tool;\n          });\n          break;\n        default:\n          this.cardData = [];\n          break;\n      }\n    }\n    getNumberOfDays(from, to) {\n      var date1 = new Date(from);\n      var date2 = new Date(to);\n      // To calculate the time difference of two dates\n      var Difference_In_Time = date2.getTime() - date1.getTime();\n      // To calculate the no. of days between two dates\n      var Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);\n      return Difference_In_Days + 1; //return including both days\n    }\n\n    getPlanDetails() {\n      this.showPlanDetails = false;\n      this.planScheduleSrv.getForecastPlanDetails(this.filterData).subscribe(res => {\n        this.planData = res;\n        this.showPlanDetails = true;\n      });\n    }\n    static #_ = this.ɵfac = function ForecastDetailsComponent_Factory(t) {\n      return new (t || ForecastDetailsComponent)(i0.ɵɵdirectiveInject(i1.BuildingService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.EquipmentService), i0.ɵɵdirectiveInject(i4.PpmPlanService), i0.ɵɵdirectiveInject(i5.DatePipe), i0.ɵɵdirectiveInject(i6.PlanScheduleService), i0.ɵɵdirectiveInject(i7.NgxSpinnerService), i0.ɵɵdirectiveInject(i8.TradesService), i0.ɵɵdirectiveInject(i9.PartsService), i0.ɵɵdirectiveInject(i10.ToolsService), i0.ɵɵdirectiveInject(i11.ConfirmationService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ForecastDetailsComponent,\n      selectors: [[\"app-forecast-details\"]],\n      features: [i0.ɵɵProvidersFeature([MessageService])],\n      decls: 88,\n      vars: 51,\n      consts: [[\"pTemplate\", \"header\"], [2, \"display\", \"flex\"], [1, \"card\", 2, \"width\", \"25%\"], [3, \"formGroup\"], [\"width\", \"100%\"], [2, \"width\", \"25%\"], [1, \"input-label-custom\"], [1, \"p-fluid\"], [1, \"p-field\"], [1, \"form-field-lable\", \"control-label\"], [\"appendTo\", \"body\", \"dateFormat\", \"dd M yy\", \"name\", \"date\", \"formControlName\", \"fromDate\", \"inputId\", \"icon\", 3, \"minDate\", \"showIcon\"], [\"appendTo\", \"body\", \"dateFormat\", \"dd M yy\", \"name\", \"date\", \"formControlName\", \"toDate\", \"inputId\", \"icon\", 3, \"showIcon\", \"minDate\", \"maxDate\"], [4, \"ngIf\"], [\"width\", \"25%\"], [1, \"form-field-lable\"], [\"appendTo\", \"body\", \"placeholder\", \"Make a selection\", \"formControlName\", \"blId\", \"bindLabel\", \"name\", \"bindValue\", \"id\", 1, \"ng-select-dropdown\", 3, \"clearable\", \"searchable\", \"items\", \"change\"], [\"appendTo\", \"body\", \"placeholder\", \"Make a selection\", \"formControlName\", \"flId\", \"bindLabel\", \"name\", \"bindValue\", \"id\", 1, \"ng-select-dropdown\", 3, \"clearable\", \"searchable\", \"items\", \"change\"], [\"appendTo\", \"body\", \"placeholder\", \"Make a selection\", \"formControlName\", \"rmId\", \"bindLabel\", \"name\", \"bindValue\", \"id\", 1, \"ng-select-dropdown\", 3, \"clearable\", \"searchable\", \"items\", \"change\"], [\"appendTo\", \"body\", \"placeholder\", \"Make a selection\", \"bindLabel\", \"eqId\", \"bindValue\", \"eqId\", \"formControlName\", \"eqId\", 1, \"ng-select-dropdown\", 3, \"items\", \"clearable\", \"searchable\", \"change\"], [\"appendTo\", \"body\", \"formControlName\", \"planId\", \"bindLabel\", \"planName\", \"bindValue\", \"planId\", \"placeholder\", \"Make a selection\", 1, \"ng-select-dropdown\", 3, \"clearable\", \"items\", \"searchable\"], [1, \"input-label-custom\", 2, \"display\", \"flex\", \"flex-direction\", \"row\", \"justify-content\", \"end\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Clear\", 1, \"p-button-primary\", \"p-button-sm\", \"pull-right\", 2, \"width\", \"60px\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Forecast\", 1, \"p-button-primary\", \"p-button-sm\", 2, \"width\", \"60px\", \"margin\", \"0px 5px 0px 10px\", 3, \"disabled\", \"click\"], [1, \"card\", 2, \"width\", \"75%\"], [1, \"row\", 3, \"click\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-content\", \"hover-pointer\", 2, \"display\", \"flex\"], [1, \"card-content-title\"], [\"id\", \"requestCount\", 2, \"margin-right\", \"10px\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-info-circle\", \"matTooltip\", \"View Part Details\", 1, \"p-button-rounded\", \"pull-right\", 2, \"margin-top\", \"1.5px\", 3, \"hidden\", \"click\"], [1, \"row\"], [3, \"onOpen\", 4, \"ngIf\"], [\"header\", \"Requests List\", 3, \"visible\", \"modal\", \"maximizable\", \"draggable\", \"resizable\", \"closable\", \"visibleChange\"], [\"scrollDirection\", \"both\", \"scrollHeight\", \"500px\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", \"styleClass\", \"p-datatable-customers p-datatable-gridlines\", 3, \"value\", \"paginator\", \"rows\", \"scrollable\", \"showCurrentPageReport\", \"rowsPerPageOptions\", \"rowHover\"], [\"tt\", \"\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [\"pTemplate\", \"footer\"], [\"id\", \"Trade Details\", 3, \"visible\", \"style\", \"modal\", \"visibleChange\", 4, \"ngIf\"], [\"header\", \"Part Details\", 3, \"visible\", \"style\", \"modal\", \"visibleChange\", 4, \"ngIf\"], [\"header\", \"Tool Details\", 3, \"visible\", \"style\", \"modal\", \"visibleChange\", 4, \"ngIf\"], [\"key\", \"noReqFound\"], [\"cd\", \"\"], [\"header\", \"Plans\", 3, \"visible\", \"modal\", \"draggable\", \"visibleChange\", 4, \"ngIf\"], [1, \"header-container\"], [1, \"header-label\"], [1, \"form-field-lable\", 2, \"color\", \"red\"], [3, \"onOpen\"], [3, \"header\", 4, \"ngFor\", \"ngForOf\"], [3, \"header\"], [\"selectionMode\", \"single\", \"styleClass\", \"p-datatable-responsive-demo p-datatable-gridlines\", \"scrollDirection\", \"both\", \"scrollHeight\", \"500px\", 3, \"value\", \"rowHover\", \"rows\", \"paginator\", \"showCurrentPageReport\", \"scrollable\", \"rowsPerPageOptions\"], [2, \"width\", \"1rem\"], [3, \"pSelectableRow\", \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-info-circle\", \"matTooltip\", \"View Part Details\", 1, \"p-button-rounded\", \"pull-right\", 3, \"click\"], [\"pSortableColumn\", \"dateRequested\"], [1, \"grid-header-column\"], [1, \"grid-header-label\"], [1, \"grid-label-paragraph\"], [1, \"grid-sort-icon\"], [\"field\", \"dateRequested\"], [\"type\", \"text\", \"field\", \"dateRequested\", \"display\", \"menu\"], [\"pSortableColumn\", \"escDateResponded\"], [\"field\", \"escDateResponded\"], [\"type\", \"text\", \"field\", \"escDateResponded\", \"display\", \"menu\"], [\"pSortableColumn\", \"escDateCompleted\"], [\"field\", \"escDateCompleted\"], [\"type\", \"text\", \"field\", \"escDateCompleted\", \"display\", \"menu\"], [\"pSortableColumn\", \"building\"], [\"field\", \"building\"], [\"type\", \"text\", \"field\", \"building\", \"display\", \"menu\"], [\"pSortableColumn\", \"floor\"], [\"field\", \"floor\"], [\"type\", \"text\", \"field\", \"floor\", \"display\", \"menu\"], [\"pSortableColumn\", \"room\"], [\"field\", \"room\"], [\"type\", \"text\", \"field\", \"room\", \"display\", \"menu\"], [\"pSortableColumn\", \"eqCode\"], [\"field\", \"eqCode\"], [\"type\", \"text\", \"field\", \"eqCode\", \"display\", \"menu\"], [3, \"pSelectableRow\"], [\"icon\", \"pi pi-times\", \"pButton\", \"\", \"label\", \"Close\", \"styleClass\", \"p-button-text\", 3, \"click\"], [\"id\", \"Trade Details\", 3, \"visible\", \"modal\", \"visibleChange\"], [3, \"selectedTrade\"], [\"header\", \"Part Details\", 3, \"visible\", \"modal\", \"visibleChange\"], [3, \"selectedPart\"], [\"header\", \"Tool Details\", 3, \"visible\", \"modal\", \"visibleChange\"], [1, \"disabled-form\", 3, \"formGroup\"], [\"id\", \"tool\"], [\"formControlName\", \"toolsFormPanel\"], [\"type\", \"button\", \"pButton\", \"\", \"icon\", \"pi pi-check\", \"label\", \"Ok\", 3, \"click\"], [\"header\", \"Plans\", 3, \"visible\", \"modal\", \"draggable\", \"visibleChange\"], [3, \"planData\"]],\n      template: function ForecastDetailsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"p-panel\");\n          i0.ɵɵtemplate(1, ForecastDetailsComponent_ng_template_1_Template, 4, 0, \"ng-template\", 0);\n          i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2)(4, \"form\", 3)(5, \"table\", 4)(6, \"tr\")(7, \"td\", 5)(8, \"div\", 6)(9, \"div\", 7)(10, \"div\", 8)(11, \"label\", 9);\n          i0.ɵɵtext(12, \"From Date\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(13, \"p-calendar\", 10);\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵelementStart(14, \"tr\")(15, \"td\", 5)(16, \"div\", 6)(17, \"div\", 7)(18, \"div\", 8)(19, \"label\", 9);\n          i0.ɵɵtext(20, \"To Date\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(21, \"p-calendar\", 11);\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵelementStart(22, \"tr\")(23, \"td\", 5);\n          i0.ɵɵtemplate(24, ForecastDetailsComponent_div_24_Template, 3, 1, \"div\", 12);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(25, \"tr\")(26, \"td\", 13)(27, \"div\", 6)(28, \"label\", 14);\n          i0.ɵɵtext(29, \"Building\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"ng-select\", 15);\n          i0.ɵɵlistener(\"change\", function ForecastDetailsComponent_Template_ng_select_change_30_listener($event) {\n            return ctx.onSelectBlCode($event);\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(31, \"tr\")(32, \"td\", 13)(33, \"div\", 6)(34, \"label\", 14);\n          i0.ɵɵtext(35, \"Floor \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"ng-select\", 16);\n          i0.ɵɵlistener(\"change\", function ForecastDetailsComponent_Template_ng_select_change_36_listener($event) {\n            return ctx.onSelectFlCode($event);\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(37, \"tr\")(38, \"td\", 13)(39, \"div\", 6)(40, \"label\", 14);\n          i0.ɵɵtext(41, \"Room \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(42, \"ng-select\", 17);\n          i0.ɵɵlistener(\"change\", function ForecastDetailsComponent_Template_ng_select_change_42_listener($event) {\n            return ctx.onSelectRmCode($event);\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(43, \"tr\")(44, \"td\", 5)(45, \"div\", 6)(46, \"label\", 14);\n          i0.ɵɵtext(47, \"Asset\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(48, \"ng-select\", 18);\n          i0.ɵɵlistener(\"change\", function ForecastDetailsComponent_Template_ng_select_change_48_listener($event) {\n            return ctx.onSelectAsset($event);\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(49, \"tr\")(50, \"td\", 5)(51, \"div\", 6)(52, \"label\", 14);\n          i0.ɵɵtext(53, \"Plan Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(54, \"ng-select\", 19);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(55, \"tr\")(56, \"td\", 5)(57, \"div\", 20)(58, \"button\", 21);\n          i0.ɵɵlistener(\"click\", function ForecastDetailsComponent_Template_button_click_58_listener() {\n            return ctx.onClear();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(59, \"button\", 22);\n          i0.ɵɵlistener(\"click\", function ForecastDetailsComponent_Template_button_click_59_listener() {\n            return ctx.onSearch();\n          });\n          i0.ɵɵelementEnd()()()()()()();\n          i0.ɵɵelementStart(60, \"div\", 23)(61, \"div\", 24);\n          i0.ɵɵlistener(\"click\", function ForecastDetailsComponent_Template_div_click_61_listener() {\n            return ctx.onClickRequest();\n          });\n          i0.ɵɵelementStart(62, \"div\", 25)(63, \"div\", 26);\n          i0.ɵɵtext(64, \"Requests\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(65, \"div\", 27)(66, \"p\", 28);\n          i0.ɵɵtext(67, \"Total Request:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(68, \"span\", 29);\n          i0.ɵɵtext(69);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(70, \"button\", 30);\n          i0.ɵɵlistener(\"click\", function ForecastDetailsComponent_Template_button_click_70_listener() {\n            return ctx.onClickRequest();\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(71, \"div\", 31);\n          i0.ɵɵtemplate(72, ForecastDetailsComponent_p_accordion_72_Template, 2, 1, \"p-accordion\", 32);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(73, \"p-dialog\", 33);\n          i0.ɵɵlistener(\"visibleChange\", function ForecastDetailsComponent_Template_p_dialog_visibleChange_73_listener($event) {\n            return ctx.displayRequestList = $event;\n          });\n          i0.ɵɵelementStart(74, \"p-table\", 34, 35);\n          i0.ɵɵtemplate(76, ForecastDetailsComponent_ng_template_76_Template, 65, 0, \"ng-template\", 0);\n          i0.ɵɵtemplate(77, ForecastDetailsComponent_ng_template_77_Template, 21, 24, \"ng-template\", 36);\n          i0.ɵɵtemplate(78, ForecastDetailsComponent_ng_template_78_Template, 3, 1, \"ng-template\", 37);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(79, ForecastDetailsComponent_ng_template_79_Template, 1, 0, \"ng-template\", 38);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(80, ForecastDetailsComponent_p_dialog_80_Template, 2, 6, \"p-dialog\", 39);\n          i0.ɵɵtemplate(81, ForecastDetailsComponent_p_dialog_81_Template, 2, 6, \"p-dialog\", 40);\n          i0.ɵɵtemplate(82, ForecastDetailsComponent_p_dialog_82_Template, 5, 6, \"p-dialog\", 41);\n          i0.ɵɵelementStart(83, \"p-confirmDialog\", 42, 43);\n          i0.ɵɵtemplate(85, ForecastDetailsComponent_ng_template_85_Template, 2, 0, \"ng-template\", 0);\n          i0.ɵɵtemplate(86, ForecastDetailsComponent_ng_template_86_Template, 1, 0, \"ng-template\", 38);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(87, ForecastDetailsComponent_p_dialog_87_Template, 2, 4, \"p-dialog\", 44);\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"formGroup\", ctx.filterPanel);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"minDate\", ctx.today)(\"showIcon\", false);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"showIcon\", false)(\"minDate\", ctx.today)(\"maxDate\", ctx.maxDate);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMsg.length > 0);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"clearable\", false)(\"searchable\", true)(\"items\", ctx.enumBL);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"clearable\", false)(\"searchable\", true)(\"items\", ctx.enumFL);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"clearable\", false)(\"searchable\", true)(\"items\", ctx.rm_data)(\"searchable\", true);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"items\", ctx.enumEquipment)(\"clearable\", false)(\"searchable\", true);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"clearable\", false)(\"items\", ctx.planList)(\"searchable\", true);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"disabled\", !ctx.filterPanel.valid);\n          i0.ɵɵadvance(10);\n          i0.ɵɵtextInterpolate(ctx.requestsList.length);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"hidden\", ctx.requestsList.length == 0);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.isReload);\n          i0.ɵɵadvance(1);\n          i0.ɵɵstyleMap(i0.ɵɵpureFunction0(48, _c4));\n          i0.ɵɵproperty(\"visible\", ctx.displayRequestList)(\"modal\", true)(\"maximizable\", false)(\"draggable\", false)(\"resizable\", false)(\"closable\", false);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"value\", ctx.requestsList)(\"paginator\", true)(\"rows\", ctx.rowCount)(\"scrollable\", true)(\"showCurrentPageReport\", true)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(49, _c0))(\"rowHover\", false);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.showTradeDetails);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.showPartDetails);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.showToolDetails);\n          i0.ɵɵadvance(1);\n          i0.ɵɵstyleMap(i0.ɵɵpureFunction0(50, _c5));\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.showPlanDetails);\n        }\n      },\n      dependencies: [i5.NgForOf, i5.NgIf, i12.Accordion, i12.AccordionTab, i11.PrimeTemplate, i13.Table, i13.SortableColumn, i13.SelectableRow, i13.SortIcon, i13.ColumnFilter, i14.Calendar, i15.ButtonDirective, i16.Dialog, i17.Panel, i18.ConfirmDialog, i19.NgSelectComponent, i2.ɵNgNoValidate, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i20.MatLegacyCard, i20.MatLegacyCardContent, i21.TradeDetailsComponent, i22.PartDetailsComponent, i23.AddToolsComponent, i24.ForecastPlanDetailsComponent, i25.MatTooltip, i5.DatePipe],\n      styles: [\".row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:10px}.column[_ngcontent-%COMP%]{flex-basis:33%;overflow-x:scroll}.card[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px;margin-bottom:10px}.card-header[_ngcontent-%COMP%]{font-weight:500;padding:5px 5px 5px 0;font-size:14px}.card-content[_ngcontent-%COMP%]{margin-top:5px;max-height:350px;overflow-y:scroll}.card-content-title[_ngcontent-%COMP%]{margin-right:5px;font-weight:400;font-size:11px}.table-header[_ngcontent-%COMP%]{font-weight:500;font-size:12px}.hover-pointer[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s,color .2s,border-color .2s,box-shadow .5s}.hover-pointer[_ngcontent-%COMP%]:hover{background-color:#cdefed;transform:scale(1)}.disabled-form[_ngcontent-%COMP%]{opacity:.8;pointer-events:none}[_nghost-%COMP%]     .p-button.p-button-icon-only{padding:.5rem 0;width:16px!important;height:16px!important;cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:lightgray;border-radius:2px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:0px}\"]\n    });\n  }\n  return ForecastDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}