{"ast":null,"code":"import { MessageService } from 'primeng/api';\nimport { RequestLogComponent } from '../widgets/request-log/modal/request-log.component';\nimport { WrCommentsComponent } from '../widgets/wr-comments/wr-comments.component';\nimport { RequestPartsComponent } from '../widgets/request-parts/modal/request-parts.component';\nimport { RequestToolsComponent } from '../widgets/request-tools/request-tools.component';\nimport { RequestTechnicianComponent } from '../widgets/request-technician/model/request-technician.component';\nimport { RequestTechnicianLogComponent } from '../widgets/request-technician-log/modal/request-technician-log.component';\nimport { RequestOtherCostComponent } from '../widgets/request-other-cost/modal/request-other-cost.component';\nimport { BudgetAnalysisComponent } from '../../budget-analysis/model/budget-analysis.component';\nimport { RequestDocumentsComponent } from '../widgets/request-documents/modal/request-documents.component';\nimport { DocumentsListComponent } from 'src/app/ui/documents-list/modal/documents-list.component';\nimport { RequestTradesComponent } from '../widgets/request-trades/modal/request-trades.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../work-request/service/add-work-request.services\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"src/app/services/enum.service\";\nimport * as i6 from \"src/app/services/auth.service\";\nimport * as i7 from \"primeng/api\";\nimport * as i8 from \"primeng/button\";\nimport * as i9 from \"primeng/toast\";\nimport * as i10 from \"primeng/panel\";\nimport * as i11 from \"primeng/confirmdialog\";\nimport * as i12 from \"primeng/tabview\";\nimport * as i13 from \"primeng/timeline\";\nimport * as i14 from \"ngx-spinner\";\nimport * as i15 from \"../../work-request/add-work-request/add-work-request.component\";\nimport * as i16 from \"../widgets/request-log/modal/request-log.component\";\nimport * as i17 from \"../widgets/wr-comments/wr-comments.component\";\nimport * as i18 from \"../widgets/request-parts/modal/request-parts.component\";\nimport * as i19 from \"../widgets/request-technician/model/request-technician.component\";\nimport * as i20 from \"../widgets/request-tools/request-tools.component\";\nimport * as i21 from \"../widgets/request-technician-log/modal/request-technician-log.component\";\nimport * as i22 from \"../widgets/request-other-cost/modal/request-other-cost.component\";\nimport * as i23 from \"../../budget-analysis/model/budget-analysis.component\";\nimport * as i24 from \"../../../documents-list/modal/documents-list.component\";\nimport * as i25 from \"../widgets/request-trades/modal/request-trades.component\";\nimport * as i26 from \"@angular/material/tooltip\";\nfunction WorkRequestDetailsComponent_ng_template_1_p_button_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-button\", 27);\n    i0.ɵɵlistener(\"click\", function WorkRequestDetailsComponent_ng_template_1_p_button_0_Template_p_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.clickBack());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction WorkRequestDetailsComponent_ng_template_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function WorkRequestDetailsComponent_ng_template_1_div_1_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.logRequest());\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction WorkRequestDetailsComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, WorkRequestDetailsComponent_ng_template_1_p_button_0_Template, 1, 0, \"p-button\", 25);\n    i0.ɵɵtemplate(1, WorkRequestDetailsComponent_ng_template_1_div_1_Template, 2, 0, \"div\", 26);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.viewDetails && !ctx_r0.isNavigationFromReport);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.viewDetails && !ctx_r0.isNavigationFromReport);\n  }\n}\nfunction WorkRequestDetailsComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵelement(1, \"i\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const event_r21 = ctx.$implicit;\n    i0.ɵɵstyleProp(\"color\", event_r21.color);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", event_r21.icon)(\"matTooltip\", event_r21.text);\n  }\n}\nfunction WorkRequestDetailsComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"b\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const event_r22 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(event_r22.status);\n  }\n}\nfunction WorkRequestDetailsComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n  }\n  if (rf & 2) {\n    const event_r23 = ctx.$implicit;\n    i0.ɵɵtextInterpolate1(\" \", event_r23.date, \" \");\n  }\n}\nfunction WorkRequestDetailsComponent_p_tabPanel_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-tabPanel\", 32, 33)(2, \"form\", 34, 35)(4, \"app-add-work-request\", 36);\n    i0.ɵɵlistener(\"parentFun\", function WorkRequestDetailsComponent_p_tabPanel_10_Template_app_add_work_request_parentFun_4_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r26.reloadDetails($event));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r4.frmRequestDetail);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"isDetails\", true)(\"isView\", ctx_r4.isView)(\"isReadOnly\", ctx_r4.isReadOnly || ctx_r4.makeDetailsReadOnly)(\"afterSavedForm\", ctx_r4.afterSavedForm);\n  }\n}\nfunction WorkRequestDetailsComponent_p_tabPanel_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-tabPanel\", 37, 38)(2, \"app-documents-list\", 39);\n    i0.ɵɵlistener(\"parentFun\", function WorkRequestDetailsComponent_p_tabPanel_11_Template_app_documents_list_parentFun_2_listener($event) {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.setDocBucketId($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"docBucketId\", ctx_r5.docBucketId);\n  }\n}\nfunction WorkRequestDetailsComponent_p_tabPanel_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\", 40, 41);\n    i0.ɵɵelement(2, \"app-request-technician\", 42);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"isReadOnly\", ctx_r6.isReadOnly);\n  }\n}\nfunction WorkRequestDetailsComponent_p_tabPanel_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\", 43, 44);\n    i0.ɵɵelement(2, \"app-request-technician-log\", 42);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"isReadOnly\", ctx_r7.isReadOnly);\n  }\n}\nfunction WorkRequestDetailsComponent_p_tabPanel_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\", 45, 46);\n    i0.ɵɵelement(2, \"app-request-tools\", 42);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"isReadOnly\", ctx_r8.isReadOnly);\n  }\n}\nfunction WorkRequestDetailsComponent_p_tabPanel_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\", 47, 48);\n    i0.ɵɵelement(2, \"app-request-trades\", 42);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"isReadOnly\", ctx_r9.isReadOnly);\n  }\n}\nfunction WorkRequestDetailsComponent_p_tabPanel_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\", 49, 50);\n    i0.ɵɵelement(2, \"app-request-parts\", 42);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"isReadOnly\", ctx_r10.isReadOnly);\n  }\n}\nfunction WorkRequestDetailsComponent_p_tabPanel_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\", 51, 52);\n    i0.ɵɵelement(2, \"app-wr-comments\", 53);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"isReadOnly\", ctx_r11.isReadOnly)(\"isDetails\", ctx_r11.isDetails);\n  }\n}\nfunction WorkRequestDetailsComponent_p_tabPanel_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\", 54, 55);\n    i0.ɵɵelement(2, \"app-request-other-cost\", 42);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"isReadOnly\", ctx_r12.isReadOnly);\n  }\n}\nfunction WorkRequestDetailsComponent_p_tabPanel_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\", 56, 57);\n    i0.ɵɵelement(2, \"app-budget-analysis\", 58);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hideFilterPanel\", ctx_r13.hideFilterPanel);\n  }\n}\nfunction WorkRequestDetailsComponent_p_tabPanel_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-tabPanel\", 59, 60);\n    i0.ɵɵelement(2, \"app-request-log\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let WorkRequestDetailsComponent = /*#__PURE__*/(() => {\n  class WorkRequestDetailsComponent {\n    constructor(formBuilder, router, route, wrSrv, datePipe, enumsrv, authSrv) {\n      this.formBuilder = formBuilder;\n      this.router = router;\n      this.route = route;\n      this.wrSrv = wrSrv;\n      this.datePipe = datePipe;\n      this.enumsrv = enumsrv;\n      this.authSrv = authSrv;\n      this.index = 0;\n      this.enumList = [];\n      this.enumClonedList = [];\n      this.enumWr = [];\n      this.enumWrStatus = [];\n      this.logData = [];\n      this.isReadOnly = false;\n      this.title = \"Request Id\";\n      this.makeDetailsReadOnly = false;\n      this.isRequestor = false;\n      this.isApprover = false;\n      this.isTechnician = false;\n      this.isSupervisor = false;\n      this.selectedTab = '';\n      this.afterSavedForm = true;\n      this.viewDetails = false;\n      this.isNavigationFromReport = false;\n      this.hideFilterPanel = true;\n      this.showRequiredTabs = true;\n      this.isDetails = false;\n      this.docBucketId = 0;\n      this.isView = false;\n      this.frmRequestDetail = this.formBuilder.group({\n        addWrFormPanel: []\n      });\n      this.route.queryParams.subscribe(params => {\n        if (params.requestId != null) {\n          this.requestId = parseInt(params.requestId);\n          this.index = params.index;\n          this.action = params.action;\n          this.status = params.status;\n          this.viewDetails = params.viewDetails;\n          this.isNavigationFromReport = params.isNavigationFromReport;\n        } else {\n          this.requestId = 0;\n          this.index = 0;\n        }\n      });\n    }\n    ngOnInit() {\n      this.title = this.title + \" : \" + this.requestId;\n      if (this.action === 'details' || this.status === 'Rejected' || this.status === 'Completed' || this.status === 'Cancelled' || this.status === 'Close') {\n        this.isReadOnly = true;\n        this.isDetails = true;\n      }\n      if (this.action === 'afterSavedForm') {\n        this.afterSavedForm = true;\n      } else {\n        // this.afterSavedForm = false;\n      }\n      this.loadEnums();\n      this.loadRequestDetails(this.requestId);\n    }\n    loadRequestDetails(wrId) {\n      let filterData = {\n        siteId: null,\n        blId: null,\n        flId: null,\n        rmId: null,\n        eqId: null,\n        wrId: wrId,\n        status: null,\n        problemType: null,\n        dateRequestedFrom: null,\n        dateRequestedTo: null,\n        requestedFor: null,\n        technicianId: null\n      };\n      this.wrSrv.getAllWrByFilter(filterData).subscribe(res => {\n        if (res) {\n          if (res[0].status === this.getIdByEnumValue(\"Requested\")) {\n            this.showRequiredTabs = true;\n            this.isView = false;\n          } else {\n            this.showRequiredTabs = false;\n            this.isView = true;\n          }\n          this.isRequestor = res[0].isRequestor === \"1\" ? true : false;\n          this.isApprover = res[0].isApprover === \"1\" ? true : false;\n          this.isTechnician = res[0].isTechnician === \"1\" ? true : false;\n          this.isSupervisor = res[0].isSupervisor === \"1\" ? true : false;\n          this.docBucketId = res[0].docBucketId;\n          this.makeReadOnly(this.isRequestor, this.isApprover, this.isTechnician, this.isSupervisor);\n          setTimeout(() => {\n            this.frmRequestDetail.patchValue({\n              addWrFormPanel: res[0]\n            });\n          }, 0);\n        }\n      });\n    }\n    makeReadOnly(isRequestor, isApprover, isTechnician, isSupervisor) {\n      if ((isApprover || isTechnician) && !isRequestor && !isSupervisor) {\n        this.makeDetailsReadOnly = true;\n      }\n    }\n    loadEnums() {\n      this.enumList = [];\n      this.enumsrv.getEnums().subscribe(res => {\n        this.enumList = res;\n        this.enumClonedList = this.enumList.map(x => Object.assign({}, x));\n        // this.enumWr = this.enumClonedList.filter(t => t.tableName.toLocaleUpperCase() === 'wr'.toLocaleUpperCase());\n        this.enumWrStatus = this.enumClonedList.filter(t => t.tableName.toLocaleUpperCase() === 'wr'.toLocaleUpperCase() && t.fieldName.toLocaleUpperCase() === 'status'.toLocaleUpperCase());\n        this.getTimeLineById(this.requestId);\n      });\n    }\n    handleChange(event) {\n      if (event != null) {\n        this.index = event.index;\n        this.selectedTab = event.originalEvent.target.innerText;\n      }\n      switch (this.selectedTab) {\n        case \"Details\":\n          break;\n        case \"Technician\":\n          this.requestTechnicianComponent.requestId = this.requestId;\n          this.requestTechnicianComponent.isRequestor = this.isRequestor;\n          this.requestTechnicianComponent.isApprover = this.isApprover;\n          this.requestTechnicianComponent.isTechnician = this.isTechnician;\n          this.requestTechnicianComponent.isSupervisor = this.isSupervisor;\n          this.requestTechnicianComponent.loadRecords(this.requestId);\n          break;\n        case \"Tools\":\n          this.requestToolsComponent.requestId = this.requestId;\n          this.requestToolsComponent.isRequestor = this.isRequestor;\n          this.requestToolsComponent.isApprover = this.isApprover;\n          this.requestToolsComponent.isTechnician = this.isTechnician;\n          this.requestToolsComponent.isSupervisor = this.isSupervisor;\n          this.requestToolsComponent.loadRecords(this.requestId);\n          break;\n        case \"Work Log\":\n          this.requestTechnicianLogComponent.requestId = this.requestId;\n          this.requestTechnicianLogComponent.isRequestor = this.isRequestor;\n          this.requestTechnicianLogComponent.isApprover = this.isApprover;\n          this.requestTechnicianLogComponent.isTechnician = this.isTechnician;\n          this.requestTechnicianLogComponent.isSupervisor = this.isSupervisor;\n          this.requestTechnicianLogComponent.loadRecords(this.requestId);\n          break;\n        case \"Parts\":\n          this.requestPartsComponent.requestId = this.requestId;\n          this.requestPartsComponent.isRequestor = this.isRequestor;\n          this.requestPartsComponent.isApprover = this.isApprover;\n          this.requestPartsComponent.isTechnician = this.isTechnician;\n          this.requestPartsComponent.isSupervisor = this.isSupervisor;\n          this.requestPartsComponent.loadRecords(this.requestId);\n          break;\n        case \"Comments\":\n          this.wrCommentsComponent.requestId = this.requestId;\n          this.wrCommentsComponent.loadWrComments(this.requestId);\n          break;\n        case \"Other Cost\":\n          this.requestOtherCostComponent.isRequestor = this.isRequestor;\n          this.requestOtherCostComponent.isApprover = this.isApprover;\n          this.requestOtherCostComponent.isTechnician = this.isTechnician;\n          this.requestOtherCostComponent.isSupervisor = this.isSupervisor;\n          this.requestOtherCostComponent.requestId = this.requestId;\n          this.requestOtherCostComponent.loadRecords(this.requestId);\n          break;\n        case \"Budget Summary\":\n          let filterData = {\n            \"wrId\": this.requestId\n          };\n          this.budgetAnalysisComponent.getRequestBugdet(filterData);\n          break;\n        case \"Request Log\":\n          this.requestLogComponent.loadRequestLogData(this.requestId);\n          break;\n        case \"Documents\":\n          this.documentsListComponent.data = {\n            tableName: 'wr',\n            fieldName: 'doc_bucket_id',\n            pkField: 'wr_id',\n            docBucketId: this.docBucketId,\n            pkValue: this.requestId\n          };\n          this.documentsListComponent.loadDocumentsByRequestIdAndDocBucketId(this.requestId, this.docBucketId ? this.docBucketId : 0);\n          break;\n        case \"Trades\":\n          this.requestTradesComponent.requestId = this.requestId;\n          this.requestTradesComponent.isRequestor = this.isRequestor;\n          this.requestTradesComponent.isApprover = this.isApprover;\n          this.requestTradesComponent.isTechnician = this.isTechnician;\n          this.requestTradesComponent.isSupervisor = this.isSupervisor;\n          this.requestTradesComponent.loadRecords(this.requestId);\n          break;\n      }\n    }\n    setEventDetails() {\n      this.timeLineEvent = [];\n      for (let i = 0; i < this.enumWrStatus.length; i++) {\n        var field = this.enumWrStatus[i];\n        var date = this.getDateByStatus(field.enumKey);\n        var icon = date ? 'pi pi-circle-on' : 'pi pi-circle-off';\n        var color = date ? 'green' : '#673AB7';\n        var status = field.enumValue;\n        var event = {\n          status: status,\n          date: this.datePipe.transform(date, \"dd MMM yyyy\"),\n          icon: icon,\n          color: color\n        };\n        if (this.status === \"On Hold For Access\" && status === \"On Hold For Access\" || this.status === \"On Hold For Parts\" && status === \"On Hold For Parts\" || this.status === \"On Hold For Labour\" && status === \"On Hold For Labour\") {\n          this.timeLineEvent.push(event);\n          break; // stop the loop here\n        } else if (this.status === \"In Process\" && status === \"On Hold For Access\" || this.status === \"In Process\" && status === \"On Hold For Parts\" || this.status === \"In Process\" && status === \"On Hold For Labour\") {\n          // this.timeLineEvent.push(event);\n          // var InProcessData = [...this.timeLineEvent]\n        } else if (status === \"Rejected\" && date === \"\") {} else if (status === \"Rejected\" && date) {\n          this.timeLineEvent.pop();\n          this.timeLineEvent.push(event);\n          break;\n        } else if (status === \"On Hold For Access\" && date === \"\") {} else if (status === \"On Hold For Parts\" && date === \"\") {} else if (status === \"On Hold For Labour\" && date === \"\") {} else if (status === \"Cancelled\" && date === \"\") {} else if (status === \"Cancelled\" && date) {\n          this.timeLineEvent = this.timeLineEvent.filter(t => t.date !== null);\n          this.timeLineEvent.push(event);\n        } else {\n          this.timeLineEvent.push(event);\n        }\n      }\n    }\n    getTimeLineById(requestId) {\n      this.wrSrv.getRequestLogByRequestId(requestId).subscribe(res => {\n        this.logData = res;\n        this.logData = this.logData.sort((a, b) => b.requestLogId - a.requestLogId);\n        this.setEventDetails();\n      });\n    }\n    getDateByStatus(stat) {\n      var res = this.logData.find(t => t.status == stat);\n      res = res != null && res != 'undefined' ? res.dateChanged : '';\n      return res;\n    }\n    clickBack() {\n      const prevUrl = this.authSrv.getPreviousUrl();\n      this.authSrv.setPreviousUrl(\"\");\n      this.router.navigate([prevUrl]);\n    }\n    logRequest() {\n      this.router.navigate(['/add-work-request'], {\n        queryParams: {\n          requestId: 0\n        }\n      });\n    }\n    getIdByEnumValue(value) {\n      return this.enumWrStatus.find(t => t.enumValue.toLocaleUpperCase() === value.toLocaleUpperCase())?.enumKey;\n    }\n    setDocBucketId(docBucketId) {\n      this.docBucketId = docBucketId;\n    }\n    reloadDetails(requestId) {\n      this.loadRequestDetails(requestId);\n      this.getTimeLineById(requestId);\n    }\n    static #_ = this.ɵfac = function WorkRequestDetailsComponent_Factory(t) {\n      return new (t || WorkRequestDetailsComponent)(i0.ɵɵdirectiveInject(i1.UntypedFormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AddWorkRequestService), i0.ɵɵdirectiveInject(i4.DatePipe), i0.ɵɵdirectiveInject(i5.EnumService), i0.ɵɵdirectiveInject(i6.AuthService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: WorkRequestDetailsComponent,\n      selectors: [[\"app-work-request-details\"]],\n      viewQuery: function WorkRequestDetailsComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(RequestLogComponent, 5);\n          i0.ɵɵviewQuery(WrCommentsComponent, 5);\n          i0.ɵɵviewQuery(RequestPartsComponent, 5);\n          i0.ɵɵviewQuery(RequestToolsComponent, 5);\n          i0.ɵɵviewQuery(RequestTechnicianComponent, 5);\n          i0.ɵɵviewQuery(RequestTechnicianLogComponent, 5);\n          i0.ɵɵviewQuery(RequestOtherCostComponent, 5);\n          i0.ɵɵviewQuery(BudgetAnalysisComponent, 5);\n          i0.ɵɵviewQuery(RequestDocumentsComponent, 5);\n          i0.ɵɵviewQuery(DocumentsListComponent, 5);\n          i0.ɵɵviewQuery(RequestTradesComponent, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.requestLogComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.wrCommentsComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.requestPartsComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.requestToolsComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.requestTechnicianComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.requestTechnicianLogComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.requestOtherCostComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.budgetAnalysisComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.requestDocumentComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.documentsListComponent = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.requestTradesComponent = _t.first);\n        }\n      },\n      features: [i0.ɵɵProvidersFeature([MessageService])],\n      decls: 26,\n      vars: 15,\n      consts: [[3, \"header\"], [\"pTemplate\", \"icons\"], [1, \"col\"], [1, \"card\", \"col-sm-12\", \"col-md-12\", \"col-xm-12\", \"col-lg-12\", 2, \"padding\", \"5px\"], [\"layout\", \"horizontal\", \"align\", \"top\", 3, \"value\"], [\"pTemplate\", \"marker\"], [\"pTemplate\", \"opposite\"], [\"pTemplate\", \"content\"], [1, \"card\", \"col-sm-12\", \"col-md-12\", \"col-xm-12\", \"col-lg-12\"], [3, \"activeIndex\", \"activeIndexChange\", \"onChange\"], [\"header\", \"Details\", 4, \"ngIf\"], [\"header\", \"Documents\", 4, \"ngIf\"], [\"header\", \"Technician\", 4, \"ngIf\"], [\"header\", \"Work Log\", 4, \"ngIf\"], [\"header\", \"Tools\", 4, \"ngIf\"], [\"header\", \"Trades\", 4, \"ngIf\"], [\"header\", \"Parts\", 4, \"ngIf\"], [\"header\", \"Comments\", 4, \"ngIf\"], [\"header\", \"Other Cost\", 4, \"ngIf\"], [\"header\", \"Budget Summary\", 4, \"ngIf\"], [\"header\", \"Request Log\", 4, \"ngIf\"], [\"key\", \"requestDetailsMessage\", \"header\", \"Confirmation\", \"icon\", \"pi pi-exclamation-triangle\"], [\"key\", \"requestMessage\"], [\"bdColor\", \"rgba(51,51,51,0.4)\", \"size\", \"default\", \"color\", \"#7f1933\", \"type\", \"ball-clip-rotate\", 3, \"fullScreen\"], [2, \"font-size\", \"16px\", \"color\", \"white\"], [\"label\", \"Back\", \"icon\", \"pi pi-arrow-circle-left\", \"class\", \" pull-right\", \"styleClass\", \"p-button-secondary\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"p-grid p-nogutter p-align-end p-justify-end\", \"style\", \"margin-left:auto\", 4, \"ngIf\"], [\"label\", \"Back\", \"icon\", \"pi pi-arrow-circle-left\", \"styleClass\", \"p-button-secondary\", 1, \"pull-right\", 3, \"click\"], [1, \"p-grid\", \"p-nogutter\", \"p-align-end\", \"p-justify-end\", 2, \"margin-left\", \"auto\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Log Request\", \"icon\", \"pi pi-plus\", 1, \"p-button-primary\", \"p-button-sm\", \"pull-right\", 3, \"click\"], [1, \"custom-marker\", \"p-shadow-2\"], [3, \"ngClass\", \"matTooltip\"], [\"header\", \"Details\"], [\"details\", \"\"], [\"id\", \"content\", 3, \"formGroup\"], [\"content\", \"\"], [\"formControlName\", \"addWrFormPanel\", 3, \"isDetails\", \"isView\", \"isReadOnly\", \"afterSavedForm\", \"parentFun\"], [\"header\", \"Documents\"], [\"document\", \"\"], [3, \"docBucketId\", \"parentFun\"], [\"header\", \"Technician\"], [\"technician\", \"\"], [3, \"isReadOnly\"], [\"header\", \"Work Log\"], [\"work\", \"\"], [\"header\", \"Tools\"], [\"tools\", \"\"], [\"header\", \"Trades\"], [\"trades\", \"\"], [\"header\", \"Parts\"], [\"parts\", \"\"], [\"header\", \"Comments\"], [\"comments\", \"\"], [3, \"isReadOnly\", \"isDetails\"], [\"header\", \"Other Cost\"], [\"othercost\", \"\"], [\"header\", \"Budget Summary\"], [\"budgetsummary\", \"\"], [3, \"hideFilterPanel\"], [\"header\", \"Request Log\"], [\"requestlog\", \"\"]],\n      template: function WorkRequestDetailsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"p-panel\", 0);\n          i0.ɵɵtemplate(1, WorkRequestDetailsComponent_ng_template_1_Template, 2, 2, \"ng-template\", 1);\n          i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"p-timeline\", 4);\n          i0.ɵɵtemplate(5, WorkRequestDetailsComponent_ng_template_5_Template, 2, 4, \"ng-template\", 5);\n          i0.ɵɵtemplate(6, WorkRequestDetailsComponent_ng_template_6_Template, 2, 1, \"ng-template\", 6);\n          i0.ɵɵtemplate(7, WorkRequestDetailsComponent_ng_template_7_Template, 1, 1, \"ng-template\", 7);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"div\", 8)(9, \"p-tabView\", 9);\n          i0.ɵɵlistener(\"activeIndexChange\", function WorkRequestDetailsComponent_Template_p_tabView_activeIndexChange_9_listener($event) {\n            return ctx.index = $event;\n          })(\"onChange\", function WorkRequestDetailsComponent_Template_p_tabView_onChange_9_listener($event) {\n            return ctx.handleChange($event);\n          });\n          i0.ɵɵtemplate(10, WorkRequestDetailsComponent_p_tabPanel_10_Template, 5, 5, \"p-tabPanel\", 10);\n          i0.ɵɵtemplate(11, WorkRequestDetailsComponent_p_tabPanel_11_Template, 3, 1, \"p-tabPanel\", 11);\n          i0.ɵɵtemplate(12, WorkRequestDetailsComponent_p_tabPanel_12_Template, 3, 1, \"p-tabPanel\", 12);\n          i0.ɵɵtemplate(13, WorkRequestDetailsComponent_p_tabPanel_13_Template, 3, 1, \"p-tabPanel\", 13);\n          i0.ɵɵtemplate(14, WorkRequestDetailsComponent_p_tabPanel_14_Template, 3, 1, \"p-tabPanel\", 14);\n          i0.ɵɵtemplate(15, WorkRequestDetailsComponent_p_tabPanel_15_Template, 3, 1, \"p-tabPanel\", 15);\n          i0.ɵɵtemplate(16, WorkRequestDetailsComponent_p_tabPanel_16_Template, 3, 1, \"p-tabPanel\", 16);\n          i0.ɵɵtemplate(17, WorkRequestDetailsComponent_p_tabPanel_17_Template, 3, 2, \"p-tabPanel\", 17);\n          i0.ɵɵtemplate(18, WorkRequestDetailsComponent_p_tabPanel_18_Template, 3, 1, \"p-tabPanel\", 18);\n          i0.ɵɵtemplate(19, WorkRequestDetailsComponent_p_tabPanel_19_Template, 3, 1, \"p-tabPanel\", 19);\n          i0.ɵɵtemplate(20, WorkRequestDetailsComponent_p_tabPanel_20_Template, 3, 0, \"p-tabPanel\", 20);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelement(21, \"p-confirmDialog\", 21)(22, \"p-toast\", 22);\n          i0.ɵɵelementStart(23, \"ngx-spinner\", 23)(24, \"p\", 24);\n          i0.ɵɵtext(25, \"Loading...\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"header\", ctx.title);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"value\", ctx.timeLineEvent);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"activeIndex\", ctx.index);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isRequestor || ctx.isApprover || ctx.isTechnician || ctx.isSupervisor);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isRequestor || ctx.isSupervisor || ctx.isTechnician);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (ctx.isTechnician || ctx.isSupervisor) && !ctx.showRequiredTabs);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (ctx.isTechnician || ctx.isSupervisor) && !ctx.showRequiredTabs);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (ctx.isTechnician || ctx.isSupervisor) && !ctx.showRequiredTabs);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSupervisor && !ctx.showRequiredTabs);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (ctx.isTechnician || ctx.isSupervisor) && !ctx.showRequiredTabs);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isRequestor || ctx.isApprover || ctx.isTechnician || ctx.isSupervisor);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (ctx.isSupervisor || ctx.isTechnician) && !ctx.showRequiredTabs);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSupervisor);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isRequestor || ctx.isApprover || ctx.isTechnician || ctx.isSupervisor);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"fullScreen\", true);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgIf, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i7.PrimeTemplate, i8.ButtonDirective, i8.Button, i9.Toast, i10.Panel, i11.ConfirmDialog, i12.TabView, i12.TabPanel, i13.Timeline, i14.NgxSpinnerComponent, i15.AddWorkRequestComponent, i16.RequestLogComponent, i17.WrCommentsComponent, i18.RequestPartsComponent, i19.RequestTechnicianComponent, i20.RequestToolsComponent, i21.RequestTechnicianLogComponent, i22.RequestOtherCostComponent, i23.BudgetAnalysisComponent, i24.DocumentsListComponent, i25.RequestTradesComponent, i26.MatTooltip],\n      styles: [\".readonly-panel[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}[_nghost-%COMP%]     .p-tabview .p-tabview-nav li .p-tabview-nav-link{border-color:#879cc9;background:#879cc9;color:#fff;margin-right:2px;line-height:2.35;min-width:80px;border-radius:6px 6px 0 0;border-bottom:3px solid #879cc9!important;box-shadow:none!important}[_nghost-%COMP%]     .p-tabview .p-tabview-nav li.p-highlight .p-tabview-nav-link{background:#ffffff;border-color:#879cc9;color:#000;margin-right:2px;line-height:2.35;min-width:80px;border-radius:6px 6px 0 0;border-bottom:3px solid #879cc9!important;box-shadow:none!important}[_nghost-%COMP%]     .p-timeline-horizontal .p-timeline-event:last-child{flex:.5}[_nghost-%COMP%]     .p-timeline.p-timeline-horizontal .p-timeline-event-opposite, .p-timeline.p-timeline-horizontal[_ngcontent-%COMP%]   .p-timeline-event-content[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]     .p-timeline.p-timeline-horizontal .p-timeline-event-content{padding:0}\"]\n    });\n  }\n  return WorkRequestDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}